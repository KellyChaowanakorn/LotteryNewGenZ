{"file_contents":{"client/src/components/ui/resizable.tsx":{"content":"\"use client\"\n\nimport { GripVertical } from \"lucide-react\"\nimport * as ResizablePrimitive from \"react-resizable-panels\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ResizablePanelGroup = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (\n  <ResizablePrimitive.PanelGroup\n    className={cn(\n      \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\n      className\n    )}\n    {...props}\n  />\n)\n\nconst ResizablePanel = ResizablePrimitive.Panel\n\nconst ResizableHandle = ({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean\n}) => (\n  <ResizablePrimitive.PanelResizeHandle\n    className={cn(\n      \"relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\n      className\n    )}\n    {...props}\n  >\n    {withHandle && (\n      <div className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\n        <GripVertical className=\"h-2.5 w-2.5\" />\n      </div>\n    )}\n  </ResizablePrimitive.PanelResizeHandle>\n)\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n","path":null,"size_bytes":1723,"size_tokens":null},"client/src/components/ui/command.tsx":{"content":"import * as React from \"react\"\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { Search } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nCommand.displayName = CommandPrimitive.displayName\n\nconst CommandDialog = ({ children, ...props }: DialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  </div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty\n    ref={ref}\n    className=\"py-6 text-center text-sm\"\n    {...props}\n  />\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nCommandShortcut.displayName = \"CommandShortcut\"\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n","path":null,"size_bytes":4885,"size_tokens":null},"tailwind.config.ts":{"content":"import type { Config } from \"tailwindcss\";\n\nexport default {\n  darkMode: [\"class\"],\n  content: [\"./client/index.html\", \"./client/src/**/*.{js,jsx,ts,tsx}\"],\n  theme: {\n    extend: {\n      borderRadius: {\n        lg: \".5625rem\", /* 9px */\n        md: \".375rem\", /* 6px */\n        sm: \".1875rem\", /* 3px */\n      },\n      colors: {\n        // Flat / base colors (regular buttons)\n        background: \"hsl(var(--background) / <alpha-value>)\",\n        foreground: \"hsl(var(--foreground) / <alpha-value>)\",\n        border: \"hsl(var(--border) / <alpha-value>)\",\n        input: \"hsl(var(--input) / <alpha-value>)\",\n        card: {\n          DEFAULT: \"hsl(var(--card) / <alpha-value>)\",\n          foreground: \"hsl(var(--card-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--card-border) / <alpha-value>)\",\n        },\n        popover: {\n          DEFAULT: \"hsl(var(--popover) / <alpha-value>)\",\n          foreground: \"hsl(var(--popover-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--popover-border) / <alpha-value>)\",\n        },\n        primary: {\n          DEFAULT: \"hsl(var(--primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--primary-foreground) / <alpha-value>)\",\n          border: \"var(--primary-border)\",\n        },\n        secondary: {\n          DEFAULT: \"hsl(var(--secondary) / <alpha-value>)\",\n          foreground: \"hsl(var(--secondary-foreground) / <alpha-value>)\",\n          border: \"var(--secondary-border)\",\n        },\n        muted: {\n          DEFAULT: \"hsl(var(--muted) / <alpha-value>)\",\n          foreground: \"hsl(var(--muted-foreground) / <alpha-value>)\",\n          border: \"var(--muted-border)\",\n        },\n        accent: {\n          DEFAULT: \"hsl(var(--accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--accent-foreground) / <alpha-value>)\",\n          border: \"var(--accent-border)\",\n        },\n        destructive: {\n          DEFAULT: \"hsl(var(--destructive) / <alpha-value>)\",\n          foreground: \"hsl(var(--destructive-foreground) / <alpha-value>)\",\n          border: \"var(--destructive-border)\",\n        },\n        ring: \"hsl(var(--ring) / <alpha-value>)\",\n        chart: {\n          \"1\": \"hsl(var(--chart-1) / <alpha-value>)\",\n          \"2\": \"hsl(var(--chart-2) / <alpha-value>)\",\n          \"3\": \"hsl(var(--chart-3) / <alpha-value>)\",\n          \"4\": \"hsl(var(--chart-4) / <alpha-value>)\",\n          \"5\": \"hsl(var(--chart-5) / <alpha-value>)\",\n        },\n        sidebar: {\n          ring: \"hsl(var(--sidebar-ring) / <alpha-value>)\",\n          DEFAULT: \"hsl(var(--sidebar) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--sidebar-border) / <alpha-value>)\",\n        },\n        \"sidebar-primary\": {\n          DEFAULT: \"hsl(var(--sidebar-primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-primary-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-primary-border)\",\n        },\n        \"sidebar-accent\": {\n          DEFAULT: \"hsl(var(--sidebar-accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-accent-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-accent-border)\"\n        },\n        status: {\n          online: \"rgb(34 197 94)\",\n          away: \"rgb(245 158 11)\",\n          busy: \"rgb(239 68 68)\",\n          offline: \"rgb(156 163 175)\",\n        },\n      },\n      fontFamily: {\n        sans: [\"var(--font-sans)\"],\n        serif: [\"var(--font-serif)\"],\n        mono: [\"var(--font-mono)\"],\n      },\n      keyframes: {\n        \"accordion-down\": {\n          from: { height: \"0\" },\n          to: { height: \"var(--radix-accordion-content-height)\" },\n        },\n        \"accordion-up\": {\n          from: { height: \"var(--radix-accordion-content-height)\" },\n          to: { height: \"0\" },\n        },\n      },\n      animation: {\n        \"accordion-down\": \"accordion-down 0.2s ease-out\",\n        \"accordion-up\": \"accordion-up 0.2s ease-out\",\n      },\n    },\n  },\n  plugins: [require(\"tailwindcss-animate\"), require(\"@tailwindcss/typography\")],\n} satisfies Config;\n","path":null,"size_bytes":4050,"size_tokens":null},"client/src/components/ui/carousel.tsx":{"content":"import * as React from \"react\"\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from \"embla-carousel-react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\ntype CarouselApi = UseEmblaCarouselType[1]\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\ntype CarouselOptions = UseCarouselParameters[0]\ntype CarouselPlugin = UseCarouselParameters[1]\n\ntype CarouselProps = {\n  opts?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: \"horizontal\" | \"vertical\"\n  setApi?: (api: CarouselApi) => void\n}\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\n  api: ReturnType<typeof useEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: boolean\n  canScrollNext: boolean\n} & CarouselProps\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\n  }\n\n  return context\n}\n\nconst Carousel = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\n>(\n  (\n    {\n      orientation = \"horizontal\",\n      opts,\n      setApi,\n      plugins,\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [carouselRef, api] = useEmblaCarousel(\n      {\n        ...opts,\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n      },\n      plugins\n    )\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n    const onSelect = React.useCallback((api: CarouselApi) => {\n      if (!api) {\n        return\n      }\n\n      setCanScrollPrev(api.canScrollPrev())\n      setCanScrollNext(api.canScrollNext())\n    }, [])\n\n    const scrollPrev = React.useCallback(() => {\n      api?.scrollPrev()\n    }, [api])\n\n    const scrollNext = React.useCallback(() => {\n      api?.scrollNext()\n    }, [api])\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === \"ArrowLeft\") {\n          event.preventDefault()\n          scrollPrev()\n        } else if (event.key === \"ArrowRight\") {\n          event.preventDefault()\n          scrollNext()\n        }\n      },\n      [scrollPrev, scrollNext]\n    )\n\n    React.useEffect(() => {\n      if (!api || !setApi) {\n        return\n      }\n\n      setApi(api)\n    }, [api, setApi])\n\n    React.useEffect(() => {\n      if (!api) {\n        return\n      }\n\n      onSelect(api)\n      api.on(\"reInit\", onSelect)\n      api.on(\"select\", onSelect)\n\n      return () => {\n        api?.off(\"select\", onSelect)\n      }\n    }, [api, onSelect])\n\n    return (\n      <CarouselContext.Provider\n        value={{\n          carouselRef,\n          api: api,\n          opts,\n          orientation:\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n          scrollPrev,\n          scrollNext,\n          canScrollPrev,\n          canScrollNext,\n        }}\n      >\n        <div\n          ref={ref}\n          onKeyDownCapture={handleKeyDown}\n          className={cn(\"relative\", className)}\n          role=\"region\"\n          aria-roledescription=\"carousel\"\n          {...props}\n        >\n          {children}\n        </div>\n      </CarouselContext.Provider>\n    )\n  }\n)\nCarousel.displayName = \"Carousel\"\n\nconst CarouselContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div ref={carouselRef} className=\"overflow-hidden\">\n      <div\n        ref={ref}\n        className={cn(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n})\nCarouselContent.displayName = \"CarouselContent\"\n\nconst CarouselItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      ref={ref}\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      className={cn(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nCarouselItem.displayName = \"CarouselItem\"\n\nconst CarouselPrevious = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute  h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  )\n})\nCarouselPrevious.displayName = \"CarouselPrevious\"\n\nconst CarouselNext = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  )\n})\nCarouselNext.displayName = \"CarouselNext\"\n\nexport {\n  type CarouselApi,\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPrevious,\n  CarouselNext,\n}\n","path":null,"size_bytes":6210,"size_tokens":null},"client/src/components/LanguageToggle.tsx":{"content":"import { Button } from \"@/components/ui/button\";\nimport { useI18n } from \"@/lib/i18n\";\nimport { Languages } from \"lucide-react\";\n\nexport function LanguageToggle() {\n  const { language, setLanguage } = useI18n();\n\n  const toggleLanguage = () => {\n    setLanguage(language === \"th\" ? \"en\" : \"th\");\n  };\n\n  return (\n    <Button\n      variant=\"ghost\"\n      size=\"icon\"\n      onClick={toggleLanguage}\n      className=\"relative\"\n      data-testid=\"button-language-toggle\"\n    >\n      <Languages className=\"h-[1.2rem] w-[1.2rem]\" />\n      <span className=\"absolute -bottom-1 -right-1 text-[10px] font-bold bg-primary text-primary-foreground rounded px-1\">\n        {language.toUpperCase()}\n      </span>\n    </Button>\n  );\n}\n","path":null,"size_bytes":717,"size_tokens":null},"server/static.ts":{"content":"import express, { type Express } from \"express\";\nimport fs from \"fs\";\nimport path from \"path\";\n\nexport function serveStatic(app: Express) {\n  const distPath = path.resolve(__dirname, \"public\");\n  if (!fs.existsSync(distPath)) {\n    throw new Error(\n      `Could not find the build directory: ${distPath}, make sure to build the client first`,\n    );\n  }\n\n  app.use(express.static(distPath));\n\n  // fall through to index.html if the file doesn't exist\n  app.use(\"*\", (_req, res) => {\n    res.sendFile(path.resolve(distPath, \"index.html\"));\n  });\n}\n","path":null,"size_bytes":547,"size_tokens":null},"client/src/components/ui/checkbox.tsx":{"content":"import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","path":null,"size_bytes":1056,"size_tokens":null},"client/src/components/ui/breadcrumb.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Breadcrumb = React.forwardRef<\n  HTMLElement,\n  React.ComponentPropsWithoutRef<\"nav\"> & {\n    separator?: React.ReactNode\n  }\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />)\nBreadcrumb.displayName = \"Breadcrumb\"\n\nconst BreadcrumbList = React.forwardRef<\n  HTMLOListElement,\n  React.ComponentPropsWithoutRef<\"ol\">\n>(({ className, ...props }, ref) => (\n  <ol\n    ref={ref}\n    className={cn(\n      \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\n      className\n    )}\n    {...props}\n  />\n))\nBreadcrumbList.displayName = \"BreadcrumbList\"\n\nconst BreadcrumbItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentPropsWithoutRef<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    className={cn(\"inline-flex items-center gap-1.5\", className)}\n    {...props}\n  />\n))\nBreadcrumbItem.displayName = \"BreadcrumbItem\"\n\nconst BreadcrumbLink = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentPropsWithoutRef<\"a\"> & {\n    asChild?: boolean\n  }\n>(({ asChild, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      className={cn(\"transition-colors hover:text-foreground\", className)}\n      {...props}\n    />\n  )\n})\nBreadcrumbLink.displayName = \"BreadcrumbLink\"\n\nconst BreadcrumbPage = React.forwardRef<\n  HTMLSpanElement,\n  React.ComponentPropsWithoutRef<\"span\">\n>(({ className, ...props }, ref) => (\n  <span\n    ref={ref}\n    role=\"link\"\n    aria-disabled=\"true\"\n    aria-current=\"page\"\n    className={cn(\"font-normal text-foreground\", className)}\n    {...props}\n  />\n))\nBreadcrumbPage.displayName = \"BreadcrumbPage\"\n\nconst BreadcrumbSeparator = ({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) => (\n  <li\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"[&>svg]:w-3.5 [&>svg]:h-3.5\", className)}\n    {...props}\n  >\n    {children ?? <ChevronRight />}\n  </li>\n)\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\"\n\nconst BreadcrumbEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More</span>\n  </span>\n)\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\"\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n}\n","path":null,"size_bytes":2712,"size_tokens":null},"client/src/pages/Profile.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { useI18n } from \"@/lib/i18n\";\nimport { useUser } from \"@/lib/store\";\nimport { lotteryTypeNames, betTypeNames } from \"@shared/schema\";\nimport type { User as UserType, Bet, Transaction } from \"@shared/schema\";\nimport {\n  User,\n  Wallet,\n  History,\n  Trophy,\n  ArrowUpRight,\n  ArrowDownRight,\n  Clock,\n  CheckCircle,\n  XCircle,\n  Crown\n} from \"lucide-react\";\n\nexport default function Profile() {\n  const { language, t } = useI18n();\n  const { user, isAuthenticated } = useUser();\n\n  const { data: userData, isLoading: userLoading } = useQuery<UserType>({\n    queryKey: [`/api/users/${user?.id}`],\n    enabled: isAuthenticated && !!user?.id,\n  });\n\n  const { data: bets = [], isLoading: betsLoading } = useQuery<Bet[]>({\n    queryKey: [`/api/bets?userId=${user?.id}`],\n    enabled: isAuthenticated && !!user?.id,\n  });\n\n  const { data: transactions = [], isLoading: txLoading } = useQuery<Transaction[]>({\n    queryKey: [`/api/transactions/${user?.id}`],\n    enabled: isAuthenticated && !!user?.id,\n  });\n\n  if (!isAuthenticated) {\n    return (\n      <div className=\"min-h-full flex items-center justify-center p-4\">\n        <Card className=\"w-full max-w-md text-center\">\n          <CardHeader>\n            <div className=\"mx-auto p-4 bg-primary/10 rounded-full w-fit mb-4\">\n              <User className=\"h-8 w-8 text-primary\" />\n            </div>\n            <CardTitle>{t(\"profile.title\")}</CardTitle>\n            <CardDescription>\n              {language === \"th\" \n                ? \"เข้าสู่ระบบเพื่อดูข้อมูลโปรไฟล์\" \n                : \"Login to view your profile\"}\n            </CardDescription>\n          </CardHeader>\n          <CardContent>\n            <Button className=\"w-full\" asChild>\n              <a href=\"/login\">{t(\"nav.login\")}</a>\n            </Button>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  const isLoading = userLoading || betsLoading || txLoading;\n  const balance = userData?.balance || user?.balance || 0;\n  const username = userData?.username || user?.username || \"User\";\n  const totalBets = bets.length;\n  const wonBets = bets.filter(b => b.status === \"won\").length;\n  const winRate = totalBets > 0 ? ((wonBets / totalBets) * 100).toFixed(1) : \"0\";\n\n  const getStatusBadge = (status: string) => {\n    switch (status) {\n      case \"won\":\n        return <Badge className=\"bg-green-500 gap-1\"><CheckCircle className=\"h-3 w-3\" />{t(\"status.won\")}</Badge>;\n      case \"lost\":\n        return <Badge variant=\"destructive\" className=\"gap-1\"><XCircle className=\"h-3 w-3\" />{t(\"status.lost\")}</Badge>;\n      case \"pending\":\n        return <Badge variant=\"secondary\" className=\"gap-1\"><Clock className=\"h-3 w-3\" />{t(\"status.pending\")}</Badge>;\n      case \"approved\":\n        return <Badge className=\"bg-green-500\">{t(\"status.approved\")}</Badge>;\n      default:\n        return <Badge variant=\"outline\">{status}</Badge>;\n    }\n  };\n\n  const getTransactionIcon = (type: string) => {\n    switch (type) {\n      case \"deposit\":\n      case \"win\":\n      case \"affiliate_commission\":\n        return <ArrowDownRight className=\"h-4 w-4 text-green-500\" />;\n      case \"bet\":\n      case \"withdrawal\":\n        return <ArrowUpRight className=\"h-4 w-4 text-red-500\" />;\n      default:\n        return null;\n    }\n  };\n\n  const getTransactionLabel = (type: string) => {\n    switch (type) {\n      case \"deposit\":\n        return language === \"th\" ? \"ฝากเงิน\" : \"Deposit\";\n      case \"withdrawal\":\n        return language === \"th\" ? \"ถอนเงิน\" : \"Withdraw\";\n      case \"bet\":\n        return language === \"th\" ? \"แทงหวย\" : \"Bet\";\n      case \"win\":\n        return language === \"th\" ? \"ถูกรางวัล\" : \"Win\";\n      case \"affiliate_commission\":\n        return language === \"th\" ? \"คอมมิชชั่น\" : \"Commission\";\n      default:\n        return type;\n    }\n  };\n\n  return (\n    <div className=\"min-h-full\">\n      <div className=\"bg-gradient-to-br from-primary/10 via-background to-primary/5 p-4 md:p-6 border-b border-border\">\n        <div className=\"flex items-center gap-4\">\n          <Avatar className=\"h-16 w-16 border-2 border-primary\">\n            <AvatarFallback className=\"bg-primary text-primary-foreground text-xl\">\n              {username.charAt(0).toUpperCase()}\n            </AvatarFallback>\n          </Avatar>\n          <div className=\"flex-1\">\n            {isLoading ? (\n              <Skeleton className=\"h-7 w-32\" />\n            ) : (\n              <h1 className=\"text-xl md:text-2xl font-bold\">{username}</h1>\n            )}\n            <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n              <Crown className=\"h-4 w-4 text-primary\" />\n              <span>{language === \"th\" ? \"สมาชิก VIP\" : \"VIP Member\"}</span>\n            </div>\n          </div>\n          <div className=\"text-right\">\n            <p className=\"text-sm text-muted-foreground\">{t(\"profile.balance\")}</p>\n            {isLoading ? (\n              <Skeleton className=\"h-8 w-24\" />\n            ) : (\n              <p className=\"text-2xl font-bold text-primary\">\n                {balance.toLocaleString()} {t(\"common.baht\")}\n              </p>\n            )}\n          </div>\n        </div>\n      </div>\n\n      <div className=\"p-4 md:p-6 space-y-6\">\n        <div className=\"grid gap-4 sm:grid-cols-2 lg:grid-cols-4\">\n          <Card>\n            <CardContent className=\"p-4\">\n              <div className=\"flex items-center gap-3\">\n                <div className=\"p-2 bg-blue-500/10 rounded-lg\">\n                  <History className=\"h-5 w-5 text-blue-500\" />\n                </div>\n                <div>\n                  <p className=\"text-sm text-muted-foreground\">\n                    {language === \"th\" ? \"ยอดแทงทั้งหมด\" : \"Total Bets\"}\n                  </p>\n                  {isLoading ? (\n                    <Skeleton className=\"h-8 w-12\" />\n                  ) : (\n                    <p className=\"text-2xl font-bold\">{totalBets}</p>\n                  )}\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardContent className=\"p-4\">\n              <div className=\"flex items-center gap-3\">\n                <div className=\"p-2 bg-green-500/10 rounded-lg\">\n                  <Trophy className=\"h-5 w-5 text-green-500\" />\n                </div>\n                <div>\n                  <p className=\"text-sm text-muted-foreground\">\n                    {language === \"th\" ? \"ถูกรางวัล\" : \"Wins\"}\n                  </p>\n                  {isLoading ? (\n                    <Skeleton className=\"h-8 w-12\" />\n                  ) : (\n                    <p className=\"text-2xl font-bold text-green-500\">{wonBets}</p>\n                  )}\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardContent className=\"p-4\">\n              <div className=\"flex items-center gap-3\">\n                <div className=\"p-2 bg-primary/10 rounded-lg\">\n                  <Crown className=\"h-5 w-5 text-primary\" />\n                </div>\n                <div>\n                  <p className=\"text-sm text-muted-foreground\">\n                    {language === \"th\" ? \"อัตราชนะ\" : \"Win Rate\"}\n                  </p>\n                  {isLoading ? (\n                    <Skeleton className=\"h-8 w-16\" />\n                  ) : (\n                    <p className=\"text-2xl font-bold\">{winRate}%</p>\n                  )}\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardContent className=\"p-4\">\n              <div className=\"flex items-center gap-3\">\n                <div className=\"p-2 bg-amber-500/10 rounded-lg\">\n                  <Wallet className=\"h-5 w-5 text-amber-500\" />\n                </div>\n                <div>\n                  <p className=\"text-sm text-muted-foreground\">{t(\"profile.balance\")}</p>\n                  {isLoading ? (\n                    <Skeleton className=\"h-8 w-20\" />\n                  ) : (\n                    <p className=\"text-2xl font-bold text-amber-500\">\n                      {balance.toLocaleString()}\n                    </p>\n                  )}\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n\n        <div className=\"flex gap-3\">\n          <Button className=\"flex-1\" asChild data-testid=\"button-deposit\">\n            <a href=\"/wallet\">\n              <ArrowDownRight className=\"h-4 w-4 mr-2\" />\n              {t(\"profile.deposit\")}\n            </a>\n          </Button>\n          <Button variant=\"outline\" className=\"flex-1\" asChild data-testid=\"button-withdraw\">\n            <a href=\"/wallet\">\n              <ArrowUpRight className=\"h-4 w-4 mr-2\" />\n              {t(\"profile.withdraw\")}\n            </a>\n          </Button>\n        </div>\n\n        <Tabs defaultValue=\"history\" className=\"space-y-4\">\n          <TabsList className=\"grid w-full grid-cols-2\">\n            <TabsTrigger value=\"history\" className=\"gap-2\">\n              <History className=\"h-4 w-4\" />\n              {t(\"profile.history\")}\n            </TabsTrigger>\n            <TabsTrigger value=\"transactions\" className=\"gap-2\">\n              <Wallet className=\"h-4 w-4\" />\n              {t(\"profile.transactions\")}\n            </TabsTrigger>\n          </TabsList>\n\n          <TabsContent value=\"history\">\n            <Card>\n              <CardContent className=\"p-0\">\n                {betsLoading ? (\n                  <div className=\"p-4 space-y-3\">\n                    {[1, 2, 3].map((i) => (\n                      <Skeleton key={i} className=\"h-12 w-full\" />\n                    ))}\n                  </div>\n                ) : bets.length === 0 ? (\n                  <div className=\"text-center py-8 text-muted-foreground\">\n                    <History className=\"h-12 w-12 mx-auto mb-4 opacity-50\" />\n                    <p>{language === \"th\" ? \"ยังไม่มีประวัติการแทง\" : \"No betting history yet\"}</p>\n                  </div>\n                ) : (\n                  <Table>\n                    <TableHeader>\n                      <TableRow>\n                        <TableHead>{language === \"th\" ? \"หวย\" : \"Lottery\"}</TableHead>\n                        <TableHead>{language === \"th\" ? \"ประเภท\" : \"Type\"}</TableHead>\n                        <TableHead className=\"text-center\">{language === \"th\" ? \"เลข\" : \"Number\"}</TableHead>\n                        <TableHead className=\"text-right\">{language === \"th\" ? \"เงินแทง\" : \"Amount\"}</TableHead>\n                        <TableHead>{language === \"th\" ? \"สถานะ\" : \"Status\"}</TableHead>\n                      </TableRow>\n                    </TableHeader>\n                    <TableBody>\n                      {bets.map((bet) => (\n                        <TableRow key={bet.id}>\n                          <TableCell className=\"font-medium\">\n                            {lotteryTypeNames[bet.lotteryType as keyof typeof lotteryTypeNames]?.[language] || bet.lotteryType}\n                          </TableCell>\n                          <TableCell>\n                            {betTypeNames[bet.betType as keyof typeof betTypeNames]?.[language] || bet.betType}\n                          </TableCell>\n                          <TableCell className=\"text-center font-mono font-bold\">\n                            {bet.numbers}\n                          </TableCell>\n                          <TableCell className=\"text-right\">\n                            {bet.amount.toLocaleString()}\n                            {bet.status === \"won\" && bet.potentialWin && (\n                              <span className=\"text-green-500 block text-xs\">\n                                +{bet.potentialWin.toLocaleString()}\n                              </span>\n                            )}\n                          </TableCell>\n                          <TableCell>{getStatusBadge(bet.status)}</TableCell>\n                        </TableRow>\n                      ))}\n                    </TableBody>\n                  </Table>\n                )}\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          <TabsContent value=\"transactions\">\n            <Card>\n              <CardContent className=\"p-0\">\n                {txLoading ? (\n                  <div className=\"p-4 space-y-3\">\n                    {[1, 2, 3].map((i) => (\n                      <Skeleton key={i} className=\"h-12 w-full\" />\n                    ))}\n                  </div>\n                ) : transactions.length === 0 ? (\n                  <div className=\"text-center py-8 text-muted-foreground\">\n                    <Wallet className=\"h-12 w-12 mx-auto mb-4 opacity-50\" />\n                    <p>{language === \"th\" ? \"ยังไม่มีรายการธุรกรรม\" : \"No transactions yet\"}</p>\n                  </div>\n                ) : (\n                  <Table>\n                    <TableHeader>\n                      <TableRow>\n                        <TableHead>{language === \"th\" ? \"ประเภท\" : \"Type\"}</TableHead>\n                        <TableHead className=\"text-right\">{language === \"th\" ? \"จำนวน\" : \"Amount\"}</TableHead>\n                        <TableHead>{language === \"th\" ? \"อ้างอิง\" : \"Reference\"}</TableHead>\n                        <TableHead>{language === \"th\" ? \"วันที่\" : \"Date\"}</TableHead>\n                        <TableHead>{language === \"th\" ? \"สถานะ\" : \"Status\"}</TableHead>\n                      </TableRow>\n                    </TableHeader>\n                    <TableBody>\n                      {transactions.map((tx) => (\n                        <TableRow key={tx.id}>\n                          <TableCell className=\"font-medium\">\n                            <div className=\"flex items-center gap-2\">\n                              {getTransactionIcon(tx.type)}\n                              {getTransactionLabel(tx.type)}\n                            </div>\n                          </TableCell>\n                          <TableCell className={`text-right font-semibold ${tx.amount > 0 ? \"text-green-500\" : \"text-red-500\"}`}>\n                            {tx.amount > 0 ? \"+\" : \"\"}{tx.amount.toLocaleString()}\n                          </TableCell>\n                          <TableCell className=\"font-mono text-xs\">{tx.reference}</TableCell>\n                          <TableCell>{new Date(tx.createdAt).toLocaleDateString()}</TableCell>\n                          <TableCell>{getStatusBadge(tx.status)}</TableCell>\n                        </TableRow>\n                      ))}\n                    </TableBody>\n                  </Table>\n                )}\n              </CardContent>\n            </Card>\n          </TabsContent>\n        </Tabs>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":15540,"size_tokens":null},"client/src/lib/utils.ts":{"content":"import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","path":null,"size_bytes":166,"size_tokens":null},"client/src/components/ThemeToggle.tsx":{"content":"import { Button } from \"@/components/ui/button\";\nimport { useTheme } from \"@/components/ThemeProvider\";\nimport { Moon, Sun } from \"lucide-react\";\n\nexport function ThemeToggle() {\n  const { theme, toggleTheme } = useTheme();\n\n  return (\n    <Button\n      variant=\"ghost\"\n      size=\"icon\"\n      onClick={toggleTheme}\n      data-testid=\"button-theme-toggle\"\n    >\n      {theme === \"dark\" ? (\n        <Sun className=\"h-[1.2rem] w-[1.2rem]\" />\n      ) : (\n        <Moon className=\"h-[1.2rem] w-[1.2rem]\" />\n      )}\n    </Button>\n  );\n}\n","path":null,"size_bytes":533,"size_tokens":null},"client/src/components/ui/separator.tsx":{"content":"import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n","path":null,"size_bytes":756,"size_tokens":null},"client/src/pages/AdminLogin.tsx":{"content":"import { useState } from \"react\";\nimport { useLocation } from \"wouter\";\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { useI18n } from \"@/lib/i18n\";\nimport { useAdmin } from \"@/lib/store\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { Shield, Lock, User } from \"lucide-react\";\n\nexport default function AdminLogin() {\n  const { language, t } = useI18n();\n  const { setAdminAuthenticated } = useAdmin();\n  const { toast } = useToast();\n  const [, setLocation] = useLocation();\n\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setIsLoading(true);\n\n    try {\n      const response = await apiRequest(\"POST\", \"/api/admin/login\", { username, password });\n      const data = await response.json();\n      \n      if (data.success) {\n        setAdminAuthenticated(true);\n        toast({\n          title: language === \"th\" ? \"เข้าสู่ระบบสำเร็จ\" : \"Login successful\"\n        });\n        setLocation(\"/admin\");\n      } else {\n        toast({\n          title: language === \"th\" ? \"ข้อมูลไม่ถูกต้อง\" : \"Invalid credentials\",\n          variant: \"destructive\"\n        });\n      }\n    } catch (error) {\n      toast({\n        title: language === \"th\" ? \"ข้อมูลไม่ถูกต้อง\" : \"Invalid credentials\",\n        variant: \"destructive\"\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-full flex items-center justify-center p-4\">\n      <Card className=\"w-full max-w-md\">\n        <CardHeader className=\"text-center\">\n          <div className=\"mx-auto p-4 bg-primary/10 rounded-full w-fit mb-4\">\n            <Shield className=\"h-8 w-8 text-primary\" />\n          </div>\n          <CardTitle className=\"text-2xl\">{t(\"admin.login\")}</CardTitle>\n          <CardDescription>\n            {language === \"th\" \n              ? \"เข้าสู่ระบบด้วยบัญชี Admin\" \n              : \"Login with your Admin account\"}\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"username\">{language === \"th\" ? \"ชื่อผู้ใช้\" : \"Username\"}</Label>\n              <div className=\"relative\">\n                <User className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n                <Input\n                  id=\"username\"\n                  type=\"text\"\n                  value={username}\n                  onChange={(e) => setUsername(e.target.value)}\n                  placeholder=\"admin\"\n                  className=\"pl-10\"\n                  required\n                  data-testid=\"input-admin-username\"\n                />\n              </div>\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"password\">{language === \"th\" ? \"รหัสผ่าน\" : \"Password\"}</Label>\n              <div className=\"relative\">\n                <Lock className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n                <Input\n                  id=\"password\"\n                  type=\"password\"\n                  value={password}\n                  onChange={(e) => setPassword(e.target.value)}\n                  placeholder=\"••••••••\"\n                  className=\"pl-10\"\n                  required\n                  data-testid=\"input-admin-password\"\n                />\n              </div>\n            </div>\n            <Button\n              type=\"submit\"\n              className=\"w-full\"\n              disabled={isLoading}\n              data-testid=\"button-admin-login\"\n            >\n              {isLoading ? (language === \"th\" ? \"กำลังเข้าสู่ระบบ...\" : \"Logging in...\") : t(\"nav.login\")}\n            </Button>\n          </form>\n\n          <div className=\"mt-4 p-3 bg-muted rounded-lg text-sm text-muted-foreground\">\n            <p className=\"font-medium mb-1\">{language === \"th\" ? \"สำหรับทดสอบ:\" : \"For testing:\"}</p>\n            <p>Username: admin</p>\n            <p>Password: admin123</p>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","path":null,"size_bytes":4671,"size_tokens":null},"client/src/components/ui/switch.tsx":{"content":"import * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n","path":null,"size_bytes":1139,"size_tokens":null},"client/src/components/ui/toaster.tsx":{"content":"import { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n","path":null,"size_bytes":772,"size_tokens":null},"postcss.config.js":{"content":"export default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n","path":null,"size_bytes":80,"size_tokens":null},"client/src/components/ThemeProvider.tsx":{"content":"import { createContext, useContext, useEffect, useState } from \"react\";\n\ntype Theme = \"dark\" | \"light\";\n\ntype ThemeProviderContextType = {\n  theme: Theme;\n  setTheme: (theme: Theme) => void;\n  toggleTheme: () => void;\n};\n\nconst ThemeProviderContext = createContext<ThemeProviderContextType | undefined>(undefined);\n\ninterface ThemeProviderProps {\n  children: React.ReactNode;\n  defaultTheme?: Theme;\n  storageKey?: string;\n}\n\nexport function ThemeProvider({\n  children,\n  defaultTheme = \"dark\",\n  storageKey = \"qnq-theme\",\n}: ThemeProviderProps) {\n  const [theme, setTheme] = useState<Theme>(\n    () => (localStorage.getItem(storageKey) as Theme) || defaultTheme\n  );\n\n  useEffect(() => {\n    const root = window.document.documentElement;\n    root.classList.remove(\"light\", \"dark\");\n    root.classList.add(theme);\n  }, [theme]);\n\n  const value = {\n    theme,\n    setTheme: (theme: Theme) => {\n      localStorage.setItem(storageKey, theme);\n      setTheme(theme);\n    },\n    toggleTheme: () => {\n      const newTheme = theme === \"dark\" ? \"light\" : \"dark\";\n      localStorage.setItem(storageKey, newTheme);\n      setTheme(newTheme);\n    },\n  };\n\n  return (\n    <ThemeProviderContext.Provider value={value}>\n      {children}\n    </ThemeProviderContext.Provider>\n  );\n}\n\nexport function useTheme() {\n  const context = useContext(ThemeProviderContext);\n  if (context === undefined) {\n    throw new Error(\"useTheme must be used within a ThemeProvider\");\n  }\n  return context;\n}\n","path":null,"size_bytes":1472,"size_tokens":null},"vite.config.ts":{"content":"import { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\nimport path from \"path\";\nimport runtimeErrorOverlay from \"@replit/vite-plugin-runtime-error-modal\";\n\nexport default defineConfig({\n  plugins: [\n    react(),\n    runtimeErrorOverlay(),\n    ...(process.env.NODE_ENV !== \"production\" &&\n    process.env.REPL_ID !== undefined\n      ? [\n          await import(\"@replit/vite-plugin-cartographer\").then((m) =>\n            m.cartographer(),\n          ),\n          await import(\"@replit/vite-plugin-dev-banner\").then((m) =>\n            m.devBanner(),\n          ),\n        ]\n      : []),\n  ],\n  resolve: {\n    alias: {\n      \"@\": path.resolve(import.meta.dirname, \"client\", \"src\"),\n      \"@shared\": path.resolve(import.meta.dirname, \"shared\"),\n      \"@assets\": path.resolve(import.meta.dirname, \"attached_assets\"),\n    },\n  },\n  root: path.resolve(import.meta.dirname, \"client\"),\n  build: {\n    outDir: path.resolve(import.meta.dirname, \"dist/public\"),\n    emptyOutDir: true,\n  },\n  server: {\n    fs: {\n      strict: true,\n      deny: [\"**/.*\"],\n    },\n  },\n});\n","path":null,"size_bytes":1080,"size_tokens":null},"server/storage.ts":{"content":"import { db } from \"./db\";\nimport { eq, and, sql, inArray } from \"drizzle-orm\";\nimport {\n  users,\n  bets,\n  blockedNumbers,\n  transactions,\n  affiliates,\n  lotteryResults,\n  payoutSettings,\n  betLimits,\n  betLimitLotteryTypes,\n  betTypeSettings,\n  type User,\n  type InsertUser,\n  type Bet,\n  type InsertBet,\n  type BlockedNumber,\n  type InsertBlockedNumber,\n  type Transaction,\n  type InsertTransaction,\n  type Affiliate,\n  type InsertLotteryResult,\n  type StoredLotteryResult,\n  type PayoutSetting,\n  type InsertPayoutSetting,\n  type BetLimit,\n  type InsertBetLimit,\n  type BetLimitWithLotteryTypes,\n  type BetTypeSetting,\n  betTypes\n} from \"@shared/schema\";\n\nexport interface IStorage {\n  getUser(id: number): Promise<User | undefined>;\n  getUserByUsername(username: string): Promise<User | undefined>;\n  getUserByReferralCode(code: string): Promise<User | undefined>;\n  getAllUsers(): Promise<User[]>;\n  createUser(user: InsertUser): Promise<User>;\n  updateUserBalance(userId: number, amount: number): Promise<User | undefined>;\n  updateUserAffiliateEarnings(userId: number, amount: number): Promise<User | undefined>;\n  updateUserBlockStatus(userId: number, isBlocked: boolean): Promise<User | undefined>;\n\n  getBets(userId?: number): Promise<Bet[]>;\n  getBet(id: number): Promise<Bet | undefined>;\n  createBet(bet: InsertBet): Promise<Bet>;\n  createBetsWithBalanceDeduction(userId: number, betItems: InsertBet[], totalAmount: number): Promise<{ bets: Bet[], transaction: Transaction }>;\n  updateBetStatus(id: number, status: string): Promise<Bet | undefined>;\n\n  getBlockedNumbers(lotteryType?: string): Promise<BlockedNumber[]>;\n  createBlockedNumber(blocked: InsertBlockedNumber): Promise<BlockedNumber>;\n  updateBlockedNumber(id: number, isActive: boolean): Promise<BlockedNumber | undefined>;\n  deleteBlockedNumber(id: number): Promise<boolean>;\n\n  getTransactions(userId: number): Promise<Transaction[]>;\n  getAllTransactions(): Promise<Transaction[]>;\n  createTransaction(tx: InsertTransaction): Promise<Transaction>;\n  updateTransactionStatus(id: number, status: string): Promise<Transaction | undefined>;\n\n  getAffiliates(referrerId: number): Promise<Affiliate[]>;\n  getAllAffiliates(): Promise<Affiliate[]>;\n  createAffiliate(referrerId: number, referredId: number): Promise<Affiliate>;\n  updateAffiliateStats(referredId: number, betAmount: number): Promise<void>;\n\n  getLotteryResult(lotteryType: string, drawDate: string): Promise<StoredLotteryResult | undefined>;\n  getAllLotteryResults(): Promise<StoredLotteryResult[]>;\n  createLotteryResult(result: InsertLotteryResult): Promise<StoredLotteryResult>;\n  updateLotteryResultProcessed(id: number): Promise<StoredLotteryResult | undefined>;\n  getBetsByLotteryAndDate(lotteryType: string, drawDate: string): Promise<Bet[]>;\n\n  getPayoutSettings(): Promise<PayoutSetting[]>;\n  getPayoutRate(betType: string): Promise<number>;\n  updatePayoutRate(betType: string, rate: number): Promise<PayoutSetting>;\n  initializePayoutRates(): Promise<void>;\n\n  getBetLimits(): Promise<BetLimitWithLotteryTypes[]>;\n  getBetLimit(id: number): Promise<BetLimitWithLotteryTypes | undefined>;\n  createBetLimit(limit: InsertBetLimit, lotteryTypes: string[]): Promise<BetLimitWithLotteryTypes>;\n  updateBetLimit(id: number, limit: Partial<InsertBetLimit>, lotteryTypes?: string[]): Promise<BetLimitWithLotteryTypes | undefined>;\n  deleteBetLimit(id: number): Promise<boolean>;\n  getActiveBetLimitForNumber(number: string, lotteryType: string): Promise<BetLimitWithLotteryTypes | undefined>;\n  getTotalBetAmountForNumber(number: string, lotteryType: string, drawDate: string): Promise<number>;\n\n  getBetTypeSettings(): Promise<BetTypeSetting[]>;\n  getBetTypeSetting(betType: string): Promise<BetTypeSetting | undefined>;\n  updateBetTypeSetting(betType: string, isEnabled: boolean): Promise<BetTypeSetting>;\n  initializeBetTypeSettings(): Promise<void>;\n  isBetTypeEnabled(betType: string): Promise<boolean>;\n}\n\nexport class DatabaseStorage implements IStorage {\n  async getUser(id: number): Promise<User | undefined> {\n    const [user] = await db.select().from(users).where(eq(users.id, id));\n    return user || undefined;\n  }\n\n  async getUserByUsername(username: string): Promise<User | undefined> {\n    const [user] = await db.select().from(users).where(eq(users.username, username));\n    return user || undefined;\n  }\n\n  async getUserByReferralCode(code: string): Promise<User | undefined> {\n    const [user] = await db.select().from(users).where(eq(users.referralCode, code));\n    return user || undefined;\n  }\n\n  async getAllUsers(): Promise<User[]> {\n    return db.select().from(users);\n  }\n\n  async createUser(insertUser: InsertUser): Promise<User> {\n    const [user] = await db.insert(users).values(insertUser).returning();\n    return user;\n  }\n\n  async updateUserBalance(userId: number, amount: number): Promise<User | undefined> {\n    const [user] = await db\n      .update(users)\n      .set({ balance: sql`${users.balance} + ${amount}` })\n      .where(eq(users.id, userId))\n      .returning();\n    return user || undefined;\n  }\n\n  async updateUserAffiliateEarnings(userId: number, amount: number): Promise<User | undefined> {\n    const [user] = await db\n      .update(users)\n      .set({ affiliateEarnings: sql`${users.affiliateEarnings} + ${amount}` })\n      .where(eq(users.id, userId))\n      .returning();\n    return user || undefined;\n  }\n\n  async updateUserBlockStatus(userId: number, isBlocked: boolean): Promise<User | undefined> {\n    const [user] = await db\n      .update(users)\n      .set({ isBlocked })\n      .where(eq(users.id, userId))\n      .returning();\n    return user || undefined;\n  }\n\n  async getBets(userId?: number): Promise<Bet[]> {\n    if (userId) {\n      return db.select().from(bets).where(eq(bets.userId, userId));\n    }\n    return db.select().from(bets);\n  }\n\n  async getBet(id: number): Promise<Bet | undefined> {\n    const [bet] = await db.select().from(bets).where(eq(bets.id, id));\n    return bet || undefined;\n  }\n\n  async createBet(insertBet: InsertBet): Promise<Bet> {\n    const [bet] = await db.insert(bets).values(insertBet).returning();\n    return bet;\n  }\n\n  async createBetsWithBalanceDeduction(\n    userId: number, \n    betItems: InsertBet[], \n    totalAmount: number\n  ): Promise<{ bets: Bet[], transaction: Transaction }> {\n    return db.transaction(async (tx) => {\n      const [user] = await tx.select().from(users).where(eq(users.id, userId));\n      if (!user) {\n        throw new Error(\"User not found\");\n      }\n      if (user.balance < totalAmount) {\n        throw new Error(\"Insufficient balance\");\n      }\n\n      const createdBets: Bet[] = [];\n      for (const betItem of betItems) {\n        const [bet] = await tx.insert(bets).values(betItem).returning();\n        createdBets.push(bet);\n      }\n\n      await tx.update(users)\n        .set({ balance: sql`${users.balance} - ${totalAmount}` })\n        .where(eq(users.id, userId));\n\n      const [transaction] = await tx.insert(transactions).values({\n        userId,\n        type: \"bet\",\n        amount: -totalAmount,\n        status: \"approved\",\n        slipUrl: null,\n        reference: `BET${Date.now().toString(36).toUpperCase()}`,\n      }).returning();\n\n      return { bets: createdBets, transaction };\n    });\n  }\n\n  async updateBetStatus(id: number, status: string): Promise<Bet | undefined> {\n    const [bet] = await db\n      .update(bets)\n      .set({ status })\n      .where(eq(bets.id, id))\n      .returning();\n    return bet || undefined;\n  }\n\n  async getBlockedNumbers(lotteryType?: string): Promise<BlockedNumber[]> {\n    if (lotteryType) {\n      return db.select().from(blockedNumbers).where(eq(blockedNumbers.lotteryType, lotteryType));\n    }\n    return db.select().from(blockedNumbers);\n  }\n\n  async createBlockedNumber(insertBlocked: InsertBlockedNumber): Promise<BlockedNumber> {\n    const [blocked] = await db.insert(blockedNumbers).values(insertBlocked).returning();\n    return blocked;\n  }\n\n  async updateBlockedNumber(id: number, isActive: boolean): Promise<BlockedNumber | undefined> {\n    const [blocked] = await db\n      .update(blockedNumbers)\n      .set({ isActive })\n      .where(eq(blockedNumbers.id, id))\n      .returning();\n    return blocked || undefined;\n  }\n\n  async deleteBlockedNumber(id: number): Promise<boolean> {\n    const result = await db.delete(blockedNumbers).where(eq(blockedNumbers.id, id)).returning();\n    return result.length > 0;\n  }\n\n  async getTransactions(userId: number): Promise<Transaction[]> {\n    return db.select().from(transactions).where(eq(transactions.userId, userId));\n  }\n\n  async getAllTransactions(): Promise<Transaction[]> {\n    return db.select().from(transactions);\n  }\n\n  async createTransaction(insertTx: InsertTransaction): Promise<Transaction> {\n    const [tx] = await db.insert(transactions).values(insertTx).returning();\n    return tx;\n  }\n\n  async updateTransactionStatus(id: number, status: string): Promise<Transaction | undefined> {\n    const [tx] = await db\n      .update(transactions)\n      .set({ status })\n      .where(eq(transactions.id, id))\n      .returning();\n    return tx || undefined;\n  }\n\n  async getAffiliates(referrerId: number): Promise<Affiliate[]> {\n    return db.select().from(affiliates).where(eq(affiliates.referrerId, referrerId));\n  }\n\n  async getAllAffiliates(): Promise<Affiliate[]> {\n    return db.select().from(affiliates);\n  }\n\n  async createAffiliate(referrerId: number, referredId: number): Promise<Affiliate> {\n    const [affiliate] = await db\n      .insert(affiliates)\n      .values({ referrerId, referredId, totalBetAmount: 0, totalDepositAmount: 0, commission: 0 })\n      .returning();\n    return affiliate;\n  }\n\n  async updateAffiliateStats(referredId: number, betAmount: number): Promise<void> {\n    await db\n      .update(affiliates)\n      .set({\n        totalBetAmount: sql`${affiliates.totalBetAmount} + ${betAmount}`\n      })\n      .where(eq(affiliates.referredId, referredId));\n  }\n  \n  async updateAffiliateDepositStats(referredId: number, depositAmount: number): Promise<{referrerId: number; commission: number} | null> {\n    const affiliate = await db.select().from(affiliates).where(eq(affiliates.referredId, referredId)).limit(1);\n    if (affiliate.length === 0) return null;\n    \n    const commission = Math.floor(depositAmount * 0.05);\n    await db\n      .update(affiliates)\n      .set({\n        totalDepositAmount: sql`${affiliates.totalDepositAmount} + ${depositAmount}`,\n        commission: sql`${affiliates.commission} + ${commission}`\n      })\n      .where(eq(affiliates.referredId, referredId));\n    \n    return { referrerId: affiliate[0].referrerId, commission };\n  }\n\n  async getLotteryResult(lotteryType: string, drawDate: string): Promise<StoredLotteryResult | undefined> {\n    const [result] = await db\n      .select()\n      .from(lotteryResults)\n      .where(and(eq(lotteryResults.lotteryType, lotteryType), eq(lotteryResults.drawDate, drawDate)));\n    return result || undefined;\n  }\n\n  async getAllLotteryResults(): Promise<StoredLotteryResult[]> {\n    return db.select().from(lotteryResults);\n  }\n\n  async createLotteryResult(result: InsertLotteryResult): Promise<StoredLotteryResult> {\n    const [lotteryResult] = await db.insert(lotteryResults).values(result).returning();\n    return lotteryResult;\n  }\n\n  async updateLotteryResultProcessed(id: number): Promise<StoredLotteryResult | undefined> {\n    const [result] = await db\n      .update(lotteryResults)\n      .set({ isProcessed: true })\n      .where(eq(lotteryResults.id, id))\n      .returning();\n    return result || undefined;\n  }\n\n  async getBetsByLotteryAndDate(lotteryType: string, drawDate: string): Promise<Bet[]> {\n    return db\n      .select()\n      .from(bets)\n      .where(and(eq(bets.lotteryType, lotteryType), eq(bets.drawDate, drawDate), eq(bets.status, \"pending\")));\n  }\n\n  async getPayoutSettings(): Promise<PayoutSetting[]> {\n    return db.select().from(payoutSettings);\n  }\n\n  async getPayoutRate(betType: string): Promise<number> {\n    const validBetTypes = [\n      \"TWO_TOP\", \"TWO_BOTTOM\", \"THREE_TOP\", \"THREE_TOD\", \n      \"FOUR_TOP\", \"FIVE_TOP\", \"RUN_TOP\", \"RUN_BOTTOM\", \"REVERSE\"\n    ];\n    \n    if (!validBetTypes.includes(betType)) {\n      throw new Error(`Invalid bet type: ${betType}`);\n    }\n    \n    const [setting] = await db.select().from(payoutSettings).where(eq(payoutSettings.betType, betType));\n    if (setting) {\n      return setting.rate;\n    }\n    \n    throw new Error(`Payout rate not found for bet type: ${betType}. Please ensure payout rates are initialized.`);\n  }\n\n  async updatePayoutRate(betType: string, rate: number): Promise<PayoutSetting> {\n    const existing = await db.select().from(payoutSettings).where(eq(payoutSettings.betType, betType));\n    if (existing.length > 0) {\n      const [updated] = await db\n        .update(payoutSettings)\n        .set({ rate, updatedAt: new Date() })\n        .where(eq(payoutSettings.betType, betType))\n        .returning();\n      return updated;\n    }\n    const [created] = await db\n      .insert(payoutSettings)\n      .values({ betType, rate })\n      .returning();\n    return created;\n  }\n\n  async initializePayoutRates(): Promise<void> {\n    // อัตราจ่าย 9 ประเภทสำหรับหวยไทย\n    const defaultRates: Record<string, number> = {\n      TWO_TOP: 60,      // 2 ตัวบน x60\n      TWO_BOTTOM: 60,   // 2 ตัวล่าง x60\n      THREE_TOP: 500,   // 3 ตัวตรง x500\n      THREE_TOD: 90,    // 3 ตัวโต๊ด x90\n      FOUR_TOP: 900,    // 4 ตัวบน x900\n      FIVE_TOP: 2000,   // 5 ตัวบน x2000\n      RUN_TOP: 3,       // วิ่งบน x3\n      RUN_BOTTOM: 4,    // วิ่งล่าง x4\n      REVERSE: 94       // เลขกลับ x94\n    };\n\n    // ลบอัตราจ่ายเก่าที่ไม่ใช้แล้ว\n    const oldBetTypes = [\"THREE_TOOD\", \"THREE_FRONT\", \"THREE_BOTTOM\", \"THREE_REVERSE\"];\n    for (const oldType of oldBetTypes) {\n      await db.delete(payoutSettings).where(eq(payoutSettings.betType, oldType));\n    }\n\n    // เพิ่ม/อัปเดตอัตราจ่ายใหม่\n    for (const [betType, rate] of Object.entries(defaultRates)) {\n      const existing = await db.select().from(payoutSettings).where(eq(payoutSettings.betType, betType));\n      if (existing.length === 0) {\n        await db.insert(payoutSettings).values({ betType, rate });\n      }\n    }\n  }\n\n  async getBetLimits(): Promise<BetLimitWithLotteryTypes[]> {\n    const limits = await db.select().from(betLimits);\n    const result: BetLimitWithLotteryTypes[] = [];\n    \n    for (const limit of limits) {\n      const lotteryTypesRows = await db\n        .select()\n        .from(betLimitLotteryTypes)\n        .where(eq(betLimitLotteryTypes.betLimitId, limit.id));\n      \n      result.push({\n        ...limit,\n        lotteryTypes: lotteryTypesRows.map(lt => lt.lotteryType)\n      });\n    }\n    \n    return result;\n  }\n\n  async getBetLimit(id: number): Promise<BetLimitWithLotteryTypes | undefined> {\n    const [limit] = await db.select().from(betLimits).where(eq(betLimits.id, id));\n    if (!limit) return undefined;\n    \n    const lotteryTypesRows = await db\n      .select()\n      .from(betLimitLotteryTypes)\n      .where(eq(betLimitLotteryTypes.betLimitId, id));\n    \n    return {\n      ...limit,\n      lotteryTypes: lotteryTypesRows.map(lt => lt.lotteryType)\n    };\n  }\n\n  async createBetLimit(limit: InsertBetLimit, lotteryTypes: string[]): Promise<BetLimitWithLotteryTypes> {\n    return db.transaction(async (tx) => {\n      const [created] = await tx.insert(betLimits).values(limit).returning();\n      \n      if (lotteryTypes.length > 0) {\n        await tx.insert(betLimitLotteryTypes).values(\n          lotteryTypes.map(lt => ({\n            betLimitId: created.id,\n            lotteryType: lt\n          }))\n        );\n      }\n      \n      return {\n        ...created,\n        lotteryTypes\n      };\n    });\n  }\n\n  async updateBetLimit(\n    id: number, \n    limitUpdate: Partial<InsertBetLimit>, \n    lotteryTypes?: string[]\n  ): Promise<BetLimitWithLotteryTypes | undefined> {\n    return db.transaction(async (tx) => {\n      if (Object.keys(limitUpdate).length > 0) {\n        await tx.update(betLimits).set(limitUpdate).where(eq(betLimits.id, id));\n      }\n      \n      if (lotteryTypes !== undefined) {\n        await tx.delete(betLimitLotteryTypes).where(eq(betLimitLotteryTypes.betLimitId, id));\n        \n        if (lotteryTypes.length > 0) {\n          await tx.insert(betLimitLotteryTypes).values(\n            lotteryTypes.map(lt => ({\n              betLimitId: id,\n              lotteryType: lt\n            }))\n          );\n        }\n      }\n      \n      const [updated] = await tx.select().from(betLimits).where(eq(betLimits.id, id));\n      if (!updated) return undefined;\n      \n      const lotteryTypesRows = await tx\n        .select()\n        .from(betLimitLotteryTypes)\n        .where(eq(betLimitLotteryTypes.betLimitId, id));\n      \n      return {\n        ...updated,\n        lotteryTypes: lotteryTypesRows.map(lt => lt.lotteryType)\n      };\n    });\n  }\n\n  async deleteBetLimit(id: number): Promise<boolean> {\n    const result = await db.delete(betLimits).where(eq(betLimits.id, id)).returning();\n    return result.length > 0;\n  }\n\n  async getActiveBetLimitForNumber(number: string, lotteryType: string): Promise<BetLimitWithLotteryTypes | undefined> {\n    const limits = await db\n      .select()\n      .from(betLimits)\n      .where(and(eq(betLimits.number, number), eq(betLimits.isActive, true)));\n    \n    for (const limit of limits) {\n      const lotteryTypesRows = await db\n        .select()\n        .from(betLimitLotteryTypes)\n        .where(eq(betLimitLotteryTypes.betLimitId, limit.id));\n      \n      const associatedTypes = lotteryTypesRows.map(lt => lt.lotteryType);\n      \n      if (associatedTypes.length === 0 || associatedTypes.includes(lotteryType)) {\n        return {\n          ...limit,\n          lotteryTypes: associatedTypes\n        };\n      }\n    }\n    \n    return undefined;\n  }\n\n  async getTotalBetAmountForNumber(number: string, lotteryType: string, drawDate: string): Promise<number> {\n    const result = await db\n      .select({ total: sql<number>`COALESCE(SUM(${bets.amount}), 0)` })\n      .from(bets)\n      .where(\n        and(\n          eq(bets.numbers, number),\n          eq(bets.lotteryType, lotteryType),\n          eq(bets.drawDate, drawDate),\n          inArray(bets.status, [\"pending\", \"won\", \"lost\"])\n        )\n      );\n    \n    return result[0]?.total || 0;\n  }\n\n  async getBetTypeSettings(): Promise<BetTypeSetting[]> {\n    return db.select().from(betTypeSettings);\n  }\n\n  async getBetTypeSetting(betType: string): Promise<BetTypeSetting | undefined> {\n    const [setting] = await db\n      .select()\n      .from(betTypeSettings)\n      .where(eq(betTypeSettings.betType, betType));\n    return setting || undefined;\n  }\n\n  async updateBetTypeSetting(betType: string, isEnabled: boolean): Promise<BetTypeSetting> {\n    const existing = await this.getBetTypeSetting(betType);\n    \n    if (existing) {\n      const [updated] = await db\n        .update(betTypeSettings)\n        .set({ isEnabled, updatedAt: new Date() })\n        .where(eq(betTypeSettings.betType, betType))\n        .returning();\n      return updated;\n    } else {\n      const [created] = await db\n        .insert(betTypeSettings)\n        .values({ betType, isEnabled })\n        .returning();\n      return created;\n    }\n  }\n\n  async initializeBetTypeSettings(): Promise<void> {\n    for (const betType of betTypes) {\n      const existing = await this.getBetTypeSetting(betType);\n      if (!existing) {\n        await db.insert(betTypeSettings).values({ betType, isEnabled: true });\n      }\n    }\n  }\n\n  async isBetTypeEnabled(betType: string): Promise<boolean> {\n    const setting = await this.getBetTypeSetting(betType);\n    return setting?.isEnabled ?? true;\n  }\n}\n\nexport const storage = new DatabaseStorage();\n","path":null,"size_bytes":19995,"size_tokens":null},"script/build.ts":{"content":"import { build as esbuild } from \"esbuild\";\nimport { build as viteBuild } from \"vite\";\nimport { rm, readFile } from \"fs/promises\";\n\n// server deps to bundle to reduce openat(2) syscalls\n// which helps cold start times\nconst allowlist = [\n  \"@google/generative-ai\",\n  \"@neondatabase/serverless\",\n  \"axios\",\n  \"connect-pg-simple\",\n  \"cors\",\n  \"date-fns\",\n  \"drizzle-orm\",\n  \"drizzle-zod\",\n  \"express\",\n  \"express-rate-limit\",\n  \"express-session\",\n  \"jsonwebtoken\",\n  \"memorystore\",\n  \"multer\",\n  \"nanoid\",\n  \"nodemailer\",\n  \"openai\",\n  \"passport\",\n  \"passport-local\",\n  \"stripe\",\n  \"uuid\",\n  \"ws\",\n  \"xlsx\",\n  \"zod\",\n  \"zod-validation-error\",\n];\n\nasync function buildAll() {\n  await rm(\"dist\", { recursive: true, force: true });\n\n  console.log(\"building client...\");\n  await viteBuild();\n\n  console.log(\"building server...\");\n  const pkg = JSON.parse(await readFile(\"package.json\", \"utf-8\"));\n  const allDeps = [\n    ...Object.keys(pkg.dependencies || {}),\n    ...Object.keys(pkg.devDependencies || {}),\n  ];\n  const externals = allDeps.filter((dep) => !allowlist.includes(dep));\n\n  await esbuild({\n    entryPoints: [\"server/index.ts\"],\n    platform: \"node\",\n    bundle: true,\n    format: \"cjs\",\n    outfile: \"dist/index.cjs\",\n    define: {\n      \"process.env.NODE_ENV\": '\"production\"',\n    },\n    minify: true,\n    external: externals,\n    logLevel: \"info\",\n  });\n}\n\nbuildAll().catch((err) => {\n  console.error(err);\n  process.exit(1);\n});\n","path":null,"size_bytes":1439,"size_tokens":null},"client/src/components/ui/scroll-area.tsx":{"content":"import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n","path":null,"size_bytes":1642,"size_tokens":null},"client/src/pages/Affiliate.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Input } from \"@/components/ui/input\";\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { useI18n } from \"@/lib/i18n\";\nimport { useUser } from \"@/lib/store\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport {\n  Users,\n  Copy,\n  Check,\n  Gift,\n  Wallet,\n  TrendingUp,\n  Share2,\n  Link,\n  Crown,\n  History\n} from \"lucide-react\";\nimport type { User, Transaction } from \"@shared/schema\";\n\nexport default function Affiliate() {\n  const { language, t } = useI18n();\n  const { isAuthenticated, user } = useUser();\n  const { toast } = useToast();\n  const [copied, setCopied] = useState(false);\n\n  const { data: userData, isLoading: userLoading } = useQuery<User>({\n    queryKey: [`/api/users/${user?.id}`],\n    enabled: isAuthenticated && !!user?.id,\n  });\n\n  const { data: transactions = [], isLoading: txLoading } = useQuery<Transaction[]>({\n    queryKey: [`/api/transactions/${user?.id}`],\n    enabled: isAuthenticated && !!user?.id,\n  });\n\n  const affiliateEarnings = userData?.affiliateEarnings || 0;\n  const referralCode = userData?.referralCode || user?.referralCode || \"QNQ12345\";\n  const referralLink = `${window.location.origin}/register?ref=${referralCode}`;\n  \n  const affiliateTxs = transactions.filter(tx => tx.type === \"affiliate_commission\");\n  const paidEarnings = affiliateTxs.filter(tx => tx.status === \"approved\").reduce((sum, tx) => sum + tx.amount, 0);\n  const pendingEarnings = affiliateTxs.filter(tx => tx.status === \"pending\").reduce((sum, tx) => sum + tx.amount, 0);\n\n  const copyToClipboard = (text: string) => {\n    navigator.clipboard.writeText(text);\n    setCopied(true);\n    toast({\n      title: t(\"affiliate.copied\"),\n    });\n    setTimeout(() => setCopied(false), 2000);\n  };\n\n  if (!isAuthenticated) {\n    return (\n      <div className=\"min-h-full flex items-center justify-center p-4\">\n        <Card className=\"w-full max-w-md text-center\">\n          <CardHeader>\n            <div className=\"mx-auto p-4 bg-primary/10 rounded-full w-fit mb-4\">\n              <Users className=\"h-8 w-8 text-primary\" />\n            </div>\n            <CardTitle>{t(\"affiliate.title\")}</CardTitle>\n            <CardDescription>\n              {language === \"th\" \n                ? \"เข้าสู่ระบบเพื่อเริ่มหารายได้จากการแนะนำเพื่อน\" \n                : \"Login to start earning from referrals\"}\n            </CardDescription>\n          </CardHeader>\n          <CardContent>\n            <Button className=\"w-full\" asChild>\n              <a href=\"/login\">{t(\"nav.login\")}</a>\n            </Button>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  const isLoading = userLoading || txLoading;\n\n  return (\n    <div className=\"min-h-full\">\n      <div className=\"bg-gradient-to-br from-primary/10 via-background to-primary/5 p-4 md:p-6 border-b border-border\">\n        <div className=\"flex items-center gap-3\">\n          <div className=\"p-3 bg-primary/10 rounded-xl\">\n            <Users className=\"h-6 w-6 text-primary\" />\n          </div>\n          <div>\n            <h1 className=\"text-xl md:text-2xl font-bold\">{t(\"affiliate.title\")}</h1>\n            <p className=\"text-sm text-muted-foreground flex items-center gap-1\">\n              <Gift className=\"h-4 w-4\" />\n              {t(\"affiliate.commission\")}\n            </p>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"p-4 md:p-6 space-y-6\">\n        <Card className=\"bg-gradient-to-br from-primary/10 via-card to-primary/5 border-primary/20 overflow-hidden\">\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-lg flex items-center gap-2\">\n              <Link className=\"h-5 w-5\" />\n              {t(\"affiliate.yourCode\")}\n            </CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <div className=\"flex items-center gap-2\">\n              <div className=\"flex-1 bg-background/80 rounded-lg p-3 font-mono text-lg font-bold text-center\">\n                {isLoading ? <Skeleton className=\"h-6 w-24 mx-auto\" /> : referralCode}\n              </div>\n              <Button\n                size=\"icon\"\n                onClick={() => copyToClipboard(referralCode)}\n                data-testid=\"button-copy-code\"\n              >\n                {copied ? <Check className=\"h-4 w-4\" /> : <Copy className=\"h-4 w-4\" />}\n              </Button>\n            </div>\n            \n            <div className=\"space-y-2\">\n              <p className=\"text-sm text-muted-foreground\">{t(\"affiliate.copyLink\")}</p>\n              <div className=\"flex gap-2\">\n                <Input\n                  value={referralLink}\n                  readOnly\n                  className=\"text-xs font-mono\"\n                  data-testid=\"input-referral-link\"\n                />\n                <Button\n                  variant=\"secondary\"\n                  onClick={() => copyToClipboard(referralLink)}\n                  className=\"gap-2\"\n                  data-testid=\"button-copy-link\"\n                >\n                  <Share2 className=\"h-4 w-4\" />\n                  {language === \"th\" ? \"แชร์\" : \"Share\"}\n                </Button>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        <div className=\"grid gap-4 sm:grid-cols-2 lg:grid-cols-4\">\n          <Card>\n            <CardContent className=\"p-4\">\n              <div className=\"flex items-center gap-3\">\n                <div className=\"p-2 bg-blue-500/10 rounded-lg\">\n                  <Users className=\"h-5 w-5 text-blue-500\" />\n                </div>\n                <div>\n                  <p className=\"text-sm text-muted-foreground\">{t(\"affiliate.totalReferrals\")}</p>\n                  {isLoading ? (\n                    <Skeleton className=\"h-8 w-12\" />\n                  ) : (\n                    <p className=\"text-2xl font-bold\">0</p>\n                  )}\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardContent className=\"p-4\">\n              <div className=\"flex items-center gap-3\">\n                <div className=\"p-2 bg-green-500/10 rounded-lg\">\n                  <TrendingUp className=\"h-5 w-5 text-green-500\" />\n                </div>\n                <div>\n                  <p className=\"text-sm text-muted-foreground\">{t(\"affiliate.totalEarnings\")}</p>\n                  {isLoading ? (\n                    <Skeleton className=\"h-8 w-20\" />\n                  ) : (\n                    <p className=\"text-2xl font-bold text-green-500\">\n                      {affiliateEarnings.toLocaleString()}\n                    </p>\n                  )}\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardContent className=\"p-4\">\n              <div className=\"flex items-center gap-3\">\n                <div className=\"p-2 bg-amber-500/10 rounded-lg\">\n                  <Wallet className=\"h-5 w-5 text-amber-500\" />\n                </div>\n                <div>\n                  <p className=\"text-sm text-muted-foreground\">{t(\"affiliate.pendingEarnings\")}</p>\n                  {isLoading ? (\n                    <Skeleton className=\"h-8 w-20\" />\n                  ) : (\n                    <p className=\"text-2xl font-bold text-amber-500\">\n                      {pendingEarnings.toLocaleString()}\n                    </p>\n                  )}\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardContent className=\"p-4\">\n              <div className=\"flex items-center gap-3\">\n                <div className=\"p-2 bg-primary/10 rounded-lg\">\n                  <Crown className=\"h-5 w-5 text-primary\" />\n                </div>\n                <div>\n                  <p className=\"text-sm text-muted-foreground\">\n                    {language === \"th\" ? \"อัตราคอมมิชชั่น\" : \"Commission Rate\"}\n                  </p>\n                  <p className=\"text-2xl font-bold text-primary\">20%</p>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"text-lg flex items-center gap-2\">\n              <History className=\"h-5 w-5\" />\n              {t(\"affiliate.history\")}\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            {isLoading ? (\n              <div className=\"space-y-3\">\n                {[1, 2, 3].map((i) => (\n                  <Skeleton key={i} className=\"h-12 w-full\" />\n                ))}\n              </div>\n            ) : affiliateTxs.length === 0 ? (\n              <div className=\"text-center py-8 text-muted-foreground\">\n                <Gift className=\"h-12 w-12 mx-auto mb-4 opacity-50\" />\n                <p>{language === \"th\" ? \"ยังไม่มีรายได้จากการแนะนำ\" : \"No affiliate earnings yet\"}</p>\n                <p className=\"text-sm mt-2\">\n                  {language === \"th\" \n                    ? \"แชร์ลิงก์ของคุณเพื่อเริ่มรับค่าคอมมิชชั่น 20%\" \n                    : \"Share your link to start earning 20% commission\"}\n                </p>\n              </div>\n            ) : (\n              <Table>\n                <TableHeader>\n                  <TableRow>\n                    <TableHead>{language === \"th\" ? \"รหัสอ้างอิง\" : \"Reference\"}</TableHead>\n                    <TableHead className=\"text-right\">{language === \"th\" ? \"คอมมิชชั่น\" : \"Commission\"}</TableHead>\n                    <TableHead>{language === \"th\" ? \"วันที่\" : \"Date\"}</TableHead>\n                    <TableHead>{language === \"th\" ? \"สถานะ\" : \"Status\"}</TableHead>\n                  </TableRow>\n                </TableHeader>\n                <TableBody>\n                  {affiliateTxs.map((tx) => (\n                    <TableRow key={tx.id}>\n                      <TableCell className=\"font-mono\">{tx.reference}</TableCell>\n                      <TableCell className=\"text-right font-semibold text-primary\">\n                        +{tx.amount.toLocaleString()}\n                      </TableCell>\n                      <TableCell>{new Date(tx.createdAt).toLocaleDateString()}</TableCell>\n                      <TableCell>\n                        <Badge variant={tx.status === \"approved\" ? \"secondary\" : \"outline\"}>\n                          {tx.status === \"approved\" \n                            ? (language === \"th\" ? \"จ่ายแล้ว\" : \"Paid\")\n                            : (language === \"th\" ? \"รอจ่าย\" : \"Pending\")}\n                        </Badge>\n                      </TableCell>\n                    </TableRow>\n                  ))}\n                </TableBody>\n              </Table>\n            )}\n          </CardContent>\n        </Card>\n\n        {pendingEarnings > 0 && (\n          <div className=\"flex justify-end\">\n            <Button className=\"gap-2\" data-testid=\"button-withdraw-affiliate\">\n              <Wallet className=\"h-4 w-4\" />\n              {t(\"affiliate.withdraw\")} ({pendingEarnings.toLocaleString()} {t(\"common.baht\")})\n            </Button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":11772,"size_tokens":null},"client/src/components/ui/sidebar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, VariantProps } from \"class-variance-authority\"\nimport { PanelLeftIcon } from \"lucide-react\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContextProps = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nfunction SidebarProvider({\n  defaultOpen = true,\n  open: openProp,\n  onOpenChange: setOpenProp,\n  className,\n  style,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  defaultOpen?: boolean\n  open?: boolean\n  onOpenChange?: (open: boolean) => void\n}) {\n  const isMobile = useIsMobile()\n  const [openMobile, setOpenMobile] = React.useState(false)\n\n  // This is the internal state of the sidebar.\n  // We use openProp and setOpenProp for control from outside the component.\n  const [_open, _setOpen] = React.useState(defaultOpen)\n  const open = openProp ?? _open\n  const setOpen = React.useCallback(\n    (value: boolean | ((value: boolean) => boolean)) => {\n      const openState = typeof value === \"function\" ? value(open) : value\n      if (setOpenProp) {\n        setOpenProp(openState)\n      } else {\n        _setOpen(openState)\n      }\n\n      // This sets the cookie to keep the sidebar state.\n      document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n    },\n    [setOpenProp, open]\n  )\n\n  // Helper to toggle the sidebar.\n  const toggleSidebar = React.useCallback(() => {\n    return isMobile ? setOpenMobile((open) => !open) : setOpen((open) => !open)\n  }, [isMobile, setOpen, setOpenMobile])\n\n  // Adds a keyboard shortcut to toggle the sidebar.\n  React.useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (\n        event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n        (event.metaKey || event.ctrlKey)\n      ) {\n        event.preventDefault()\n        toggleSidebar()\n      }\n    }\n\n    window.addEventListener(\"keydown\", handleKeyDown)\n    return () => window.removeEventListener(\"keydown\", handleKeyDown)\n  }, [toggleSidebar])\n\n  // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n  // This makes it easier to style the sidebar with Tailwind classes.\n  const state = open ? \"expanded\" : \"collapsed\"\n\n  const contextValue = React.useMemo<SidebarContextProps>(\n    () => ({\n      state,\n      open,\n      setOpen,\n      isMobile,\n      openMobile,\n      setOpenMobile,\n      toggleSidebar,\n    }),\n    [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n  )\n\n  return (\n    <SidebarContext.Provider value={contextValue}>\n      <TooltipProvider delayDuration={0}>\n        <div\n          data-slot=\"sidebar-wrapper\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH,\n              \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n              ...style,\n            } as React.CSSProperties\n          }\n          className={cn(\n            \"group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full\",\n            className\n          )}\n          {...props}\n        >\n          {children}\n        </div>\n      </TooltipProvider>\n    </SidebarContext.Provider>\n  )\n}\n\nfunction Sidebar({\n  side = \"left\",\n  variant = \"sidebar\",\n  collapsible = \"offcanvas\",\n  className,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  side?: \"left\" | \"right\"\n  variant?: \"sidebar\" | \"floating\" | \"inset\"\n  collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n}) {\n  const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n  if (collapsible === \"none\") {\n    return (\n      <div\n        data-slot=\"sidebar\"\n        className={cn(\n          \"bg-sidebar text-sidebar-foreground flex h-full w-[var(--sidebar-width)] flex-col\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n      </div>\n    )\n  }\n\n  if (isMobile) {\n    return (\n      <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n        <SheetContent\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar\"\n          data-mobile=\"true\"\n          className=\"bg-sidebar text-sidebar-foreground w-[var(--sidebar-width)] p-0 [&>button]:hidden\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n            } as React.CSSProperties\n          }\n          side={side}\n        >\n          <SheetHeader className=\"sr-only\">\n            <SheetTitle>Sidebar</SheetTitle>\n            <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n          </SheetHeader>\n          <div className=\"flex h-full w-full flex-col\">{children}</div>\n        </SheetContent>\n      </Sheet>\n    )\n  }\n\n  return (\n    <div\n      className=\"group peer text-sidebar-foreground hidden md:block\"\n      data-state={state}\n      data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n      data-variant={variant}\n      data-side={side}\n      data-slot=\"sidebar\"\n    >\n      {/* This is what handles the sidebar gap on desktop */}\n      <div\n        data-slot=\"sidebar-gap\"\n        className={cn(\n          \"relative w-[var(--sidebar-width)] bg-transparent transition-[width] duration-200 ease-linear\",\n          \"group-data-[collapsible=offcanvas]:w-0\",\n          \"group-data-[side=right]:rotate-180\",\n          variant === \"floating\" || variant === \"inset\"\n            ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4))]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)]\"\n        )}\n      />\n      <div\n        data-slot=\"sidebar-container\"\n        className={cn(\n          \"fixed inset-y-0 z-10 hidden h-svh w-[var(--sidebar-width)] transition-[left,right,width] duration-200 ease-linear md:flex\",\n          side === \"left\"\n            ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n            : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n          // Adjust the padding for floating and inset variants.\n          variant === \"floating\" || variant === \"inset\"\n            ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4)+2px)]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n          className\n        )}\n        {...props}\n      >\n        <div\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar-inner\"\n          className=\"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm\"\n        >\n          {children}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nfunction SidebarTrigger({\n  className,\n  onClick,\n  ...props\n}: React.ComponentProps<typeof Button>) {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      data-sidebar=\"trigger\"\n      data-slot=\"sidebar-trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"h-7 w-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeftIcon />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n}\n\nfunction SidebarRail({ className, ...props }: React.ComponentProps<\"button\">) {\n  const { toggleSidebar } = useSidebar()\n\n  // Note: Tailwind v3.4 doesn't support \"in-\" selectors. So the rail won't work perfectly.\n  return (\n    <button\n      data-sidebar=\"rail\"\n      data-slot=\"sidebar-rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"hover:after:bg-sidebar-border absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear group-data-[side=left]:-right-4 group-data-[side=right]:left-0 after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] sm:flex\",\n        \"in-data-[side=left]:cursor-w-resize in-data-[side=right]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"hover:group-data-[collapsible=offcanvas]:bg-sidebar group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInset({ className, ...props }: React.ComponentProps<\"main\">) {\n  return (\n    <main\n      data-slot=\"sidebar-inset\"\n      className={cn(\n        \"bg-background relative flex w-full flex-1 flex-col\",\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInput({\n  className,\n  ...props\n}: React.ComponentProps<typeof Input>) {\n  return (\n    <Input\n      data-slot=\"sidebar-input\"\n      data-sidebar=\"input\"\n      className={cn(\"bg-background h-8 w-full shadow-none\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-header\"\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-footer\"\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof Separator>) {\n  return (\n    <Separator\n      data-slot=\"sidebar-separator\"\n      data-sidebar=\"separator\"\n      className={cn(\"bg-sidebar-border mx-2 w-auto\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-content\"\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group\"\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupLabel({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"div\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-label\"\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:h-4 [&>svg]:w-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupAction({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-action\"\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground absolute top-3.5 right-3 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupContent({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group-content\"\n      data-sidebar=\"group-content\"\n      className={cn(\"w-full text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenu({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu\"\n      data-sidebar=\"menu\"\n      className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuItem({ className, ...props }: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-item\"\n      data-sidebar=\"menu-item\"\n      className={cn(\"group/menu-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:w-8! group-data-[collapsible=icon]:h-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:p-0!\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction SidebarMenuButton({\n  asChild = false,\n  isActive = false,\n  variant = \"default\",\n  size = \"default\",\n  tooltip,\n  className,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  isActive?: boolean\n  tooltip?: string | React.ComponentProps<typeof TooltipContent>\n} & VariantProps<typeof sidebarMenuButtonVariants>) {\n  const Comp = asChild ? Slot : \"button\"\n  const { isMobile, state } = useSidebar()\n\n  const button = (\n    <Comp\n      data-slot=\"sidebar-menu-button\"\n      data-sidebar=\"menu-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n      {...props}\n    />\n  )\n\n  if (!tooltip) {\n    return button\n  }\n\n  if (typeof tooltip === \"string\") {\n    tooltip = {\n      children: tooltip,\n    }\n  }\n\n  return (\n    <Tooltip>\n      <TooltipTrigger asChild>{button}</TooltipTrigger>\n      <TooltipContent\n        side=\"right\"\n        align=\"center\"\n        hidden={state !== \"collapsed\" || isMobile}\n        {...tooltip}\n      />\n    </Tooltip>\n  )\n}\n\nfunction SidebarMenuAction({\n  className,\n  asChild = false,\n  showOnHover = false,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  showOnHover?: boolean\n}) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-action\"\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground peer-hover/menu-button:text-sidebar-accent-foreground absolute top-1.5 right-1 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"peer-data-[active=true]/menu-button:text-sidebar-accent-foreground group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuBadge({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-menu-badge\"\n      data-sidebar=\"menu-badge\"\n      className={cn(\n        \"text-sidebar-foreground pointer-events-none absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums select-none\",\n        \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSkeleton({\n  className,\n  showIcon = false,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  showIcon?: boolean\n}) {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      data-slot=\"sidebar-menu-skeleton\"\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-[var(--skeleton-width)] flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n}\n\nfunction SidebarMenuSub({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu-sub\"\n      data-sidebar=\"menu-sub\"\n      className={cn(\n        \"border-sidebar-border mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l px-2.5 py-0.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubItem({\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-sub-item\"\n      data-sidebar=\"menu-sub-item\"\n      className={cn(\"group/menu-sub-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubButton({\n  asChild = false,\n  size = \"md\",\n  isActive = false,\n  className,\n  ...props\n}: React.ComponentProps<\"a\"> & {\n  asChild?: boolean\n  size?: \"sm\" | \"md\"\n  isActive?: boolean\n}) {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-sub-button\"\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground active:bg-sidebar-accent active:text-sidebar-accent-foreground [&>svg]:text-sidebar-accent-foreground flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 outline outline-2 outline-transparent outline-offset-2 focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","path":null,"size_bytes":21846,"size_tokens":null},"client/src/components/ui/aspect-ratio.tsx":{"content":"import * as AspectRatioPrimitive from \"@radix-ui/react-aspect-ratio\"\n\nconst AspectRatio = AspectRatioPrimitive.Root\n\nexport { AspectRatio }\n","path":null,"size_bytes":140,"size_tokens":null},"client/src/pages/Home.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { LotteryTypeCard } from \"@/components/LotteryTypeCard\";\nimport { BetTypeSelector } from \"@/components/BetTypeSelector\";\nimport { NumberInput } from \"@/components/NumberInput\";\nimport { AmountInput } from \"@/components/AmountInput\";\nimport { BlockedNumbersDisplay } from \"@/components/BlockedNumbersDisplay\";\nimport { useI18n } from \"@/lib/i18n\";\nimport { useCart, useBlockedNumbers } from \"@/lib/store\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport type { BlockedNumber } from \"@shared/schema\";\nimport { \n  lotteryTypes, \n  type LotteryType, \n  type BetType,\n  lotteryTypeNames,\n  betTypeNames,\n  payoutRates\n} from \"@shared/schema\";\nimport { \n  Calculator, \n  ShoppingCart, \n  Clock,\n  Star,\n  Sparkles,\n  ChevronRight\n} from \"lucide-react\";\n\nconst lotteryDrawTimes: Partial<Record<LotteryType, string>> = {\n  THAI_GOV: \"1, 16 ทุกเดือน 15:00\",\n  THAI_STOCK: \"ทุกวัน 12:00, 16:30\",\n  STOCK_NIKKEI: \"จ-ศ 15:30\",\n  STOCK_DOW: \"จ-ศ 05:30\",\n  STOCK_FTSE: \"จ-ศ 00:30\",\n  STOCK_DAX: \"จ-ศ 01:00\",\n  LAO: \"จ-ส 20:30\",\n  HANOI: \"ทุกวัน 18:30\",\n  MALAYSIA: \"พ, ส, อา 19:00\",\n  SINGAPORE: \"จ, พ 18:00\",\n  KENO: \"ทุก 5 นาที\"\n};\n\nexport default function Home() {\n  const { language, t } = useI18n();\n  const { addItem } = useCart();\n  const { isBlocked, setBlockedNumbers } = useBlockedNumbers();\n  const { toast } = useToast();\n\n  const [selectedLottery, setSelectedLottery] = useState<LotteryType | null>(null);\n  const [selectedBetType, setSelectedBetType] = useState<BetType | null>(null);\n  const [numbers, setNumbers] = useState<string[]>([]);\n  const [amount, setAmount] = useState<number>(0);\n  const [activeTab, setActiveTab] = useState(\"lottery\");\n\n  const { data: blockedData } = useQuery<BlockedNumber[]>({\n    queryKey: [\"/api/blocked-numbers\"],\n    staleTime: 30000,\n  });\n\n  useEffect(() => {\n    if (blockedData) {\n      setBlockedNumbers(blockedData);\n    }\n  }, [blockedData, setBlockedNumbers]);\n\n  const handleAddToCart = () => {\n    if (!selectedLottery || !selectedBetType || numbers.length === 0 || amount <= 0) {\n      toast({\n        title: language === \"th\" ? \"ข้อมูลไม่ครบ\" : \"Missing information\",\n        description: language === \"th\" \n          ? \"กรุณาเลือกหวย ประเภทการแทง เลข และจำนวนเงิน\" \n          : \"Please select lottery type, bet type, numbers, and amount\",\n        variant: \"destructive\"\n      });\n      return;\n    }\n\n    const hasBlocked = numbers.some(num => isBlocked(selectedLottery, num, selectedBetType));\n    if (hasBlocked) {\n      toast({\n        title: t(\"home.blockedWarning\"),\n        variant: \"destructive\"\n      });\n      return;\n    }\n\n    numbers.forEach(num => {\n      addItem({\n        lotteryType: selectedLottery,\n        betType: selectedBetType,\n        numbers: num,\n        amount\n      });\n    });\n\n    toast({\n      title: language === \"th\" ? \"เพิ่มในตะกร้าแล้ว\" : \"Added to cart\",\n      description: `${numbers.length} ${language === \"th\" ? \"รายการ\" : \"items\"}`\n    });\n\n    setNumbers([]);\n  };\n\n  const potentialWin = selectedBetType \n    ? amount * payoutRates[selectedBetType] * Math.max(1, numbers.length)\n    : 0;\n\n  const goToNextTab = () => {\n    if (activeTab === \"lottery\" && selectedLottery) setActiveTab(\"bet\");\n    else if (activeTab === \"bet\" && selectedBetType) setActiveTab(\"number\");\n    else if (activeTab === \"number\" && numbers.length > 0) setActiveTab(\"amount\");\n  };\n\n  return (\n    <div className=\"min-h-full\">\n      <div className=\"bg-gradient-to-br from-primary/10 via-background to-primary/5 p-4 md:p-6 border-b border-border\">\n        <div className=\"flex items-center gap-3\">\n          <div className=\"p-3 bg-primary/10 rounded-xl\">\n            <Calculator className=\"h-6 w-6 text-primary\" />\n          </div>\n          <div>\n            <h1 className=\"text-xl md:text-2xl font-bold\">\n              {language === \"th\" ? \"เครื่องคิดเลขแทงหวย\" : \"Lottery Betting Calculator\"}\n            </h1>\n            <p className=\"text-sm text-muted-foreground\">\n              {language === \"th\" \n                ? \"เลือกหวย → เลือกประเภท → กรอกเลข → ใส่จำนวนเงิน\" \n                : \"Select lottery → Choose bet type → Enter numbers → Set amount\"}\n            </p>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"p-4 md:p-6\">\n        <div className=\"grid gap-6 lg:grid-cols-3\">\n          <div className=\"lg:col-span-2\">\n            <Tabs value={activeTab} onValueChange={setActiveTab} className=\"space-y-4\">\n              <TabsList className=\"grid w-full grid-cols-4\">\n                <TabsTrigger value=\"lottery\" className=\"text-xs md:text-sm\">\n                  <span className=\"hidden md:inline\">{t(\"home.selectLottery\")}</span>\n                  <span className=\"md:hidden\">1. หวย</span>\n                </TabsTrigger>\n                <TabsTrigger value=\"bet\" disabled={!selectedLottery} className=\"text-xs md:text-sm\">\n                  <span className=\"hidden md:inline\">{t(\"home.selectBetType\")}</span>\n                  <span className=\"md:hidden\">2. แทง</span>\n                </TabsTrigger>\n                <TabsTrigger value=\"number\" disabled={!selectedBetType} className=\"text-xs md:text-sm\">\n                  <span className=\"hidden md:inline\">{t(\"home.enterNumber\")}</span>\n                  <span className=\"md:hidden\">3. เลข</span>\n                </TabsTrigger>\n                <TabsTrigger value=\"amount\" disabled={numbers.length === 0} className=\"text-xs md:text-sm\">\n                  <span className=\"hidden md:inline\">{t(\"home.enterAmount\")}</span>\n                  <span className=\"md:hidden\">4. เงิน</span>\n                </TabsTrigger>\n              </TabsList>\n\n              <TabsContent value=\"lottery\" className=\"space-y-4\">\n                <Card>\n                  <CardHeader className=\"pb-3\">\n                    <CardTitle className=\"text-lg flex items-center gap-2\">\n                      <Star className=\"h-5 w-5 text-primary\" />\n                      {t(\"home.selectLottery\")}\n                    </CardTitle>\n                    <CardDescription>\n                      {language === \"th\" \n                        ? \"เลือกประเภทหวยที่ต้องการแทง\" \n                        : \"Choose the lottery you want to bet on\"}\n                    </CardDescription>\n                  </CardHeader>\n                  <CardContent>\n                    <ScrollArea className=\"max-h-[400px]\">\n                      <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-2 pr-2\">\n                        {lotteryTypes.map((type) => (\n                          <LotteryTypeCard\n                            key={type}\n                            type={type}\n                            isSelected={selectedLottery === type}\n                            onClick={() => {\n                              setSelectedLottery(type);\n                              setSelectedBetType(null);\n                              setNumbers([]);\n                            }}\n                            drawTime={lotteryDrawTimes[type]}\n                          />\n                        ))}\n                      </div>\n                    </ScrollArea>\n                    {selectedLottery && (\n                      <Button \n                        className=\"w-full mt-4\" \n                        onClick={goToNextTab}\n                        data-testid=\"button-next-step-lottery\"\n                      >\n                        {language === \"th\" ? \"ถัดไป\" : \"Next\"}\n                        <ChevronRight className=\"h-4 w-4 ml-1\" />\n                      </Button>\n                    )}\n                  </CardContent>\n                </Card>\n              </TabsContent>\n\n              <TabsContent value=\"bet\" className=\"space-y-4\">\n                <Card>\n                  <CardHeader className=\"pb-3\">\n                    <CardTitle className=\"text-lg flex items-center gap-2\">\n                      <Sparkles className=\"h-5 w-5 text-primary\" />\n                      {t(\"home.selectBetType\")}\n                    </CardTitle>\n                    <CardDescription>\n                      {selectedLottery && lotteryTypeNames[selectedLottery][language]}\n                    </CardDescription>\n                  </CardHeader>\n                  <CardContent>\n                    <BetTypeSelector\n                      selectedType={selectedBetType}\n                      onSelect={(type) => {\n                        setSelectedBetType(type);\n                        setNumbers([]);\n                      }}\n                    />\n                    {selectedBetType && (\n                      <Button \n                        className=\"w-full mt-4\" \n                        onClick={goToNextTab}\n                        data-testid=\"button-next-step-bet\"\n                      >\n                        {language === \"th\" ? \"ถัดไป\" : \"Next\"}\n                        <ChevronRight className=\"h-4 w-4 ml-1\" />\n                      </Button>\n                    )}\n                  </CardContent>\n                </Card>\n\n                {selectedLottery && (\n                  <BlockedNumbersDisplay lotteryType={selectedLottery} />\n                )}\n              </TabsContent>\n\n              <TabsContent value=\"number\" className=\"space-y-4\">\n                <Card>\n                  <CardHeader className=\"pb-3\">\n                    <CardTitle className=\"text-lg flex items-center gap-2\">\n                      <Calculator className=\"h-5 w-5 text-primary\" />\n                      {t(\"home.enterNumber\")}\n                    </CardTitle>\n                    <CardDescription>\n                      {selectedBetType && betTypeNames[selectedBetType][language]}\n                    </CardDescription>\n                  </CardHeader>\n                  <CardContent>\n                    <NumberInput\n                      lotteryType={selectedLottery}\n                      betType={selectedBetType}\n                      numbers={numbers}\n                      onNumbersChange={setNumbers}\n                    />\n                    {numbers.length > 0 && (\n                      <Button \n                        className=\"w-full mt-4\" \n                        onClick={goToNextTab}\n                        data-testid=\"button-next-step-number\"\n                      >\n                        {language === \"th\" ? \"ถัดไป\" : \"Next\"}\n                        <ChevronRight className=\"h-4 w-4 ml-1\" />\n                      </Button>\n                    )}\n                  </CardContent>\n                </Card>\n              </TabsContent>\n\n              <TabsContent value=\"amount\" className=\"space-y-4\">\n                <Card>\n                  <CardHeader className=\"pb-3\">\n                    <CardTitle className=\"text-lg flex items-center gap-2\">\n                      <ShoppingCart className=\"h-5 w-5 text-primary\" />\n                      {t(\"home.enterAmount\")}\n                    </CardTitle>\n                  </CardHeader>\n                  <CardContent className=\"space-y-4\">\n                    <AmountInput\n                      amount={amount}\n                      onAmountChange={setAmount}\n                      betType={selectedBetType}\n                      numbersCount={numbers.length}\n                    />\n                    \n                    <Button\n                      className=\"w-full h-12 text-lg\"\n                      onClick={handleAddToCart}\n                      disabled={!selectedLottery || !selectedBetType || numbers.length === 0 || amount <= 0}\n                      data-testid=\"button-add-to-cart\"\n                    >\n                      <ShoppingCart className=\"h-5 w-5 mr-2\" />\n                      {t(\"home.addToCart\")}\n                    </Button>\n                  </CardContent>\n                </Card>\n              </TabsContent>\n            </Tabs>\n          </div>\n\n          <div className=\"space-y-4\">\n            <Card className=\"sticky top-4 bg-gradient-to-br from-card via-card to-primary/5 border-primary/20\">\n              <CardHeader className=\"pb-2\">\n                <CardTitle className=\"text-lg flex items-center gap-2\">\n                  <Clock className=\"h-5 w-5 text-primary\" />\n                  {language === \"th\" ? \"สรุปรายการ\" : \"Summary\"}\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-3\">\n                <div className=\"space-y-2 text-sm\">\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-muted-foreground\">\n                      {language === \"th\" ? \"ประเภทหวย\" : \"Lottery\"}\n                    </span>\n                    <span className=\"font-medium\">\n                      {selectedLottery \n                        ? lotteryTypeNames[selectedLottery][language] \n                        : \"-\"}\n                    </span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-muted-foreground\">\n                      {language === \"th\" ? \"รูปแบบ\" : \"Bet Type\"}\n                    </span>\n                    <span className=\"font-medium\">\n                      {selectedBetType \n                        ? betTypeNames[selectedBetType][language] \n                        : \"-\"}\n                    </span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-muted-foreground\">\n                      {language === \"th\" ? \"จำนวนเลข\" : \"Numbers\"}\n                    </span>\n                    <span className=\"font-medium\">{numbers.length}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-muted-foreground\">\n                      {language === \"th\" ? \"เงินต่อเลข\" : \"Per Number\"}\n                    </span>\n                    <span className=\"font-medium\">\n                      {amount.toLocaleString()} {t(\"common.baht\")}\n                    </span>\n                  </div>\n                </div>\n\n                <div className=\"border-t border-border pt-3 space-y-2\">\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-muted-foreground\">\n                      {language === \"th\" ? \"ยอดรวม\" : \"Total\"}\n                    </span>\n                    <span className=\"font-bold text-lg\">\n                      {(amount * Math.max(1, numbers.length)).toLocaleString()} {t(\"common.baht\")}\n                    </span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-muted-foreground\">{t(\"home.potentialWin\")}</span>\n                    <span className=\"font-bold text-xl text-primary\">\n                      {potentialWin.toLocaleString()} {t(\"common.baht\")}\n                    </span>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n\n            {numbers.length > 0 && (\n              <Card>\n                <CardHeader className=\"pb-2\">\n                  <CardTitle className=\"text-sm\">\n                    {language === \"th\" ? \"เลขที่เลือก\" : \"Selected Numbers\"}\n                  </CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"flex flex-wrap gap-2\">\n                    {numbers.map((num, idx) => (\n                      <div \n                        key={idx}\n                        className=\"bg-primary/10 text-primary font-mono font-bold px-3 py-1.5 rounded-lg text-lg tracking-widest\"\n                      >\n                        {num}\n                      </div>\n                    ))}\n                  </div>\n                </CardContent>\n              </Card>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":16707,"size_tokens":null},"client/src/hooks/use-mobile.tsx":{"content":"import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n","path":null,"size_bytes":565,"size_tokens":null},"client/src/components/AppSidebar.tsx":{"content":"import { Link, useLocation } from \"wouter\";\nimport {\n  Sidebar,\n  SidebarContent,\n  SidebarGroup,\n  SidebarGroupContent,\n  SidebarMenu,\n  SidebarMenuItem,\n  SidebarMenuButton,\n  SidebarHeader,\n  SidebarFooter,\n  SidebarSeparator,\n} from \"@/components/ui/sidebar\";\nimport { Button } from \"@/components/ui/button\";\nimport { Logo } from \"./Logo\";\nimport { ThemeToggle } from \"./ThemeToggle\";\nimport { LanguageToggle } from \"./LanguageToggle\";\nimport { useI18n } from \"@/lib/i18n\";\nimport { useUser, useAdmin } from \"@/lib/store\";\nimport {\n  Home,\n  Trophy,\n  Users,\n  User,\n  Settings,\n  LogIn,\n  LogOut,\n  Wallet,\n  Calculator,\n} from \"lucide-react\";\n\nexport function AppSidebar() {\n  const [location] = useLocation();\n  const { t, language } = useI18n();\n  const { isAuthenticated, logout } = useUser();\n  const { isAdminAuthenticated } = useAdmin();\n\n  const mainMenuItems = [\n    { title: t(\"nav.home\"), url: \"/\", icon: Home },\n    { title: t(\"nav.results\"), url: \"/results\", icon: Trophy },\n    { title: language === \"th\" ? \"คำนวณหวยชุด\" : \"Set Calculator\", url: \"/calculator\", icon: Calculator },\n    { title: t(\"nav.affiliate\"), url: \"/affiliate\", icon: Users },\n  ];\n\n  const userMenuItems = isAuthenticated\n    ? [\n        { title: t(\"nav.profile\"), url: \"/profile\", icon: User },\n        { title: language === \"th\" ? \"ฝาก/ถอน\" : \"Deposit/Withdraw\", url: \"/wallet\", icon: Wallet },\n      ]\n    : [];\n\n  return (\n    <Sidebar>\n      <SidebarHeader className=\"p-4\">\n        <Link href=\"/\" className=\"block\">\n          <Logo size=\"md\" />\n        </Link>\n      </SidebarHeader>\n\n      <SidebarContent>\n        <SidebarGroup>\n          <SidebarGroupContent>\n            <SidebarMenu>\n              {mainMenuItems.map((item) => (\n                <SidebarMenuItem key={item.url}>\n                  <SidebarMenuButton\n                    asChild\n                    isActive={location === item.url}\n                  >\n                    <Link href={item.url}>\n                      <item.icon className=\"h-4 w-4\" />\n                      <span>{item.title}</span>\n                    </Link>\n                  </SidebarMenuButton>\n                </SidebarMenuItem>\n              ))}\n            </SidebarMenu>\n          </SidebarGroupContent>\n        </SidebarGroup>\n\n        {userMenuItems.length > 0 && (\n          <>\n            <SidebarSeparator />\n            <SidebarGroup>\n              <SidebarGroupContent>\n                <SidebarMenu>\n                  {userMenuItems.map((item) => (\n                    <SidebarMenuItem key={item.url}>\n                      <SidebarMenuButton\n                        asChild\n                        isActive={location === item.url}\n                      >\n                        <Link href={item.url}>\n                          <item.icon className=\"h-4 w-4\" />\n                          <span>{item.title}</span>\n                        </Link>\n                      </SidebarMenuButton>\n                    </SidebarMenuItem>\n                  ))}\n                </SidebarMenu>\n              </SidebarGroupContent>\n            </SidebarGroup>\n          </>\n        )}\n\n        {isAdminAuthenticated && (\n          <>\n            <SidebarSeparator />\n            <SidebarGroup>\n              <SidebarGroupContent>\n                <SidebarMenu>\n                  <SidebarMenuItem>\n                    <SidebarMenuButton\n                      asChild\n                      isActive={location.startsWith(\"/admin\")}\n                    >\n                      <Link href=\"/admin\">\n                        <Settings className=\"h-4 w-4\" />\n                        <span>{t(\"nav.admin\")}</span>\n                      </Link>\n                    </SidebarMenuButton>\n                  </SidebarMenuItem>\n                </SidebarMenu>\n              </SidebarGroupContent>\n            </SidebarGroup>\n          </>\n        )}\n      </SidebarContent>\n\n      <SidebarFooter className=\"p-4 space-y-4\">\n        <div className=\"flex items-center justify-center gap-2\">\n          <ThemeToggle />\n          <LanguageToggle />\n        </div>\n\n        {isAuthenticated ? (\n          <Button\n            variant=\"outline\"\n            className=\"w-full\"\n            onClick={logout}\n            data-testid=\"button-logout\"\n          >\n            <LogOut className=\"h-4 w-4 mr-2\" />\n            {t(\"nav.logout\")}\n          </Button>\n        ) : (\n          <div className=\"flex gap-2\">\n            <Button variant=\"outline\" className=\"flex-1\" asChild>\n              <Link href=\"/login\" data-testid=\"link-login\">\n                <LogIn className=\"h-4 w-4 mr-2\" />\n                {t(\"nav.login\")}\n              </Link>\n            </Button>\n          </div>\n        )}\n      </SidebarFooter>\n    </Sidebar>\n  );\n}\n","path":null,"size_bytes":4777,"size_tokens":null},"client/src/components/ui/input.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    // h-9 to match icon buttons and default buttons.\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","path":null,"size_bytes":844,"size_tokens":null},"shared/schema.ts":{"content":"import { pgTable, text, integer, boolean, timestamp, real, serial } from \"drizzle-orm/pg-core\";\nimport { createInsertSchema } from \"drizzle-zod\";\nimport { z } from \"zod\";\nimport { relations } from \"drizzle-orm\";\n\nexport const lotteryTypes = [\n  \"THAI_GOV\",\n  \"THAI_STOCK\",\n  \"STOCK_NIKKEI\",\n  \"STOCK_DOW\",\n  \"STOCK_FTSE\",\n  \"STOCK_DAX\",\n  \"LAO\",\n  \"HANOI\",\n  \"MALAYSIA\",\n  \"SINGAPORE\",\n  \"KENO\"\n] as const;\n\nexport type LotteryType = typeof lotteryTypes[number];\n\n// 9 ประเภทสำหรับหวยไทย\nexport const betTypes = [\n  \"TWO_TOP\",       // 2 ตัวบน\n  \"TWO_BOTTOM\",    // 2 ตัวล่าง\n  \"THREE_TOP\",     // 3 ตัวตรง (3 ตัวบน)\n  \"THREE_TOD\",     // 3 ตัวโต๊ด\n  \"FOUR_TOP\",      // 4 ตัวบน\n  \"FIVE_TOP\",      // 5 ตัวบน\n  \"RUN_TOP\",       // วิ่งบน (เลขลอยบน)\n  \"RUN_BOTTOM\",    // วิ่งล่าง (เลขลอยล่าง)\n  \"REVERSE\"        // เลขกลับ 2 ตัวบน\n] as const;\n\nexport type BetType = typeof betTypes[number];\n\n// อัตราจ่ายเริ่มต้น (Admin สามารถเปลี่ยนได้ในหน้า Admin)\nexport const payoutRates: Record<BetType, number> = {\n  TWO_TOP: 60,      // 2 ตัวบน x60\n  TWO_BOTTOM: 60,   // 2 ตัวล่าง x60\n  THREE_TOP: 500,   // 3 ตัวตรง x500\n  THREE_TOD: 90,    // 3 ตัวโต๊ด x90\n  FOUR_TOP: 900,    // 4 ตัวบน x900\n  FIVE_TOP: 2000,   // 5 ตัวบน x2000\n  RUN_TOP: 3,       // วิ่งบน x3 (100 บาท ได้ 300)\n  RUN_BOTTOM: 4,    // วิ่งล่าง x4 (100 บาท ได้ 400)\n  REVERSE: 94       // เลขกลับ x94\n};\n\nexport const lotteryTypeNames: Record<LotteryType, { th: string; en: string }> = {\n  THAI_GOV: { th: \"หวยรัฐบาลไทย\", en: \"Thai Government\" },\n  THAI_STOCK: { th: \"หวยหุ้นไทย\", en: \"Thai Stock\" },\n  STOCK_NIKKEI: { th: \"หวยหุ้นนิเคอิ\", en: \"Nikkei Stock\" },\n  STOCK_DOW: { th: \"หวยหุ้นดาวโจนส์\", en: \"Dow Jones Stock\" },\n  STOCK_FTSE: { th: \"หวยหุ้นอังกฤษ\", en: \"FTSE Stock\" },\n  STOCK_DAX: { th: \"หวยหุ้นเยอรมัน\", en: \"DAX Stock\" },\n  LAO: { th: \"หวยลาว\", en: \"Lao Lottery\" },\n  HANOI: { th: \"หวยฮานอย\", en: \"Hanoi Lottery\" },\n  MALAYSIA: { th: \"หวยมาเลย์\", en: \"Malaysia Lottery\" },\n  SINGAPORE: { th: \"หวยสิงคโปร์\", en: \"Singapore Lottery\" },\n  KENO: { th: \"หวย Keno\", en: \"Keno Lottery\" }\n};\n\nexport const betTypeNames: Record<BetType, { th: string; en: string }> = {\n  TWO_TOP: { th: \"2 ตัวบน\", en: \"2 Digits Top\" },\n  TWO_BOTTOM: { th: \"2 ตัวล่าง\", en: \"2 Digits Bottom\" },\n  THREE_TOP: { th: \"3 ตัวตรง\", en: \"3 Digits Straight\" },\n  THREE_TOD: { th: \"3 ตัวโต๊ด\", en: \"3 Digits Tod\" },\n  FOUR_TOP: { th: \"4 ตัวบน\", en: \"4 Digits Top\" },\n  FIVE_TOP: { th: \"5 ตัวบน\", en: \"5 Digits Top\" },\n  RUN_TOP: { th: \"วิ่งบน\", en: \"Run Top\" },\n  RUN_BOTTOM: { th: \"วิ่งล่าง\", en: \"Run Bottom\" },\n  REVERSE: { th: \"เลขกลับ\", en: \"Reverse\" }\n};\n\nexport const users = pgTable(\"users\", {\n  id: serial(\"id\").primaryKey(),\n  username: text(\"username\").notNull().unique(),\n  password: text(\"password\").notNull(),\n  balance: real(\"balance\").notNull().default(0),\n  referralCode: text(\"referral_code\").notNull().unique(),\n  referredBy: text(\"referred_by\"),\n  affiliateEarnings: real(\"affiliate_earnings\").notNull().default(0),\n  isBlocked: boolean(\"is_blocked\").notNull().default(false),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow()\n});\n\nexport const insertUserSchema = createInsertSchema(users).omit({\n  id: true,\n  createdAt: true\n});\n\nexport type InsertUser = z.infer<typeof insertUserSchema>;\nexport type User = typeof users.$inferSelect;\n\nexport const bets = pgTable(\"bets\", {\n  id: serial(\"id\").primaryKey(),\n  userId: integer(\"user_id\").notNull().references(() => users.id),\n  lotteryType: text(\"lottery_type\").notNull(),\n  betType: text(\"bet_type\").notNull(),\n  numbers: text(\"numbers\").notNull(),\n  amount: real(\"amount\").notNull(),\n  potentialWin: real(\"potential_win\").notNull(),\n  status: text(\"status\").notNull().default(\"pending\"),\n  drawDate: text(\"draw_date\").notNull(),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow()\n});\n\nexport const insertBetSchema = createInsertSchema(bets).omit({\n  id: true,\n  createdAt: true\n});\n\nexport type InsertBet = z.infer<typeof insertBetSchema>;\nexport type Bet = typeof bets.$inferSelect;\n\nexport const blockedNumbers = pgTable(\"blocked_numbers\", {\n  id: serial(\"id\").primaryKey(),\n  lotteryType: text(\"lottery_type\").notNull(),\n  number: text(\"number\").notNull(),\n  betType: text(\"bet_type\"),\n  isActive: boolean(\"is_active\").notNull().default(true),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow()\n});\n\nexport const insertBlockedNumberSchema = createInsertSchema(blockedNumbers).omit({\n  id: true,\n  createdAt: true\n});\n\nexport type InsertBlockedNumber = z.infer<typeof insertBlockedNumberSchema>;\nexport type BlockedNumber = typeof blockedNumbers.$inferSelect;\n\nexport const transactions = pgTable(\"transactions\", {\n  id: serial(\"id\").primaryKey(),\n  userId: integer(\"user_id\").notNull().references(() => users.id),\n  type: text(\"type\").notNull(),\n  amount: real(\"amount\").notNull(),\n  status: text(\"status\").notNull().default(\"pending\"),\n  slipUrl: text(\"slip_url\"),\n  reference: text(\"reference\").notNull(),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow()\n});\n\nexport const insertTransactionSchema = createInsertSchema(transactions).omit({\n  id: true,\n  createdAt: true\n});\n\nexport type InsertTransaction = z.infer<typeof insertTransactionSchema>;\nexport type Transaction = typeof transactions.$inferSelect;\n\nexport const affiliates = pgTable(\"affiliates\", {\n  id: serial(\"id\").primaryKey(),\n  referrerId: integer(\"referrer_id\").notNull().references(() => users.id),\n  referredId: integer(\"referred_id\").notNull().references(() => users.id),\n  totalBetAmount: real(\"total_bet_amount\").notNull().default(0),\n  totalDepositAmount: real(\"total_deposit_amount\").notNull().default(0),\n  commission: real(\"commission\").notNull().default(0),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow()\n});\n\nexport type Affiliate = typeof affiliates.$inferSelect;\n\nexport const lotteryResults = pgTable(\"lottery_results\", {\n  id: serial(\"id\").primaryKey(),\n  lotteryType: text(\"lottery_type\").notNull(),\n  drawDate: text(\"draw_date\").notNull(),\n  firstPrize: text(\"first_prize\"),\n  threeDigitTop: text(\"three_digit_top\"),\n  threeDigitBottom: text(\"three_digit_bottom\"),\n  twoDigitTop: text(\"two_digit_top\"),\n  twoDigitBottom: text(\"two_digit_bottom\"),\n  runTop: text(\"run_top\"),\n  runBottom: text(\"run_bottom\"),\n  isProcessed: boolean(\"is_processed\").notNull().default(false),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow()\n});\n\nexport const insertLotteryResultSchema = createInsertSchema(lotteryResults).omit({\n  id: true,\n  createdAt: true\n});\n\nexport type InsertLotteryResult = z.infer<typeof insertLotteryResultSchema>;\nexport type StoredLotteryResult = typeof lotteryResults.$inferSelect;\n\nexport const usersRelations = relations(users, ({ many }) => ({\n  bets: many(bets),\n  transactions: many(transactions)\n}));\n\nexport const betsRelations = relations(bets, ({ one }) => ({\n  user: one(users, {\n    fields: [bets.userId],\n    references: [users.id]\n  })\n}));\n\nexport const transactionsRelations = relations(transactions, ({ one }) => ({\n  user: one(users, {\n    fields: [transactions.userId],\n    references: [users.id]\n  })\n}));\n\nexport const affiliatesRelations = relations(affiliates, ({ one }) => ({\n  referrer: one(users, {\n    fields: [affiliates.referrerId],\n    references: [users.id]\n  }),\n  referred: one(users, {\n    fields: [affiliates.referredId],\n    references: [users.id]\n  })\n}));\n\nexport const cartItemSchema = z.object({\n  id: z.string(),\n  lotteryType: z.enum(lotteryTypes),\n  betType: z.enum(betTypes),\n  numbers: z.string(),\n  amount: z.number(),\n  isSet: z.boolean().optional(),\n  setIndex: z.number().optional()\n});\n\nexport type CartItem = z.infer<typeof cartItemSchema>;\n\nexport const lotteryResultSchema = z.object({\n  lotteryType: z.enum(lotteryTypes),\n  date: z.string(),\n  results: z.object({\n    firstPrize: z.string().optional(),\n    threeDigitTop: z.array(z.string()).optional(),\n    threeDigitBottom: z.array(z.string()).optional(),\n    twoDigit: z.string().optional(),\n    runTop: z.string().optional(),\n    runBottom: z.string().optional()\n  }),\n  isExternal: z.boolean().default(false),\n  externalUrl: z.string().optional()\n});\n\nexport type LotteryResult = z.infer<typeof lotteryResultSchema>;\n\nexport const adminSchema = z.object({\n  username: z.string(),\n  password: z.string()\n});\n\nexport type Admin = z.infer<typeof adminSchema>;\n\nexport const bankAccountSchema = z.object({\n  bankName: z.string(),\n  accountNumber: z.string(),\n  accountName: z.string(),\n  promptPayId: z.string()\n});\n\nexport type BankAccount = z.infer<typeof bankAccountSchema>;\n\nexport const payoutSettings = pgTable(\"payout_settings\", {\n  id: serial(\"id\").primaryKey(),\n  betType: text(\"bet_type\").notNull().unique(),\n  rate: real(\"rate\").notNull(),\n  updatedAt: timestamp(\"updated_at\").notNull().defaultNow()\n});\n\nexport const insertPayoutSettingSchema = createInsertSchema(payoutSettings).omit({\n  id: true,\n  updatedAt: true\n});\n\nexport type InsertPayoutSetting = z.infer<typeof insertPayoutSettingSchema>;\nexport type PayoutSetting = typeof payoutSettings.$inferSelect;\n\nexport const betLimits = pgTable(\"bet_limits\", {\n  id: serial(\"id\").primaryKey(),\n  number: text(\"number\").notNull(),\n  maxAmount: real(\"max_amount\").notNull(),\n  isActive: boolean(\"is_active\").notNull().default(true),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow()\n});\n\nexport const betLimitLotteryTypes = pgTable(\"bet_limit_lottery_types\", {\n  id: serial(\"id\").primaryKey(),\n  betLimitId: integer(\"bet_limit_id\").notNull().references(() => betLimits.id, { onDelete: \"cascade\" }),\n  lotteryType: text(\"lottery_type\").notNull()\n});\n\nexport const betLimitsRelations = relations(betLimits, ({ many }) => ({\n  lotteryTypes: many(betLimitLotteryTypes)\n}));\n\nexport const betLimitLotteryTypesRelations = relations(betLimitLotteryTypes, ({ one }) => ({\n  betLimit: one(betLimits, {\n    fields: [betLimitLotteryTypes.betLimitId],\n    references: [betLimits.id]\n  })\n}));\n\nexport const insertBetLimitSchema = createInsertSchema(betLimits).omit({\n  id: true,\n  createdAt: true\n});\n\nexport type InsertBetLimit = z.infer<typeof insertBetLimitSchema>;\nexport type BetLimit = typeof betLimits.$inferSelect;\nexport type BetLimitLotteryType = typeof betLimitLotteryTypes.$inferSelect;\n\nexport type BetLimitWithLotteryTypes = BetLimit & {\n  lotteryTypes: string[];\n};\n\nexport const betTypeSettings = pgTable(\"bet_type_settings\", {\n  id: serial(\"id\").primaryKey(),\n  betType: text(\"bet_type\").notNull().unique(),\n  isEnabled: boolean(\"is_enabled\").notNull().default(true),\n  updatedAt: timestamp(\"updated_at\").notNull().defaultNow()\n});\n\nexport const insertBetTypeSettingSchema = createInsertSchema(betTypeSettings).omit({\n  id: true,\n  updatedAt: true\n});\n\nexport type InsertBetTypeSetting = z.infer<typeof insertBetTypeSettingSchema>;\nexport type BetTypeSetting = typeof betTypeSettings.$inferSelect;\n","path":null,"size_bytes":11610,"size_tokens":null},"server/routes.ts":{"content":"import type { Express } from \"express\";\nimport { createServer, type Server } from \"http\";\nimport { storage } from \"./storage\";\nimport { hashPassword, verifyPassword } from \"./password\";\nimport { sendPaymentNotification, sendWithdrawalNotification, sendBetNotification, sendAdminActionNotification, sendTelegramMessage } from \"./telegram\";\n\n\nexport async function registerRoutes(\n  httpServer: Server,\n  app: Express\n): Promise<Server> {\n\n  const ADMIN_USERNAME = process.env.ADMIN_USERNAME || \"admin\";\n  const ADMIN_PASSWORD = process.env.ADMIN_PASSWORD || \"admin123\";\n\n  const requireAdmin = (req: any, res: any, next: any) => {\n    if (!req.session?.isAdmin) {\n      return res.status(401).json({ error: \"Admin authentication required\" });\n    }\n    next();\n  };\n\n  app.get(\"/api/blocked-numbers\", async (req, res) => {\n    try {\n      const lotteryType = req.query.lotteryType as string | undefined;\n      const blockedNumbers = await storage.getBlockedNumbers(lotteryType);\n      res.json(blockedNumbers);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to fetch blocked numbers\" });\n    }\n  });\n\n  app.post(\"/api/blocked-numbers\", requireAdmin, async (req, res) => {\n    try {\n      const { lotteryType, number, betType, isActive = true } = req.body;\n      if (!lotteryType || !number) {\n        return res.status(400).json({ error: \"Missing required fields\" });\n      }\n      const blocked = await storage.createBlockedNumber({\n        lotteryType,\n        number,\n        betType: betType || null,\n        isActive,\n      });\n      res.json(blocked);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to create blocked number\" });\n    }\n  });\n\n  app.patch(\"/api/blocked-numbers/:id\", requireAdmin, async (req, res) => {\n    try {\n      const id = parseInt(req.params.id, 10);\n      if (isNaN(id)) {\n        return res.status(400).json({ error: \"Invalid ID\" });\n      }\n      const { isActive } = req.body;\n      const blocked = await storage.updateBlockedNumber(id, isActive);\n      if (!blocked) {\n        return res.status(404).json({ error: \"Blocked number not found\" });\n      }\n      res.json(blocked);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to update blocked number\" });\n    }\n  });\n\n  app.delete(\"/api/blocked-numbers/:id\", requireAdmin, async (req, res) => {\n    try {\n      const id = parseInt(req.params.id, 10);\n      if (isNaN(id)) {\n        return res.status(400).json({ error: \"Invalid ID\" });\n      }\n      const deleted = await storage.deleteBlockedNumber(id);\n      if (!deleted) {\n        return res.status(404).json({ error: \"Blocked number not found\" });\n      }\n      res.json({ success: true });\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to delete blocked number\" });\n    }\n  });\n\n  app.get(\"/api/bet-limits\", async (req, res) => {\n    try {\n      const limits = await storage.getBetLimits();\n      res.json(limits);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to fetch bet limits\" });\n    }\n  });\n\n  app.get(\"/api/bet-limits/:id\", async (req, res) => {\n    try {\n      const id = parseInt(req.params.id, 10);\n      if (isNaN(id)) {\n        return res.status(400).json({ error: \"Invalid ID\" });\n      }\n      const limit = await storage.getBetLimit(id);\n      if (!limit) {\n        return res.status(404).json({ error: \"Bet limit not found\" });\n      }\n      res.json(limit);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to fetch bet limit\" });\n    }\n  });\n\n  app.post(\"/api/bet-limits\", requireAdmin, async (req, res) => {\n    try {\n      const { number, maxAmount, isActive = true, lotteryTypes = [] } = req.body;\n      if (!number || maxAmount === undefined) {\n        return res.status(400).json({ error: \"Missing required fields: number and maxAmount\" });\n      }\n      if (typeof maxAmount !== \"number\" || maxAmount <= 0) {\n        return res.status(400).json({ error: \"maxAmount must be a positive number\" });\n      }\n      const limit = await storage.createBetLimit(\n        { number, maxAmount, isActive },\n        lotteryTypes\n      );\n      res.json(limit);\n    } catch (error) {\n      console.error(\"Create bet limit error:\", error);\n      res.status(500).json({ error: \"Failed to create bet limit\" });\n    }\n  });\n\n  app.patch(\"/api/bet-limits/:id\", requireAdmin, async (req, res) => {\n    try {\n      const id = parseInt(req.params.id, 10);\n      if (isNaN(id)) {\n        return res.status(400).json({ error: \"Invalid ID\" });\n      }\n      const { number, maxAmount, isActive, lotteryTypes } = req.body;\n      \n      const updateData: { number?: string; maxAmount?: number; isActive?: boolean } = {};\n      if (number !== undefined) updateData.number = number;\n      if (maxAmount !== undefined) updateData.maxAmount = maxAmount;\n      if (isActive !== undefined) updateData.isActive = isActive;\n      \n      const limit = await storage.updateBetLimit(id, updateData, lotteryTypes);\n      if (!limit) {\n        return res.status(404).json({ error: \"Bet limit not found\" });\n      }\n      res.json(limit);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to update bet limit\" });\n    }\n  });\n\n  app.delete(\"/api/bet-limits/:id\", requireAdmin, async (req, res) => {\n    try {\n      const id = parseInt(req.params.id, 10);\n      if (isNaN(id)) {\n        return res.status(400).json({ error: \"Invalid ID\" });\n      }\n      const deleted = await storage.deleteBetLimit(id);\n      if (!deleted) {\n        return res.status(404).json({ error: \"Bet limit not found\" });\n      }\n      res.json({ success: true });\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to delete bet limit\" });\n    }\n  });\n\n  app.post(\"/api/auth/register\", async (req, res) => {\n    try {\n      const { username, password, referralCode } = req.body;\n      if (!username || !password) {\n        return res.status(400).json({ error: \"Missing required fields\" });\n      }\n\n      const existingUser = await storage.getUserByUsername(username);\n      if (existingUser) {\n        return res.status(400).json({ error: \"Username already exists\" });\n      }\n\n      let referredBy: string | null = null;\n      if (referralCode) {\n        const referrer = await storage.getUserByReferralCode(referralCode);\n        if (referrer) {\n          referredBy = referralCode;\n        }\n      }\n\n      const hashedPassword = await hashPassword(password);\n\n      const user = await storage.createUser({\n        username,\n        password: hashedPassword,\n        balance: 0,\n        referralCode: `QNQ${Date.now().toString(36).toUpperCase()}`,\n        referredBy,\n        affiliateEarnings: 0,\n      });\n\n      if (referredBy) {\n        const referrer = await storage.getUserByReferralCode(referredBy);\n        if (referrer) {\n          await storage.createAffiliate(referrer.id, user.id);\n        }\n      }\n\n      const { password: _, ...userWithoutPassword } = user;\n      res.json(userWithoutPassword);\n    } catch (error) {\n      console.error(\"Registration error:\", error);\n      res.status(500).json({ error: \"Failed to register user\" });\n    }\n  });\n\n  app.post(\"/api/auth/login\", async (req, res) => {\n    try {\n      const { username, password } = req.body;\n      if (!username || !password) {\n        return res.status(400).json({ error: \"Missing required fields\" });\n      }\n\n      const user = await storage.getUserByUsername(username);\n      if (!user) {\n        return res.status(401).json({ error: \"Invalid credentials\" });\n      }\n\n      const isValid = await verifyPassword(password, user.password);\n      if (!isValid) {\n        return res.status(401).json({ error: \"Invalid credentials\" });\n      }\n\n      const { password: _, ...userWithoutPassword } = user;\n      res.json(userWithoutPassword);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to login\" });\n    }\n  });\n\n  app.get(\"/api/users/:id\", async (req, res) => {\n    try {\n      const id = parseInt(req.params.id, 10);\n      if (isNaN(id)) {\n        return res.status(400).json({ error: \"Invalid ID\" });\n      }\n      const user = await storage.getUser(id);\n      if (!user) {\n        return res.status(404).json({ error: \"User not found\" });\n      }\n      const { password: _, ...userWithoutPassword } = user;\n      res.json(userWithoutPassword);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to fetch user\" });\n    }\n  });\n\n  app.post(\"/api/bets\", async (req, res) => {\n    try {\n      const { userId, items } = req.body;\n      const userIdNum = typeof userId === \"string\" ? parseInt(userId, 10) : userId;\n      \n      if (!userIdNum || isNaN(userIdNum) || !items || !Array.isArray(items) || items.length === 0) {\n        return res.status(400).json({ error: \"Missing required fields\" });\n      }\n\n      const user = await storage.getUser(userIdNum);\n      if (!user) {\n        return res.status(404).json({ error: \"User not found\" });\n      }\n\n      const totalAmount = items.reduce((sum: number, item: any) => sum + (item.amount || 0), 0);\n\n      const betInserts = [];\n      for (const item of items) {\n        const { lotteryType, betType, numbers, amount } = item;\n        \n        const isBetTypeEnabled = await storage.isBetTypeEnabled(betType);\n        if (!isBetTypeEnabled) {\n          return res.status(400).json({ \n            error: `Bet type ${betType} is currently disabled. ไม่รับแทงประเภทนี้ในขณะนี้`\n          });\n        }\n\n        let payoutRate: number;\n        try {\n          payoutRate = await storage.getPayoutRate(betType);\n        } catch (payoutError: any) {\n          console.error(\"Payout rate error:\", payoutError.message);\n          return res.status(500).json({ \n            error: \"System configuration error. Please contact administrator.\" \n          });\n        }\n        \n        const potentialWin = amount * payoutRate;\n\n        const blocked = await storage.getBlockedNumbers(lotteryType);\n        const isBlocked = blocked.some(\n          (bn) =>\n            bn.isActive &&\n            bn.number === numbers &&\n            (bn.betType === null || bn.betType === betType)\n        );\n\n        if (isBlocked) {\n          return res.status(400).json({ error: `Number ${numbers} is blocked` });\n        }\n\n        const drawDate = new Date().toISOString().split(\"T\")[0];\n        \n        const betLimit = await storage.getActiveBetLimitForNumber(numbers, lotteryType);\n        if (betLimit) {\n          const existingTotal = await storage.getTotalBetAmountForNumber(numbers, lotteryType, drawDate);\n          const newTotal = existingTotal + amount;\n          \n          if (newTotal > betLimit.maxAmount) {\n            const remaining = Math.max(0, betLimit.maxAmount - existingTotal);\n            return res.status(400).json({ \n              error: `Bet limit exceeded for ${numbers}. Max: ${betLimit.maxAmount.toLocaleString()}฿, Current: ${existingTotal.toLocaleString()}฿, Remaining: ${remaining.toLocaleString()}฿`\n            });\n          }\n        }\n\n        betInserts.push({\n          userId: userIdNum,\n          lotteryType,\n          betType,\n          numbers,\n          amount,\n          potentialWin,\n          status: \"pending\",\n          drawDate,\n        });\n      }\n\n      const { bets: createdBets } = await storage.createBetsWithBalanceDeduction(\n        userIdNum,\n        betInserts,\n        totalAmount\n      );\n\n      await storage.updateAffiliateStats(userIdNum, totalAmount);\n\n      const username = user?.username || `User #${userIdNum}`;\n      const clientIp = (req.headers[\"x-forwarded-for\"] as string) || req.socket.remoteAddress || undefined;\n      \n      sendBetNotification({\n        username,\n        userId: userIdNum,\n        items: items.map((item: any) => ({\n          lotteryType: item.lotteryType,\n          betType: item.betType,\n          numbers: item.numbers,\n          amount: item.amount,\n          isSet: item.isSet,\n          setIndex: item.setIndex\n        })),\n        totalAmount,\n        ip: clientIp\n      }).catch(err => {\n        console.error(\"Failed to send Telegram bet notification:\", err);\n      });\n\n      res.json({ bets: createdBets, totalAmount });\n    } catch (error: any) {\n      console.error(\"Bet creation error:\", error);\n      if (error.message === \"Insufficient balance\") {\n        return res.status(400).json({ error: \"Insufficient balance\" });\n      }\n      if (error.message === \"User not found\") {\n        return res.status(404).json({ error: \"User not found\" });\n      }\n      res.status(500).json({ error: \"Failed to create bets\" });\n    }\n  });\n\n  app.get(\"/api/bets\", async (req, res) => {\n    try {\n      const userId = req.query.userId as string | undefined;\n      const userIdNum = userId ? parseInt(userId, 10) : undefined;\n      const bets = await storage.getBets(userIdNum);\n      res.json(bets);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to fetch bets\" });\n    }\n  });\n\n  app.get(\"/api/transactions/:userId\", async (req, res) => {\n    try {\n      const id = parseInt(req.params.userId, 10);\n      if (isNaN(id)) {\n        return res.status(400).json({ error: \"Invalid user ID\" });\n      }\n      const transactions = await storage.getTransactions(id);\n      res.json(transactions);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to fetch transactions\" });\n    }\n  });\n\n  app.get(\"/api/transactions\", async (req, res) => {\n    try {\n      const transactions = await storage.getAllTransactions();\n      res.json(transactions);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to fetch transactions\" });\n    }\n  });\n\n  app.post(\"/api/transactions\", async (req, res) => {\n    try {\n      const { userId, type, amount, slipUrl } = req.body;\n      const userIdNum = typeof userId === \"string\" ? parseInt(userId, 10) : userId;\n      \n      if (!userIdNum || isNaN(userIdNum) || !type || amount === undefined) {\n        return res.status(400).json({ error: \"Missing required fields\" });\n      }\n\n      const transaction = await storage.createTransaction({\n        userId: userIdNum,\n        type,\n        amount,\n        status: \"pending\",\n        slipUrl: slipUrl || null,\n        reference: `${type.toUpperCase()}${Date.now().toString(36).toUpperCase()}`,\n      });\n\n      const user = await storage.getUser(userIdNum);\n      const username = user?.username || `User #${userIdNum}`;\n      const clientIp = (req.headers[\"x-forwarded-for\"] as string) || req.socket.remoteAddress || undefined;\n      \n      if (type === \"deposit\") {\n        sendPaymentNotification({\n          username,\n          userId: userIdNum,\n          amount,\n          hasSlip: !!slipUrl,\n          ip: clientIp\n        }).catch(err => {\n          console.error(\"Failed to send Telegram notification:\", err);\n        });\n      } else if (type === \"withdrawal\") {\n        sendWithdrawalNotification({\n          username,\n          userId: userIdNum,\n          amount,\n          ip: clientIp\n        }).catch(err => {\n          console.error(\"Failed to send Telegram notification:\", err);\n        });\n      }\n\n      res.json(transaction);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to create transaction\" });\n    }\n  });\n\n  app.post(\"/api/confirm_payment\", async (req, res) => {\n    try {\n      const { user_name = \"ผู้ใช้ไม่ระบุ\", amount = \"ไม่ระบุ\", type = \"ไม่ระบุ\" } = req.body;\n      \n      let action = \"\";\n      if (type === \"deposit\") {\n        action = `👤 ${user_name} โอนเงินเข้า`;\n      } else if (type === \"withdrawal\") {\n        action = `👤 ${user_name} ถอนเงินออก`;\n      } else {\n        action = `👤 ${user_name} ทำรายการ (ประเภท: ${type})`;\n      }\n      \n      const clientIp = req.headers[\"x-forwarded-for\"] || req.socket.remoteAddress || \"ไม่ทราบ\";\n      const timestamp = new Date().toLocaleString(\"th-TH\", { timeZone: \"Asia/Bangkok\" });\n      const message = `🚨 <b>แจ้งเตือนรายการใหม่!</b>\\n${action}\\n💰 จำนวน: ${amount} บาท\\n⏰ เวลา: ${timestamp}\\n📍 IP: ${clientIp}`;\n      \n      const success = await sendTelegramMessage(message);\n      \n      if (success) {\n        res.json({ status: \"success\", message: \"แจ้งเตือนส่งแล้ว!\" });\n      } else {\n        res.status(500).json({ status: \"error\", message: \"ส่งล้มเหลว\" });\n      }\n    } catch (error) {\n      console.error(\"Error:\", error);\n      res.status(500).json({ status: \"error\", message: \"เกิดข้อผิดพลาด\" });\n    }\n  });\n\n  app.patch(\"/api/transactions/:id\", async (req, res) => {\n    try {\n      const id = parseInt(req.params.id, 10);\n      if (isNaN(id)) {\n        return res.status(400).json({ error: \"Invalid ID\" });\n      }\n      const { status } = req.body;\n      if (!status || ![\"approved\", \"rejected\", \"pending\"].includes(status)) {\n        return res.status(400).json({ error: \"Invalid status\" });\n      }\n\n      const allTransactions = await storage.getAllTransactions();\n      const existingTx = allTransactions.find(t => t.id === id);\n      if (!existingTx) {\n        return res.status(404).json({ error: \"Transaction not found\" });\n      }\n\n      if (existingTx.status !== \"pending\") {\n        return res.status(400).json({ error: \"Transaction already processed\" });\n      }\n      \n      const transaction = await storage.updateTransactionStatus(id, status);\n      if (!transaction) {\n        return res.status(404).json({ error: \"Transaction not found\" });\n      }\n\n      if (status === \"approved\" && existingTx.type === \"deposit\") {\n        // เพิ่มเงินฝากให้ผู้ใช้\n        await storage.updateUserBalance(existingTx.userId, existingTx.amount);\n        \n        // โบนัส 10% เมื่อฝากเกิน 100 บาท\n        if (existingTx.amount > 100) {\n          const bonusAmount = Math.floor(existingTx.amount * 0.10);\n          await storage.updateUserBalance(existingTx.userId, bonusAmount);\n          \n          // สร้างรายการธุรกรรมโบนัส (auto approved)\n          await storage.createTransaction({\n            userId: existingTx.userId,\n            type: \"bonus\",\n            amount: bonusAmount,\n            status: \"approved\",\n            slipImage: null,\n            reference: `10% deposit bonus from transaction #${id}`\n          });\n          \n          console.log(`Added 10% bonus (${bonusAmount} baht) to user ${existingTx.userId}`);\n        }\n        \n        // Affiliate ได้ 5% จากยอดฝากของผู้สมัครใหม่\n        const affiliateResult = await storage.updateAffiliateDepositStats(existingTx.userId, existingTx.amount);\n        if (affiliateResult) {\n          // เพิ่มเงินค่าคอมมิชชั่นให้ผู้แนะนำ\n          await storage.updateUserBalance(affiliateResult.referrerId, affiliateResult.commission);\n          \n          // สร้างรายการธุรกรรมค่าคอมมิชชั่น\n          await storage.createTransaction({\n            userId: affiliateResult.referrerId,\n            type: \"affiliate\",\n            amount: affiliateResult.commission,\n            status: \"approved\",\n            slipImage: null,\n            reference: `5% affiliate commission from user #${existingTx.userId} deposit`\n          });\n          \n          console.log(`Added 5% affiliate commission (${affiliateResult.commission} baht) to referrer ${affiliateResult.referrerId}`);\n        }\n      }\n\n      if (status === \"approved\" || status === \"rejected\") {\n        const user = await storage.getUser(existingTx.userId);\n        const username = user?.username || `User #${existingTx.userId}`;\n        \n        sendAdminActionNotification({\n          username,\n          userId: existingTx.userId,\n          transactionType: existingTx.type as 'deposit' | 'withdrawal',\n          amount: existingTx.amount,\n          action: status as 'approved' | 'rejected',\n          transactionId: id\n        }).catch(err => {\n          console.error(\"Failed to send admin action notification:\", err);\n        });\n      }\n\n      res.json(transaction);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to update transaction\" });\n    }\n  });\n\n\n  app.get(\"/api/affiliates/:userId\", async (req, res) => {\n    try {\n      const id = parseInt(req.params.userId, 10);\n      if (isNaN(id)) {\n        return res.status(400).json({ error: \"Invalid user ID\" });\n      }\n      const affiliateList = await storage.getAffiliates(id);\n      res.json(affiliateList);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to fetch affiliates\" });\n    }\n  });\n\n  app.post(\"/api/admin/login\", async (req, res) => {\n    const { username, password } = req.body;\n    if (username === ADMIN_USERNAME && password === ADMIN_PASSWORD) {\n      req.session.isAdmin = true;\n      res.json({ success: true, message: \"Admin login successful\" });\n    } else {\n      res.status(401).json({ error: \"Invalid admin credentials\" });\n    }\n  });\n\n  app.get(\"/api/admin/check\", (req, res) => {\n    res.json({ isAdmin: req.session?.isAdmin === true });\n  });\n\n  app.post(\"/api/admin/logout\", (req, res) => {\n    req.session.isAdmin = false;\n    req.session.destroy((err: any) => {\n      if (err) {\n        return res.status(500).json({ error: \"Logout failed\" });\n      }\n      res.json({ success: true, message: \"Logged out successfully\" });\n    });\n  });\n\n  app.get(\"/api/admin/users\", requireAdmin, async (req, res) => {\n    try {\n      const allUsers = await storage.getAllUsers();\n      const usersWithoutPassword = allUsers.map(({ password: _, ...user }) => user);\n      res.json(usersWithoutPassword);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to fetch users\" });\n    }\n  });\n\n  app.patch(\"/api/admin/users/:id\", requireAdmin, async (req, res) => {\n    try {\n      const id = parseInt(req.params.id, 10);\n      if (isNaN(id)) {\n        return res.status(400).json({ error: \"Invalid ID\" });\n      }\n      const { isBlocked } = req.body;\n      if (typeof isBlocked !== \"boolean\") {\n        return res.status(400).json({ error: \"isBlocked must be a boolean\" });\n      }\n      const user = await storage.updateUserBlockStatus(id, isBlocked);\n      if (!user) {\n        return res.status(404).json({ error: \"User not found\" });\n      }\n      const { password: _, ...userWithoutPassword } = user;\n      res.json(userWithoutPassword);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to update user\" });\n    }\n  });\n\n  app.get(\"/api/admin/stats\", requireAdmin, async (req, res) => {\n    try {\n      const allUsers = await storage.getAllUsers();\n      const allBets = await storage.getBets();\n      const allTransactions = await storage.getAllTransactions();\n      const allAffiliates = await storage.getAllAffiliates();\n\n      const pendingDeposits = allTransactions.filter(\n        (t) => t.type === \"deposit\" && t.status === \"pending\"\n      );\n      const approvedDeposits = allTransactions.filter(\n        (t) => t.type === \"deposit\" && t.status === \"approved\"\n      );\n      const totalDeposits = approvedDeposits.reduce((sum, t) => sum + t.amount, 0);\n\n      const totalBetAmount = allBets.reduce((sum, b) => sum + b.amount, 0);\n      const pendingBets = allBets.filter((b) => b.status === \"pending\");\n      const wonBets = allBets.filter((b) => b.status === \"won\");\n      const lostBets = allBets.filter((b) => b.status === \"lost\");\n\n      const totalAffiliateCommission = allAffiliates.reduce((sum, a) => sum + a.commission, 0);\n\n      res.json({\n        users: {\n          total: allUsers.length,\n          blocked: allUsers.filter((u) => u.isBlocked).length,\n          active: allUsers.filter((u) => !u.isBlocked).length,\n        },\n        bets: {\n          total: allBets.length,\n          pending: pendingBets.length,\n          won: wonBets.length,\n          lost: lostBets.length,\n          totalAmount: totalBetAmount,\n        },\n        transactions: {\n          pendingDeposits: pendingDeposits.length,\n          totalDeposits,\n        },\n        affiliates: {\n          total: allAffiliates.length,\n          totalCommission: totalAffiliateCommission,\n        },\n      });\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to fetch stats\" });\n    }\n  });\n\n  app.get(\"/api/lottery-results\", async (req, res) => {\n    try {\n      const results = await storage.getAllLotteryResults();\n      res.json(results);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to fetch lottery results\" });\n    }\n  });\n\n  app.post(\"/api/lottery-results\", async (req, res) => {\n    try {\n      const { lotteryType, drawDate, firstPrize, threeDigitTop, threeDigitBottom, \n              twoDigitTop, twoDigitBottom, runTop, runBottom } = req.body;\n      \n      if (!lotteryType || !drawDate) {\n        return res.status(400).json({ error: \"Missing required fields (lotteryType, drawDate)\" });\n      }\n\n      const existing = await storage.getLotteryResult(lotteryType, drawDate);\n      if (existing) {\n        return res.status(400).json({ error: \"Result already exists for this lottery and date\" });\n      }\n\n      const result = await storage.createLotteryResult({\n        lotteryType,\n        drawDate,\n        firstPrize: firstPrize || null,\n        threeDigitTop: threeDigitTop || null,\n        threeDigitBottom: threeDigitBottom || null,\n        twoDigitTop: twoDigitTop || null,\n        twoDigitBottom: twoDigitBottom || null,\n        runTop: runTop || null,\n        runBottom: runBottom || null,\n        isProcessed: false,\n      });\n\n      res.json(result);\n    } catch (error) {\n      console.error(\"Error creating lottery result:\", error);\n      res.status(500).json({ error: \"Failed to create lottery result\" });\n    }\n  });\n\n  // ตรวจสอบหวยถูกรางวัล - 9 ประเภทสำหรับหวยไทย\n  // รองรับทั้งเลขเดี่ยวและเลขชุด (comma-separated)\n  function checkBetWin(bet: { betType: string; numbers: string }, result: {\n    firstPrize?: string | null;\n    threeDigitTop?: string | null;\n    threeDigitBottom?: string | null;\n    twoDigitTop?: string | null;\n    twoDigitBottom?: string | null;\n    runTop?: string | null;\n    runBottom?: string | null;\n  }): boolean {\n    const firstPrize = result.firstPrize;\n    \n    // ถ้าไม่มี firstPrize และเป็น bet type ที่ต้องใช้ firstPrize ให้ return false\n    if (!firstPrize || firstPrize.length < 2) {\n      // TWO_BOTTOM และ RUN_BOTTOM ไม่ต้องใช้ firstPrize\n      if (bet.betType !== \"TWO_BOTTOM\" && bet.betType !== \"RUN_BOTTOM\") {\n        return false;\n      }\n    }\n    \n    // แยกเลขที่ซื้อ (รองรับ comma-separated สำหรับหวยชุด)\n    const betNumbers = bet.numbers.split(\",\").map(n => n.trim()).filter(n => n.length > 0);\n    \n    // ตรวจสอบแต่ละเลขในชุด - ถ้ามีเลขใดถูกก็ถือว่าถูกรางวัล\n    for (const betNumber of betNumbers) {\n      let isWin = false;\n      \n      switch (bet.betType) {\n        // 2 ตัวบน: 2 ตัวท้ายของรางวัลที่ 1 (461252 → 52)\n        case \"TWO_TOP\":\n          isWin = betNumber === firstPrize?.slice(-2);\n          break;\n        \n        // 2 ตัวล่าง: รางวัลเลขท้าย 2 ตัว (รางวัลแยก เช่น 22)\n        case \"TWO_BOTTOM\":\n          isWin = betNumber === result.twoDigitBottom;\n          break;\n        \n        // 3 ตัวตรง: 3 ตัวท้ายของรางวัลที่ 1 (461252 → 252)\n        case \"THREE_TOP\":\n          isWin = betNumber === firstPrize?.slice(-3);\n          break;\n        \n        // 3 ตัวโต๊ด: สลับตำแหน่งได้ (252, 225, 522, ...)\n        case \"THREE_TOD\": {\n          const lastThree = firstPrize?.slice(-3);\n          if (lastThree && lastThree.length === 3 && betNumber.length === 3) {\n            const sortedBet = betNumber.split(\"\").sort().join(\"\");\n            const sortedResult = lastThree.split(\"\").sort().join(\"\");\n            isWin = sortedBet === sortedResult;\n          }\n          break;\n        }\n        \n        // 4 ตัวบน: 4 ตัวท้ายของรางวัลที่ 1 (461252 → 1252)\n        case \"FOUR_TOP\":\n          isWin = betNumber === firstPrize?.slice(-4);\n          break;\n        \n        // 5 ตัวบน: 5 ตัวท้ายของรางวัลที่ 1 (461252 → 61252)\n        case \"FIVE_TOP\":\n          isWin = betNumber === firstPrize?.slice(-5);\n          break;\n        \n        // วิ่งบน (เลขลอยบน): ซื้อ 1 ตัว ถ้าอยู่ใน 3 ตัวบน (252 → 2, 5 ถูก)\n        case \"RUN_TOP\": {\n          const lastThree = firstPrize?.slice(-3);\n          if (lastThree && betNumber.length === 1) {\n            isWin = lastThree.includes(betNumber);\n          }\n          break;\n        }\n        \n        // วิ่งล่าง (เลขลอยล่าง): ซื้อ 1 ตัว ถ้าอยู่ใน 2 ตัวล่าง (22 → 2 ถูก)\n        case \"RUN_BOTTOM\": {\n          const bottomTwo = result.twoDigitBottom;\n          if (bottomTwo && betNumber.length === 1) {\n            isWin = bottomTwo.includes(betNumber);\n          }\n          break;\n        }\n        \n        // เลขกลับ 2 ตัวบน: ซื้อ 52 ถ้าผล 52 หรือ 25 ก็ถูก\n        case \"REVERSE\": {\n          const lastTwo = firstPrize?.slice(-2);\n          if (lastTwo && lastTwo.length === 2 && betNumber.length === 2) {\n            const reversedBet = betNumber.split(\"\").reverse().join(\"\");\n            isWin = betNumber === lastTwo || reversedBet === lastTwo;\n          }\n          break;\n        }\n        \n        default:\n          isWin = false;\n      }\n      \n      // ถ้ามีเลขใดถูก ให้ return true ทันที\n      if (isWin) {\n        return true;\n      }\n    }\n    \n    return false;\n  }\n\n  function getPermutations(str: string): string[] {\n    if (str.length <= 1) return [str];\n    const result: string[] = [];\n    for (let i = 0; i < str.length; i++) {\n      const char = str[i];\n      const remaining = str.slice(0, i) + str.slice(i + 1);\n      const perms = getPermutations(remaining);\n      for (const perm of perms) {\n        result.push(char + perm);\n      }\n    }\n    return Array.from(new Set(result));\n  }\n\n  // ฟังก์ชันตรวจสอบว่า bet type นี้ต้องใช้ field ใดของผลหวย\n  function canProcessBet(betType: string, result: {\n    firstPrize?: string | null;\n    twoDigitBottom?: string | null;\n  }): { canProcess: boolean; reason?: string } {\n    // bet types ที่ต้องใช้ firstPrize\n    const needsFirstPrize = [\"TWO_TOP\", \"THREE_TOP\", \"THREE_TOD\", \"FOUR_TOP\", \"FIVE_TOP\", \"RUN_TOP\", \"REVERSE\"];\n    // bet types ที่ต้องใช้ twoDigitBottom\n    const needsTwoDigitBottom = [\"TWO_BOTTOM\", \"RUN_BOTTOM\"];\n    \n    if (needsFirstPrize.includes(betType)) {\n      if (!result.firstPrize || result.firstPrize.length < 5) {\n        return { canProcess: false, reason: \"Missing or invalid firstPrize\" };\n      }\n    }\n    \n    if (needsTwoDigitBottom.includes(betType)) {\n      if (!result.twoDigitBottom || result.twoDigitBottom.length !== 2) {\n        return { canProcess: false, reason: \"Missing or invalid twoDigitBottom\" };\n      }\n    }\n    \n    return { canProcess: true };\n  }\n\n  app.post(\"/api/lottery-results/:id/process\", async (req, res) => {\n    try {\n      const id = parseInt(req.params.id, 10);\n      if (isNaN(id)) {\n        return res.status(400).json({ error: \"Invalid ID\" });\n      }\n\n      const allResults = await storage.getAllLotteryResults();\n      const lotteryResult = allResults.find(r => r.id === id);\n      \n      if (!lotteryResult) {\n        return res.status(404).json({ error: \"Lottery result not found\" });\n      }\n\n      if (lotteryResult.isProcessed) {\n        return res.status(400).json({ error: \"Result already processed\" });\n      }\n      \n      // ตรวจสอบว่าผลหวยมีข้อมูลครบ (อย่างน้อยต้องมี firstPrize)\n      if (!lotteryResult.firstPrize || lotteryResult.firstPrize.length < 5) {\n        return res.status(400).json({ \n          error: \"Cannot process: lottery result is incomplete (missing firstPrize)\" \n        });\n      }\n\n      const pendingBets = await storage.getBetsByLotteryAndDate(\n        lotteryResult.lotteryType, \n        lotteryResult.drawDate\n      );\n\n      let wonCount = 0;\n      let lostCount = 0;\n      let skippedCount = 0;\n      let totalWinnings = 0;\n\n      for (const bet of pendingBets) {\n        // ตรวจสอบว่า bet นี้สามารถประมวลผลได้หรือไม่\n        const { canProcess, reason } = canProcessBet(bet.betType, lotteryResult);\n        \n        if (!canProcess) {\n          // ข้าม bet ที่ไม่สามารถประมวลผลได้ (ยังคง pending)\n          console.log(`Skipping bet ${bet.id} (${bet.betType}): ${reason}`);\n          skippedCount++;\n          continue;\n        }\n        \n        const isWinner = checkBetWin(bet, lotteryResult);\n        \n        if (isWinner) {\n          await storage.updateBetStatus(bet.id, \"won\");\n          const winAmount = bet.potentialWin;\n          await storage.updateUserBalance(bet.userId, winAmount);\n          totalWinnings += winAmount;\n          wonCount++;\n        } else {\n          await storage.updateBetStatus(bet.id, \"lost\");\n          lostCount++;\n        }\n      }\n\n      await storage.updateLotteryResultProcessed(id);\n\n      res.json({\n        success: true,\n        processed: wonCount + lostCount,\n        won: wonCount,\n        lost: lostCount,\n        skipped: skippedCount,\n        totalWinnings\n      });\n    } catch (error) {\n      console.error(\"Error processing lottery result:\", error);\n      res.status(500).json({ error: \"Failed to process lottery result\" });\n    }\n  });\n\n  const stockSymbols: Record<string, { symbol: string; name: string }> = {\n    STOCK_NIKKEI: { symbol: \"^N225\", name: \"Nikkei 225\" },\n    STOCK_DOW: { symbol: \"^DJI\", name: \"Dow Jones\" },\n    STOCK_FTSE: { symbol: \"^FTSE\", name: \"FTSE 100\" },\n    STOCK_DAX: { symbol: \"^GDAXI\", name: \"DAX\" },\n    THAI_STOCK: { symbol: \"^SET.BK\", name: \"SET Index\" }\n  };\n\n  app.get(\"/api/stock-data/:type\", async (req, res) => {\n    try {\n      const { type } = req.params;\n      const stockInfo = stockSymbols[type];\n      \n      if (!stockInfo) {\n        return res.status(400).json({ error: \"Invalid stock type\" });\n      }\n\n      const yahooUrl = `https://query1.finance.yahoo.com/v8/finance/chart/${encodeURIComponent(stockInfo.symbol)}?interval=1d&range=5d`;\n      \n      const response = await fetch(yahooUrl, {\n        headers: {\n          \"User-Agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36\"\n        }\n      });\n\n      if (!response.ok) {\n        throw new Error(`Yahoo Finance API error: ${response.status}`);\n      }\n\n      const data = await response.json();\n      const result = data.chart?.result?.[0];\n      \n      if (!result) {\n        return res.status(404).json({ error: \"No data available\" });\n      }\n\n      const meta = result.meta;\n      const timestamps = result.timestamp || [];\n      const closes = result.indicators?.quote?.[0]?.close || [];\n      \n      const latestClose = closes.filter((c: number | null) => c !== null).pop() || meta.regularMarketPrice;\n      const previousClose = meta.previousClose || meta.chartPreviousClose;\n      const change = latestClose - previousClose;\n      const changePercent = (change / previousClose) * 100;\n\n      const latestTimestamp = timestamps[timestamps.length - 1];\n      const date = latestTimestamp ? new Date(latestTimestamp * 1000).toISOString() : new Date().toISOString();\n\n      const formattedPrice = latestClose.toFixed(2);\n      const twoDigit = formattedPrice.replace(\".\", \"\").slice(-2);\n      const threeDigit = formattedPrice.replace(\".\", \"\").slice(-3);\n\n      res.json({\n        type,\n        name: stockInfo.name,\n        symbol: stockInfo.symbol,\n        price: latestClose,\n        formattedPrice,\n        previousClose,\n        change: change.toFixed(2),\n        changePercent: changePercent.toFixed(2),\n        twoDigit,\n        threeDigit,\n        date,\n        currency: meta.currency || \"JPY\",\n        exchangeName: meta.exchangeName || \"Unknown\",\n        marketState: meta.marketState || \"CLOSED\",\n        externalUrl: type === \"STOCK_NIKKEI\" \n          ? \"https://www.investing.com/indices/japan-ni225\"\n          : type === \"STOCK_DOW\"\n          ? \"https://www.investing.com/indices/us-30\"\n          : type === \"STOCK_FTSE\"\n          ? \"https://www.investing.com/indices/uk-100\"\n          : type === \"STOCK_DAX\"\n          ? \"https://www.investing.com/indices/germany-30\"\n          : \"https://www.set.or.th/th/market/index/set/overview\"\n      });\n    } catch (error) {\n      console.error(\"Error fetching stock data:\", error);\n      res.status(500).json({ error: \"Failed to fetch stock data\" });\n    }\n  });\n\n  app.get(\"/api/hanoi-lottery\", async (req, res) => {\n    try {\n      const response = await fetch(\n        \"https://raw.githubusercontent.com/khiemdoan/vietnam-lottery-xsmb-analysis/refs/heads/main/data/xsmb.json\",\n        {\n          headers: {\n            \"User-Agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36\"\n          }\n        }\n      );\n\n      if (!response.ok) {\n        throw new Error(`GitHub API error: ${response.status}`);\n      }\n\n      const data = await response.json();\n      \n      if (!Array.isArray(data) || data.length === 0) {\n        return res.status(404).json({ error: \"No data available\" });\n      }\n\n      const latest = data[data.length - 1];\n      \n      const firstPrize = String(latest.prize1 || \"\");\n      const twoDigit = firstPrize.slice(-2);\n      const threeDigit = firstPrize.slice(-3);\n\n      const g7 = [\n        String(latest.prize7_1 || \"\"),\n        String(latest.prize7_2 || \"\"),\n        String(latest.prize7_3 || \"\"),\n        String(latest.prize7_4 || \"\")\n      ].filter(n => n);\n\n      res.json({\n        date: latest.date,\n        firstPrize,\n        twoDigit,\n        threeDigit,\n        prizes: {\n          special: firstPrize,\n          g1: [String(latest.prize2_1 || \"\"), String(latest.prize2_2 || \"\")].filter(n => n),\n          g2: [],\n          g3: [\n            String(latest.prize3_1 || \"\"), String(latest.prize3_2 || \"\"), \n            String(latest.prize3_3 || \"\"), String(latest.prize3_4 || \"\"),\n            String(latest.prize3_5 || \"\"), String(latest.prize3_6 || \"\")\n          ].filter(n => n),\n          g4: [\n            String(latest.prize4_1 || \"\"), String(latest.prize4_2 || \"\"),\n            String(latest.prize4_3 || \"\"), String(latest.prize4_4 || \"\")\n          ].filter(n => n),\n          g5: [\n            String(latest.prize5_1 || \"\"), String(latest.prize5_2 || \"\"),\n            String(latest.prize5_3 || \"\"), String(latest.prize5_4 || \"\"),\n            String(latest.prize5_5 || \"\"), String(latest.prize5_6 || \"\")\n          ].filter(n => n),\n          g6: [\n            String(latest.prize6_1 || \"\"), String(latest.prize6_2 || \"\"),\n            String(latest.prize6_3 || \"\")\n          ].filter(n => n),\n          g7\n        },\n        isLive: true,\n        source: \"Vietnam XSMB Daily Data\"\n      });\n    } catch (error) {\n      console.error(\"Error fetching Hanoi lottery data:\", error);\n      res.status(500).json({ error: \"Failed to fetch Hanoi lottery data\" });\n    }\n  });\n\n  app.get(\"/api/stock-data\", async (req, res) => {\n    try {\n      const results: Record<string, any> = {};\n      \n      for (const [type, stockInfo] of Object.entries(stockSymbols)) {\n        try {\n          const yahooUrl = `https://query1.finance.yahoo.com/v8/finance/chart/${encodeURIComponent(stockInfo.symbol)}?interval=1d&range=1d`;\n          \n          const response = await fetch(yahooUrl, {\n            headers: {\n              \"User-Agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36\"\n            }\n          });\n\n          if (response.ok) {\n            const data = await response.json();\n            const result = data.chart?.result?.[0];\n            \n            if (result) {\n              const meta = result.meta;\n              const closes = result.indicators?.quote?.[0]?.close || [];\n              const latestClose = closes.filter((c: number | null) => c !== null).pop() || meta.regularMarketPrice;\n              const previousClose = meta.previousClose || meta.chartPreviousClose;\n              const change = latestClose - previousClose;\n              const changePercent = (change / previousClose) * 100;\n\n              const formattedPrice = latestClose.toFixed(2);\n\n              results[type] = {\n                name: stockInfo.name,\n                symbol: stockInfo.symbol,\n                price: latestClose,\n                formattedPrice,\n                change: change.toFixed(2),\n                changePercent: changePercent.toFixed(2),\n                twoDigit: formattedPrice.replace(\".\", \"\").slice(-2),\n                threeDigit: formattedPrice.replace(\".\", \"\").slice(-3),\n                marketState: meta.marketState || \"CLOSED\"\n              };\n            }\n          }\n        } catch (err) {\n          console.error(`Error fetching ${type}:`, err);\n        }\n      }\n\n      res.json(results);\n    } catch (error) {\n      console.error(\"Error fetching all stock data:\", error);\n      res.status(500).json({ error: \"Failed to fetch stock data\" });\n    }\n  });\n\n  app.get(\"/api/payout-rates\", async (req, res) => {\n    try {\n      const settings = await storage.getPayoutSettings();\n      if (settings.length === 0) {\n        await storage.initializePayoutRates();\n        const initializedSettings = await storage.getPayoutSettings();\n        return res.json(initializedSettings);\n      }\n      res.json(settings);\n    } catch (error) {\n      console.error(\"Error fetching payout rates:\", error);\n      res.status(500).json({ error: \"Failed to fetch payout rates\" });\n    }\n  });\n\n  app.patch(\"/api/payout-rates/:betType\", requireAdmin, async (req, res) => {\n    try {\n      const { betType } = req.params;\n      const { rate } = req.body;\n      \n      const validBetTypes = [\n        \"TWO_TOP\", \"TWO_BOTTOM\", \"THREE_TOP\", \"THREE_TOD\",\n        \"FOUR_TOP\", \"FIVE_TOP\", \"RUN_TOP\", \"RUN_BOTTOM\", \"REVERSE\"\n      ];\n      \n      if (!validBetTypes.includes(betType)) {\n        return res.status(400).json({ error: \"Invalid bet type\" });\n      }\n      \n      if (typeof rate !== \"number\" || isNaN(rate)) {\n        return res.status(400).json({ error: \"Rate must be a valid number\" });\n      }\n      \n      if (rate <= 0) {\n        return res.status(400).json({ error: \"Rate must be greater than 0\" });\n      }\n      \n      if (rate > 10000) {\n        return res.status(400).json({ error: \"Rate must not exceed 10000\" });\n      }\n      \n      const updated = await storage.updatePayoutRate(betType, rate);\n      res.json(updated);\n    } catch (error) {\n      console.error(\"Error updating payout rate:\", error);\n      res.status(500).json({ error: \"Failed to update payout rate\" });\n    }\n  });\n\n  app.get(\"/api/bet-type-settings\", async (req, res) => {\n    try {\n      const settings = await storage.getBetTypeSettings();\n      if (settings.length === 0) {\n        await storage.initializeBetTypeSettings();\n        const initializedSettings = await storage.getBetTypeSettings();\n        return res.json(initializedSettings);\n      }\n      res.json(settings);\n    } catch (error) {\n      console.error(\"Error fetching bet type settings:\", error);\n      res.status(500).json({ error: \"Failed to fetch bet type settings\" });\n    }\n  });\n\n  app.patch(\"/api/bet-type-settings/:betType\", requireAdmin, async (req, res) => {\n    try {\n      const { betType } = req.params;\n      const { isEnabled } = req.body;\n      \n      const validBetTypes = [\n        \"TWO_TOP\", \"TWO_BOTTOM\", \"THREE_TOP\", \"THREE_TOD\",\n        \"FOUR_TOP\", \"FIVE_TOP\", \"RUN_TOP\", \"RUN_BOTTOM\", \"REVERSE\"\n      ];\n      \n      if (!validBetTypes.includes(betType)) {\n        return res.status(400).json({ error: \"Invalid bet type\" });\n      }\n      \n      if (typeof isEnabled !== \"boolean\") {\n        return res.status(400).json({ error: \"isEnabled must be a boolean\" });\n      }\n      \n      const updated = await storage.updateBetTypeSetting(betType, isEnabled);\n      res.json(updated);\n    } catch (error) {\n      console.error(\"Error updating bet type setting:\", error);\n      res.status(500).json({ error: \"Failed to update bet type setting\" });\n    }\n  });\n\n  await storage.initializePayoutRates();\n  await storage.initializeBetTypeSettings();\n\n  return httpServer;\n}\n","path":null,"size_bytes":45474,"size_tokens":null},"client/src/components/BetTypeSelector.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { betTypeNames, payoutRates, type BetType } from \"@shared/schema\";\nimport { useI18n } from \"@/lib/i18n\";\n\ninterface BetTypeSelectorProps {\n  selectedType: BetType | null;\n  onSelect: (type: BetType) => void;\n}\n\nconst betTypeCategories = {\n  twoDigit: [\"TWO_TOP\", \"TWO_BOTTOM\", \"REVERSE\"] as BetType[],\n  threeDigit: [\"THREE_TOP\", \"THREE_TOD\"] as BetType[],\n  fourFiveDigit: [\"FOUR_TOP\", \"FIVE_TOP\"] as BetType[],\n  running: [\"RUN_TOP\", \"RUN_BOTTOM\"] as BetType[]\n};\n\nexport function BetTypeSelector({ selectedType, onSelect }: BetTypeSelectorProps) {\n  const { language, t } = useI18n();\n\n  const renderBetType = (type: BetType) => {\n    const name = betTypeNames[type][language];\n    const rate = payoutRates[type];\n    const isSelected = selectedType === type;\n\n    return (\n      <Card\n        key={type}\n        className={`cursor-pointer transition-all duration-200 hover-elevate ${\n          isSelected \n            ? \"ring-2 ring-primary border-primary bg-primary/5\" \n            : \"border-border\"\n        }`}\n        onClick={() => onSelect(type)}\n        data-testid={`card-bet-type-${type}`}\n      >\n        <CardContent className=\"p-3 flex items-center justify-between gap-2\">\n          <div className=\"flex items-center gap-2\">\n            {isSelected && (\n              <div className=\"h-2 w-2 rounded-full bg-primary animate-pulse\" />\n            )}\n            <span className=\"font-medium text-sm\">{name}</span>\n          </div>\n          <Badge variant=\"secondary\" className=\"text-xs font-bold\">\n            x{rate}\n          </Badge>\n        </CardContent>\n      </Card>\n    );\n  };\n\n  return (\n    <div className=\"space-y-4\">\n      <div>\n        <h4 className=\"text-sm font-semibold text-muted-foreground mb-2\">\n          {language === \"th\" ? \"2 ตัว\" : \"2 Digits\"}\n        </h4>\n        <div className=\"grid grid-cols-3 gap-2\">\n          {betTypeCategories.twoDigit.map(renderBetType)}\n        </div>\n      </div>\n\n      <div>\n        <h4 className=\"text-sm font-semibold text-muted-foreground mb-2\">\n          {language === \"th\" ? \"3 ตัว\" : \"3 Digits\"}\n        </h4>\n        <div className=\"grid grid-cols-2 gap-2\">\n          {betTypeCategories.threeDigit.map(renderBetType)}\n        </div>\n      </div>\n\n      <div>\n        <h4 className=\"text-sm font-semibold text-muted-foreground mb-2\">\n          {language === \"th\" ? \"4-5 ตัว\" : \"4-5 Digits\"}\n        </h4>\n        <div className=\"grid grid-cols-2 gap-2\">\n          {betTypeCategories.fourFiveDigit.map(renderBetType)}\n        </div>\n      </div>\n\n      <div>\n        <h4 className=\"text-sm font-semibold text-muted-foreground mb-2\">\n          {language === \"th\" ? \"วิ่ง (เลขลอย)\" : \"Running\"}\n        </h4>\n        <div className=\"grid grid-cols-2 gap-2\">\n          {betTypeCategories.running.map(renderBetType)}\n        </div>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":2985,"size_tokens":null},"server/vite.ts":{"content":"import { type Express } from \"express\";\nimport { createServer as createViteServer, createLogger } from \"vite\";\nimport { type Server } from \"http\";\nimport viteConfig from \"../vite.config\";\nimport fs from \"fs\";\nimport path from \"path\";\nimport { nanoid } from \"nanoid\";\n\nconst viteLogger = createLogger();\n\nexport async function setupVite(server: Server, app: Express) {\n  const serverOptions = {\n    middlewareMode: true,\n    hmr: { server, path: \"/vite-hmr\" },\n    allowedHosts: true as const,\n  };\n\n  const vite = await createViteServer({\n    ...viteConfig,\n    configFile: false,\n    customLogger: {\n      ...viteLogger,\n      error: (msg, options) => {\n        viteLogger.error(msg, options);\n        process.exit(1);\n      },\n    },\n    server: serverOptions,\n    appType: \"custom\",\n  });\n\n  app.use(vite.middlewares);\n\n  app.use(\"*\", async (req, res, next) => {\n    const url = req.originalUrl;\n\n    try {\n      const clientTemplate = path.resolve(\n        import.meta.dirname,\n        \"..\",\n        \"client\",\n        \"index.html\",\n      );\n\n      // always reload the index.html file from disk incase it changes\n      let template = await fs.promises.readFile(clientTemplate, \"utf-8\");\n      template = template.replace(\n        `src=\"/src/main.tsx\"`,\n        `src=\"/src/main.tsx?v=${nanoid()}\"`,\n      );\n      const page = await vite.transformIndexHtml(url, template);\n      res.status(200).set({ \"Content-Type\": \"text/html\" }).end(page);\n    } catch (e) {\n      vite.ssrFixStacktrace(e as Error);\n      next(e);\n    }\n  });\n}\n","path":null,"size_bytes":1534,"size_tokens":null},"client/src/App.tsx":{"content":"import { Switch, Route } from \"wouter\";\nimport { queryClient } from \"./lib/queryClient\";\nimport { QueryClientProvider } from \"@tanstack/react-query\";\nimport { Toaster } from \"@/components/ui/toaster\";\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\nimport { SidebarProvider, SidebarTrigger, SidebarInset } from \"@/components/ui/sidebar\";\nimport { ThemeProvider } from \"@/components/ThemeProvider\";\nimport { ThemeToggle } from \"@/components/ThemeToggle\";\nimport { LanguageToggle } from \"@/components/LanguageToggle\";\nimport { CartSheet } from \"@/components/CartSheet\";\nimport { AppSidebar } from \"@/components/AppSidebar\";\nimport { Logo } from \"@/components/Logo\";\n\nimport Home from \"@/pages/Home\";\nimport Results from \"@/pages/Results\";\nimport Affiliate from \"@/pages/Affiliate\";\nimport Profile from \"@/pages/Profile\";\nimport Wallet from \"@/pages/Wallet\";\nimport SetCalculator from \"@/pages/SetCalculator\";\nimport Admin from \"@/pages/Admin\";\nimport AdminLogin from \"@/pages/AdminLogin\";\nimport Login from \"@/pages/Login\";\nimport Register from \"@/pages/Register\";\nimport NotFound from \"@/pages/not-found\";\n\nfunction AppLayout({ children }: { children: React.ReactNode }) {\n  const style = {\n    \"--sidebar-width\": \"16rem\",\n    \"--sidebar-width-icon\": \"3rem\",\n  };\n\n  return (\n    <SidebarProvider style={style as React.CSSProperties}>\n      <div className=\"flex min-h-screen w-full\">\n        <AppSidebar />\n        <SidebarInset className=\"flex flex-col flex-1\">\n          <header className=\"flex h-14 items-center justify-between gap-2 px-4 border-b border-border bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 sticky top-0 z-50\">\n            <div className=\"flex items-center gap-2\">\n              <SidebarTrigger data-testid=\"button-sidebar-toggle\" />\n              <div className=\"md:hidden\">\n                <Logo size=\"sm\" showText={false} />\n              </div>\n            </div>\n            <div className=\"flex items-center gap-1\">\n              <CartSheet />\n              <ThemeToggle />\n              <LanguageToggle />\n            </div>\n          </header>\n          <main className=\"flex-1 overflow-auto bg-background\">\n            {children}\n          </main>\n        </SidebarInset>\n      </div>\n    </SidebarProvider>\n  );\n}\n\nfunction AuthLayout({ children }: { children: React.ReactNode }) {\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <div className=\"absolute top-4 right-4 flex items-center gap-2\">\n        <ThemeToggle />\n        <LanguageToggle />\n      </div>\n      {children}\n    </div>\n  );\n}\n\nfunction Router() {\n  return (\n    <Switch>\n      <Route path=\"/\" component={() => <AppLayout><Home /></AppLayout>} />\n      <Route path=\"/results\" component={() => <AppLayout><Results /></AppLayout>} />\n      <Route path=\"/affiliate\" component={() => <AppLayout><Affiliate /></AppLayout>} />\n      <Route path=\"/profile\" component={() => <AppLayout><Profile /></AppLayout>} />\n      <Route path=\"/wallet\" component={() => <AppLayout><Wallet /></AppLayout>} />\n      <Route path=\"/calculator\" component={() => <AppLayout><SetCalculator /></AppLayout>} />\n      <Route path=\"/admin\" component={() => <AppLayout><Admin /></AppLayout>} />\n      <Route path=\"/admin/login\" component={() => <AuthLayout><AdminLogin /></AuthLayout>} />\n      <Route path=\"/login\" component={() => <AuthLayout><Login /></AuthLayout>} />\n      <Route path=\"/register\" component={() => <AuthLayout><Register /></AuthLayout>} />\n      <Route component={NotFound} />\n    </Switch>\n  );\n}\n\nfunction App() {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <ThemeProvider defaultTheme=\"dark\">\n        <TooltipProvider>\n          <Toaster />\n          <Router />\n        </TooltipProvider>\n      </ThemeProvider>\n    </QueryClientProvider>\n  );\n}\n\nexport default App;\n","path":null,"size_bytes":3834,"size_tokens":null},"client/src/components/ui/accordion.tsx":{"content":"import * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\n\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n","path":null,"size_bytes":1977,"size_tokens":null},"client/src/components/ui/input-otp.tsx":{"content":"import * as React from \"react\"\nimport { OTPInput, OTPInputContext } from \"input-otp\"\nimport { Dot } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst InputOTP = React.forwardRef<\n  React.ElementRef<typeof OTPInput>,\n  React.ComponentPropsWithoutRef<typeof OTPInput>\n>(({ className, containerClassName, ...props }, ref) => (\n  <OTPInput\n    ref={ref}\n    containerClassName={cn(\n      \"flex items-center gap-2 has-[:disabled]:opacity-50\",\n      containerClassName\n    )}\n    className={cn(\"disabled:cursor-not-allowed\", className)}\n    {...props}\n  />\n))\nInputOTP.displayName = \"InputOTP\"\n\nconst InputOTPGroup = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex items-center\", className)} {...props} />\n))\nInputOTPGroup.displayName = \"InputOTPGroup\"\n\nconst InputOTPSlot = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\"> & { index: number }\n>(({ index, className, ...props }, ref) => {\n  const inputOTPContext = React.useContext(OTPInputContext)\n  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index]\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md\",\n        isActive && \"z-10 ring-2 ring-ring ring-offset-background\",\n        className\n      )}\n      {...props}\n    >\n      {char}\n      {hasFakeCaret && (\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n          <div className=\"h-4 w-px animate-caret-blink bg-foreground duration-1000\" />\n        </div>\n      )}\n    </div>\n  )\n})\nInputOTPSlot.displayName = \"InputOTPSlot\"\n\nconst InputOTPSeparator = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ ...props }, ref) => (\n  <div ref={ref} role=\"separator\" {...props}>\n    <Dot />\n  </div>\n))\nInputOTPSeparator.displayName = \"InputOTPSeparator\"\n\nexport { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }\n","path":null,"size_bytes":2154,"size_tokens":null},"client/src/components/ui/pagination.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { ButtonProps, buttonVariants } from \"@/components/ui/button\"\n\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\n  <nav\n    role=\"navigation\"\n    aria-label=\"pagination\"\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\n    {...props}\n  />\n)\nPagination.displayName = \"Pagination\"\n\nconst PaginationContent = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    className={cn(\"flex flex-row items-center gap-1\", className)}\n    {...props}\n  />\n))\nPaginationContent.displayName = \"PaginationContent\"\n\nconst PaginationItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li ref={ref} className={cn(\"\", className)} {...props} />\n))\nPaginationItem.displayName = \"PaginationItem\"\n\ntype PaginationLinkProps = {\n  isActive?: boolean\n} & Pick<ButtonProps, \"size\"> &\n  React.ComponentProps<\"a\">\n\nconst PaginationLink = ({\n  className,\n  isActive,\n  size = \"icon\",\n  ...props\n}: PaginationLinkProps) => (\n  <a\n    aria-current={isActive ? \"page\" : undefined}\n    className={cn(\n      buttonVariants({\n        variant: isActive ? \"outline\" : \"ghost\",\n        size,\n      }),\n      className\n    )}\n    {...props}\n  />\n)\nPaginationLink.displayName = \"PaginationLink\"\n\nconst PaginationPrevious = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to previous page\"\n    size=\"default\"\n    className={cn(\"gap-1 pl-2.5\", className)}\n    {...props}\n  >\n    <ChevronLeft className=\"h-4 w-4\" />\n    <span>Previous</span>\n  </PaginationLink>\n)\nPaginationPrevious.displayName = \"PaginationPrevious\"\n\nconst PaginationNext = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to next page\"\n    size=\"default\"\n    className={cn(\"gap-1 pr-2.5\", className)}\n    {...props}\n  >\n    <span>Next</span>\n    <ChevronRight className=\"h-4 w-4\" />\n  </PaginationLink>\n)\nPaginationNext.displayName = \"PaginationNext\"\n\nconst PaginationEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    aria-hidden\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More pages</span>\n  </span>\n)\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationEllipsis,\n  PaginationItem,\n  PaginationLink,\n  PaginationNext,\n  PaginationPrevious,\n}\n","path":null,"size_bytes":2751,"size_tokens":null},"design_guidelines.md":{"content":"# QNQ Lottery Design Guidelines\n\n## Design Approach\n\n**Reference-Based Approach**: Draw inspiration from premium financial platforms (Revolut, Wise) and established Asian betting platforms for trustworthiness and clarity. Emphasize professional credibility through clean layouts, clear hierarchy, and premium details while maintaining operational simplicity.\n\n**Core Principles**:\n- Premium credibility through refined details, not decoration\n- Information clarity over visual complexity\n- Fast-loading, lightweight components\n- Mobile-first responsive design\n\n---\n\n## Typography System\n\n**Font Stack**: Use Google Fonts CDN\n- **Primary**: Inter (Latin characters) - 400, 500, 600, 700\n- **Thai Support**: Noto Sans Thai - 400, 500, 600, 700\n- **Accent/Logo**: Urbanist Bold - 700, 800\n\n**Type Scale**:\n- **Hero/Logo**: text-4xl to text-6xl, font-bold (800)\n- **Page Titles**: text-3xl to text-4xl, font-bold (700)\n- **Section Headers**: text-2xl to text-3xl, font-semibold (600)\n- **Card Titles**: text-lg to text-xl, font-semibold (600)\n- **Body Text**: text-base, font-normal (400)\n- **Captions/Labels**: text-sm to text-xs, font-medium (500)\n- **Numbers/Amounts**: text-lg to text-2xl, font-bold (700) - tabular numbers\n\n---\n\n## Layout System\n\n**Spacing Primitives**: Use Tailwind units 2, 4, 6, 8, 12, 16, 24\n- Component padding: p-4 to p-8\n- Section spacing: py-12 to py-24\n- Card gaps: gap-4 to gap-6\n- Element margins: m-2, m-4, m-6\n\n**Container Strategy**:\n- Max-width: max-w-7xl for main content\n- Padding: px-4 on mobile, px-6 on tablet, px-8 on desktop\n- Cards: Consistent rounded-2xl with p-6 to p-8\n\n**Grid Systems**:\n- Betting form: Single column on mobile, 2-column on desktop (lg:grid-cols-2)\n- Lottery results: Grid-cols-1 md:grid-cols-2 lg:grid-cols-3\n- Affiliate stats: Grid-cols-2 md:grid-cols-4\n- History tables: Full-width responsive tables with horizontal scroll\n\n---\n\n## Component Library\n\n### Navigation\n- **Top Navigation**: Sticky header with logo left, language toggle, user menu right\n- **Mobile**: Hamburger menu with slide-out drawer\n- **Logo**: QNQ Lottery with geometric icon (diamond/crown motif), height h-10 to h-12\n\n### Betting Calculator Interface\n- **Lottery Type Selector**: Dropdown with icons (Lucide: TrendingUp, Globe, DollarSign)\n- **Bet Type Buttons**: Pill-shaped button group (9 options), active state with subtle glow\n- **Number Input**: Large, centered input fields (text-2xl) with number pad feel\n- **Amount Input**: Currency input with +/- controls, shows multiplier\n- **Blocked Numbers Alert**: Red badge with X icon next to blocked numbers\n- **Cart Summary Card**: Sticky bottom card on mobile, sidebar on desktop\n\n### Results Display Cards\n- **Result Card**: Glass morphism card with gradient border\n- **API Results**: Live badge with pulse animation\n- **External Links**: Card with \"View Results\" CTA, opens new window, external link icon\n- **Draw Date/Time**: Prominent display with countdown timer for upcoming draws\n\n### Affiliate Dashboard\n- **Referral Code Display**: Large copy-able code in bordered container\n- **Stats Cards**: 4-card grid showing referrals, earnings, pending, total\n- **Earnings Table**: Striped table with pagination\n- **Share Buttons**: Icon-only buttons for social sharing (if links available)\n\n### Profile & History\n- **Balance Card**: Large card at top with balance, deposit/withdraw CTAs\n- **Transaction Tabs**: Tab interface for Bets/Deposits/Withdrawals\n- **Bet History Items**: Card list with lottery type badge, numbers, status badge (pending/won/lost)\n- **Filters**: Dropdown filters for date range, lottery type, bet type\n\n### Forms & Inputs\n- **Input Fields**: Rounded-lg borders, focus ring, floating labels\n- **Buttons**: 3 variants - Primary (solid), Secondary (outline), Ghost (text)\n- **File Upload**: Drag-and-drop zone for slip uploads with preview\n- **Payment Info**: QR code display in centered card, bank details in read-only fields\n\n### Admin Panel\n- **Blocked Numbers Manager**: Table with add/remove actions, toggle switches\n- **Payout Rate Settings**: Input grid for each bet type\n- **Status Indicators**: Color-coded badges (active/blocked)\n\n---\n\n## Images Strategy\n\n**Logo/Branding**:\n- QNQ Lottery logo: Geometric design combining letters Q, N, Q with luxury crown or diamond element\n- Icon-only version for mobile/favicon\n- Place in top-left of navigation\n\n**Hero Section (Homepage)**:\n- No traditional hero image - lead directly with betting interface\n- Background: Subtle gradient with geometric pattern overlay\n- Focus on calculator interface as primary visual\n\n**Results Page**:\n- Lottery type icons from Lucide React\n- No decorative images - focus on data clarity\n- Flag icons for international lotteries (from CDN if available)\n\n**Profile/Affiliate**:\n- Avatar placeholders from UI Avatars or similar service\n- No background images - clean data presentation\n\n**General Image Rules**:\n- Use Lucide React icons exclusively\n- No external icon CDNs\n- Lazy load all images\n- Optimize for mobile-first loading\n\n---\n\n## Animations & Interactions\n\n**Minimal Animation Strategy**:\n- Hover states: Subtle scale (scale-105) on buttons\n- Active states: scale-95 on clickable elements\n- Loading: Subtle spinner, no complex animations\n- Transitions: Quick duration-200 for state changes\n- Cart badge: Gentle bounce animation when items added\n\n**No Animations**:\n- Page transitions\n- Scroll-triggered effects\n- Complex lottery result reveals\n- Decorative background movements\n\n---\n\n## Accessibility & Responsiveness\n\n- Minimum touch target: 44x44px on mobile\n- High contrast ratios for all text\n- Focus visible states on all interactive elements\n- ARIA labels for icon-only buttons\n- Screen reader support for lottery numbers and amounts\n- Responsive breakpoints: sm (640px), md (768px), lg (1024px), xl (1280px)\n\n---\n\n## Multi-Language Implementation\n\n- Language toggle in navigation (TH/EN flag icons or text)\n- All labels, buttons, error messages translated\n- Number formatting: Thai numeral support where appropriate\n- Currency display: ฿ for Thai Baht\n- Date formatting: DD/MM/YYYY for Thai, localized for English","path":null,"size_bytes":6124,"size_tokens":null},"client/src/components/AmountInput.tsx":{"content":"import { Input } from \"@/components/ui/input\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { useI18n } from \"@/lib/i18n\";\nimport { payoutRates, type BetType } from \"@shared/schema\";\n\ninterface AmountInputProps {\n  amount: number;\n  onAmountChange: (amount: number) => void;\n  betType: BetType | null;\n  numbersCount: number;\n}\n\nconst quickAmounts = [10, 20, 50, 100, 200, 500, 1000];\n\nexport function AmountInput({ amount, onAmountChange, betType, numbersCount }: AmountInputProps) {\n  const { language, t } = useI18n();\n  \n  const rate = betType ? payoutRates[betType] : 0;\n  const totalBet = amount * Math.max(1, numbersCount);\n  const potentialWin = amount * rate * Math.max(1, numbersCount);\n\n  const handleInputChange = (value: string) => {\n    const num = parseInt(value) || 0;\n    onAmountChange(Math.max(0, num));\n  };\n\n  return (\n    <div className=\"space-y-4\">\n      <div>\n        <label className=\"text-sm font-medium text-muted-foreground mb-2 block\">\n          {t(\"home.enterAmount\")} ({language === \"th\" ? \"ต่อเลข\" : \"per number\"})\n        </label>\n        <Input\n          type=\"number\"\n          value={amount || \"\"}\n          onChange={(e) => handleInputChange(e.target.value)}\n          placeholder=\"0\"\n          className=\"text-center text-2xl font-bold h-14\"\n          min={1}\n          data-testid=\"input-amount\"\n        />\n      </div>\n\n      <div className=\"flex flex-wrap gap-2\">\n        {quickAmounts.map((amt) => (\n          <Button\n            key={amt}\n            variant={amount === amt ? \"default\" : \"secondary\"}\n            size=\"sm\"\n            onClick={() => onAmountChange(amt)}\n            data-testid={`button-quick-amount-${amt}`}\n          >\n            {amt}\n          </Button>\n        ))}\n      </div>\n\n      {betType && amount > 0 && (\n        <Card className=\"bg-gradient-to-br from-card to-accent/30 border-primary/20\">\n          <CardContent className=\"p-4 space-y-2\">\n            <div className=\"flex justify-between items-center\">\n              <span className=\"text-sm text-muted-foreground\">{t(\"home.payoutRate\")}</span>\n              <span className=\"font-bold text-primary\">x{rate}</span>\n            </div>\n            <div className=\"flex justify-between items-center\">\n              <span className=\"text-sm text-muted-foreground\">\n                {language === \"th\" ? \"ยอดแทงรวม\" : \"Total Bet\"}\n              </span>\n              <span className=\"font-bold\">\n                {totalBet.toLocaleString()} {t(\"common.baht\")}\n              </span>\n            </div>\n            <div className=\"flex justify-between items-center pt-2 border-t border-border\">\n              <span className=\"text-sm font-medium\">{t(\"home.potentialWin\")}</span>\n              <span className=\"font-bold text-xl text-primary\">\n                {potentialWin.toLocaleString()} {t(\"common.baht\")}\n              </span>\n            </div>\n          </CardContent>\n        </Card>\n      )}\n    </div>\n  );\n}\n","path":null,"size_bytes":3036,"size_tokens":null},"client/src/components/ui/select.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","path":null,"size_bytes":5741,"size_tokens":null},"client/src/components/ui/dialog.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","path":null,"size_bytes":3848,"size_tokens":null},"client/src/components/ui/drawer.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Drawer as DrawerPrimitive } from \"vaul\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Drawer = ({\n  shouldScaleBackground = true,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\n  <DrawerPrimitive.Root\n    shouldScaleBackground={shouldScaleBackground}\n    {...props}\n  />\n)\nDrawer.displayName = \"Drawer\"\n\nconst DrawerTrigger = DrawerPrimitive.Trigger\n\nconst DrawerPortal = DrawerPrimitive.Portal\n\nconst DrawerClose = DrawerPrimitive.Close\n\nconst DrawerOverlay = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Overlay\n    ref={ref}\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\n    {...props}\n  />\n))\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\n\nconst DrawerContent = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DrawerPortal>\n    <DrawerOverlay />\n    <DrawerPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background\",\n        className\n      )}\n      {...props}\n    >\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\n      {children}\n    </DrawerPrimitive.Content>\n  </DrawerPortal>\n))\nDrawerContent.displayName = \"DrawerContent\"\n\nconst DrawerHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\n    {...props}\n  />\n)\nDrawerHeader.displayName = \"DrawerHeader\"\n\nconst DrawerFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\n    {...props}\n  />\n)\nDrawerFooter.displayName = \"DrawerFooter\"\n\nconst DrawerTitle = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\n\nconst DrawerDescription = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n}\n","path":null,"size_bytes":3021,"size_tokens":null},"client/src/components/ui/menubar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction MenubarMenu({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\n  return <MenubarPrimitive.Menu {...props} />\n}\n\nfunction MenubarGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Group>) {\n  return <MenubarPrimitive.Group {...props} />\n}\n\nfunction MenubarPortal({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\n  return <MenubarPrimitive.Portal {...props} />\n}\n\nfunction MenubarRadioGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\n  return <MenubarPrimitive.RadioGroup {...props} />\n}\n\nfunction MenubarSub({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />\n}\n\nconst Menubar = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"flex h-10 items-center space-x-1 rounded-md border bg-background p-1\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubar.displayName = MenubarPrimitive.Root.displayName\n\nconst MenubarTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\n\nconst MenubarSubTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <MenubarPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </MenubarPrimitive.SubTrigger>\n))\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\n\nconst MenubarSubContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\n\nconst MenubarContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(\n  (\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\n    ref\n  ) => (\n    <MenubarPrimitive.Portal>\n      <MenubarPrimitive.Content\n        ref={ref}\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n          className\n        )}\n        {...props}\n      />\n    </MenubarPrimitive.Portal>\n  )\n)\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\n\nconst MenubarItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\n\nconst MenubarCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <MenubarPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.CheckboxItem>\n))\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\n\nconst MenubarRadioItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <MenubarPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.RadioItem>\n))\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\n\nconst MenubarLabel = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\n\nconst MenubarSeparator = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\n\nconst MenubarShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nMenubarShortcut.displayname = \"MenubarShortcut\"\n\nexport {\n  Menubar,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarItem,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarPortal,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarGroup,\n  MenubarSub,\n  MenubarShortcut,\n}\n","path":null,"size_bytes":8605,"size_tokens":null},"client/src/pages/not-found.tsx":{"content":"import { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Logo } from \"@/components/Logo\";\nimport { useI18n } from \"@/lib/i18n\";\nimport { Home, ArrowLeft } from \"lucide-react\";\nimport { Link } from \"wouter\";\n\nexport default function NotFound() {\n  const { language } = useI18n();\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-background via-background to-primary/5\">\n      <Card className=\"w-full max-w-md text-center\">\n        <CardHeader className=\"space-y-4\">\n          <div className=\"flex justify-center\">\n            <Logo size=\"lg\" />\n          </div>\n          <div className=\"space-y-2\">\n            <p className=\"text-7xl font-bold text-primary\">404</p>\n            <CardTitle className=\"text-2xl\">\n              {language === \"th\" ? \"ไม่พบหน้านี้\" : \"Page Not Found\"}\n            </CardTitle>\n            <CardDescription>\n              {language === \"th\" \n                ? \"หน้าที่คุณค้นหาไม่มีอยู่ หรือถูกย้ายไปแล้ว\" \n                : \"The page you're looking for doesn't exist or has been moved\"}\n            </CardDescription>\n          </div>\n        </CardHeader>\n        <CardContent className=\"space-y-3\">\n          <Button className=\"w-full gap-2\" asChild>\n            <Link href=\"/\">\n              <Home className=\"h-4 w-4\" />\n              {language === \"th\" ? \"กลับหน้าหลัก\" : \"Go Home\"}\n            </Link>\n          </Button>\n          <Button variant=\"outline\" className=\"w-full gap-2\" onClick={() => window.history.back()}>\n            <ArrowLeft className=\"h-4 w-4\" />\n            {language === \"th\" ? \"ย้อนกลับ\" : \"Go Back\"}\n          </Button>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","path":null,"size_bytes":1934,"size_tokens":null},"client/src/components/ui/hover-card.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst HoverCard = HoverCardPrimitive.Root\n\nconst HoverCardTrigger = HoverCardPrimitive.Trigger\n\nconst HoverCardContent = React.forwardRef<\n  React.ElementRef<typeof HoverCardPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <HoverCardPrimitive.Content\n    ref={ref}\n    align={align}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-hover-card-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nHoverCardContent.displayName = HoverCardPrimitive.Content.displayName\n\nexport { HoverCard, HoverCardTrigger, HoverCardContent }\n","path":null,"size_bytes":1251,"size_tokens":null},"client/src/lib/queryClient.ts":{"content":"import { QueryClient, QueryFunction } from \"@tanstack/react-query\";\n\nasync function throwIfResNotOk(res: Response) {\n  if (!res.ok) {\n    const text = (await res.text()) || res.statusText;\n    throw new Error(`${res.status}: ${text}`);\n  }\n}\n\nexport async function apiRequest(\n  method: string,\n  url: string,\n  data?: unknown | undefined,\n): Promise<Response> {\n  const res = await fetch(url, {\n    method,\n    headers: data ? { \"Content-Type\": \"application/json\" } : {},\n    body: data ? JSON.stringify(data) : undefined,\n    credentials: \"include\",\n  });\n\n  await throwIfResNotOk(res);\n  return res;\n}\n\ntype UnauthorizedBehavior = \"returnNull\" | \"throw\";\nexport const getQueryFn: <T>(options: {\n  on401: UnauthorizedBehavior;\n}) => QueryFunction<T> =\n  ({ on401: unauthorizedBehavior }) =>\n  async ({ queryKey }) => {\n    const res = await fetch(queryKey.join(\"/\") as string, {\n      credentials: \"include\",\n    });\n\n    if (unauthorizedBehavior === \"returnNull\" && res.status === 401) {\n      return null;\n    }\n\n    await throwIfResNotOk(res);\n    return await res.json();\n  };\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      queryFn: getQueryFn({ on401: \"throw\" }),\n      refetchInterval: false,\n      refetchOnWindowFocus: false,\n      staleTime: Infinity,\n      retry: false,\n    },\n    mutations: {\n      retry: false,\n    },\n  },\n});\n","path":null,"size_bytes":1383,"size_tokens":null},"client/src/components/CartSheet.tsx":{"content":"import {\n  Sheet,\n  SheetContent,\n  SheetHeader,\n  SheetTitle,\n  SheetTrigger,\n  SheetFooter,\n} from \"@/components/ui/sheet\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { Separator } from \"@/components/ui/separator\";\nimport { useCart, useUser } from \"@/lib/store\";\nimport { useI18n } from \"@/lib/i18n\";\nimport { lotteryTypeNames, betTypeNames, payoutRates } from \"@shared/schema\";\nimport { ShoppingCart, Trash2, X, Wallet, CreditCard, Loader2 } from \"lucide-react\";\nimport { useState } from \"react\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { PaymentModal } from \"./PaymentModal\";\n\nexport function CartSheet() {\n  const { language, t } = useI18n();\n  const { items, removeItem, clearCart, getTotal, getTotalPotentialWin } = useCart();\n  const { user } = useUser();\n  const { toast } = useToast();\n  const [showPayment, setShowPayment] = useState(false);\n  const [isOpen, setIsOpen] = useState(false);\n\n  const total = getTotal();\n  const potentialWin = getTotalPotentialWin();\n  const userBalance = user?.balance || 0;\n  const hasEnoughBalance = userBalance >= total;\n\n  const submitBetsMutation = useMutation({\n    mutationFn: async () => {\n      if (!user?.id) throw new Error(\"Not logged in\");\n      \n      const betItems = items.map(item => ({\n        lotteryType: item.lotteryType,\n        betType: item.betType,\n        numbers: item.numbers,\n        amount: item.amount\n      }));\n      \n      const res = await apiRequest(\"POST\", \"/api/bets\", { \n        userId: user.id,\n        items: betItems \n      });\n      return res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/bets\"] });\n      queryClient.invalidateQueries({ queryKey: [`/api/users/${user?.id}`] });\n      clearCart();\n      setIsOpen(false);\n      toast({\n        title: language === \"th\" ? \"ซื้อหวยสำเร็จ!\" : \"Bet placed successfully!\",\n        description: language === \"th\" \n          ? `ตัดเงินจากยอดคงเหลือ ${total.toLocaleString()} บาท` \n          : `${total.toLocaleString()} THB deducted from balance`\n      });\n    },\n    onError: (error) => {\n      toast({\n        title: language === \"th\" ? \"เกิดข้อผิดพลาด\" : \"Error occurred\",\n        description: error.message,\n        variant: \"destructive\"\n      });\n    }\n  });\n\n  const handleCheckout = () => {\n    if (items.length === 0) return;\n    \n    if (!user?.id) {\n      toast({\n        title: language === \"th\" ? \"กรุณาเข้าสู่ระบบ\" : \"Please login\",\n        variant: \"destructive\"\n      });\n      return;\n    }\n\n    if (hasEnoughBalance) {\n      submitBetsMutation.mutate();\n    } else {\n      setShowPayment(true);\n      setIsOpen(false);\n    }\n  };\n\n  return (\n    <>\n      <Sheet open={isOpen} onOpenChange={setIsOpen}>\n        <SheetTrigger asChild>\n          <Button variant=\"ghost\" size=\"icon\" className=\"relative\" data-testid=\"button-cart\">\n            <ShoppingCart className=\"h-5 w-5\" />\n            {items.length > 0 && (\n              <Badge className=\"absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center p-0 text-xs\">\n                {items.length}\n              </Badge>\n            )}\n          </Button>\n        </SheetTrigger>\n        <SheetContent className=\"w-full sm:max-w-md\">\n          <SheetHeader>\n            <SheetTitle className=\"flex items-center gap-2\">\n              <ShoppingCart className=\"h-5 w-5\" />\n              {t(\"cart.title\")}\n            </SheetTitle>\n          </SheetHeader>\n\n          {items.length === 0 ? (\n            <div className=\"flex flex-col items-center justify-center h-64 text-muted-foreground\">\n              <ShoppingCart className=\"h-12 w-12 mb-4 opacity-50\" />\n              <p>{t(\"cart.empty\")}</p>\n            </div>\n          ) : (\n            <>\n              <ScrollArea className=\"flex-1 my-4 max-h-[50vh]\">\n                <div className=\"space-y-3 pr-4\">\n                  {items.map((item) => (\n                    <Card key={item.id} className=\"relative\">\n                      <CardContent className=\"p-3\">\n                        <button\n                          onClick={() => removeItem(item.id)}\n                          className=\"absolute top-2 right-2 p-1 hover:bg-destructive/20 rounded-full transition-colors\"\n                          data-testid={`button-remove-item-${item.id}`}\n                        >\n                          <X className=\"h-4 w-4 text-muted-foreground hover:text-destructive\" />\n                        </button>\n                        <div className=\"space-y-1 pr-6\">\n                          <div className=\"flex items-center gap-2\">\n                            <Badge variant=\"secondary\" className=\"text-xs\">\n                              {lotteryTypeNames[item.lotteryType][language]}\n                            </Badge>\n                            <Badge variant=\"outline\" className=\"text-xs\">\n                              {betTypeNames[item.betType][language]}\n                            </Badge>\n                          </div>\n                          <div className=\"flex items-center justify-between mt-2\">\n                            <span className=\"text-xl font-bold font-mono tracking-widest\">\n                              {item.numbers}\n                            </span>\n                            <div className=\"text-right\">\n                              <p className=\"font-semibold\">\n                                {item.amount.toLocaleString()} {t(\"common.baht\")}\n                              </p>\n                              <p className=\"text-xs text-primary\">\n                                {language === \"th\" ? \"ชนะ\" : \"Win\"}: {(item.amount * payoutRates[item.betType]).toLocaleString()}\n                              </p>\n                            </div>\n                          </div>\n                        </div>\n                      </CardContent>\n                    </Card>\n                  ))}\n                </div>\n              </ScrollArea>\n\n              <Separator />\n\n              <div className=\"space-y-3 py-4\">\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-muted-foreground\">{t(\"cart.total\")}</span>\n                  <span className=\"text-xl font-bold\">\n                    {total.toLocaleString()} {t(\"common.baht\")}\n                  </span>\n                </div>\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-muted-foreground\">{t(\"home.potentialWin\")}</span>\n                  <span className=\"text-xl font-bold text-primary\">\n                    {potentialWin.toLocaleString()} {t(\"common.baht\")}\n                  </span>\n                </div>\n                {user && (\n                  <div className=\"flex justify-between items-center pt-2 border-t\">\n                    <span className=\"text-muted-foreground flex items-center gap-1\">\n                      <Wallet className=\"h-4 w-4\" />\n                      {language === \"th\" ? \"ยอดคงเหลือ\" : \"Balance\"}\n                    </span>\n                    <span className={`text-lg font-semibold ${hasEnoughBalance ? \"text-green-600\" : \"text-orange-500\"}`}>\n                      {userBalance.toLocaleString()} {t(\"common.baht\")}\n                    </span>\n                  </div>\n                )}\n                {user && !hasEnoughBalance && total > 0 && (\n                  <p className=\"text-sm text-orange-500 text-center\">\n                    {language === \"th\" \n                      ? `ยอดไม่เพียงพอ ต้องเติมอีก ${(total - userBalance).toLocaleString()} บาท`\n                      : `Insufficient balance. Need ${(total - userBalance).toLocaleString()} THB more`\n                    }\n                  </p>\n                )}\n              </div>\n\n              <SheetFooter className=\"gap-2 sm:gap-2\">\n                <Button\n                  variant=\"outline\"\n                  onClick={clearCart}\n                  className=\"flex-1\"\n                  data-testid=\"button-clear-cart\"\n                  disabled={submitBetsMutation.isPending}\n                >\n                  <Trash2 className=\"h-4 w-4 mr-2\" />\n                  {t(\"cart.clear\")}\n                </Button>\n                <Button\n                  onClick={handleCheckout}\n                  className=\"flex-1\"\n                  disabled={submitBetsMutation.isPending}\n                  data-testid=\"button-checkout\"\n                >\n                  {submitBetsMutation.isPending ? (\n                    <>\n                      <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                      {language === \"th\" ? \"กำลังซื้อ...\" : \"Processing...\"}\n                    </>\n                  ) : hasEnoughBalance ? (\n                    <>\n                      <Wallet className=\"h-4 w-4 mr-2\" />\n                      {language === \"th\" ? \"ซื้อหวย\" : \"Buy Tickets\"}\n                    </>\n                  ) : (\n                    <>\n                      <CreditCard className=\"h-4 w-4 mr-2\" />\n                      {language === \"th\" ? \"เติมเงิน\" : \"Top Up\"}\n                    </>\n                  )}\n                </Button>\n              </SheetFooter>\n            </>\n          )}\n        </SheetContent>\n      </Sheet>\n\n      <PaymentModal\n        isOpen={showPayment}\n        onClose={() => setShowPayment(false)}\n        amount={total}\n      />\n    </>\n  );\n}\n","path":null,"size_bytes":9881,"size_tokens":null},"client/src/lib/i18n.ts":{"content":"import { create } from 'zustand';\nimport { persist } from 'zustand/middleware';\n\nexport type Language = 'th' | 'en';\n\ninterface I18nState {\n  language: Language;\n  setLanguage: (lang: Language) => void;\n  t: (key: string) => string;\n}\n\nconst translations: Record<Language, Record<string, string>> = {\n  th: {\n    'app.name': 'QNQ Lottery',\n    'app.tagline': 'ระบบแทงหวยออนไลน์ครบวงจร',\n    'nav.home': 'หน้าหลัก',\n    'nav.results': 'ผลหวย',\n    'nav.affiliate': 'แนะนำเพื่อน',\n    'nav.profile': 'โปรไฟล์',\n    'nav.admin': 'จัดการระบบ',\n    'nav.cart': 'ตะกร้า',\n    'nav.login': 'เข้าสู่ระบบ',\n    'nav.register': 'สมัครสมาชิก',\n    'nav.logout': 'ออกจากระบบ',\n    'home.selectLottery': 'เลือกประเภทหวย',\n    'home.selectBetType': 'เลือกรูปแบบการแทง',\n    'home.enterNumber': 'กรอกเลข',\n    'home.enterAmount': 'จำนวนเงิน',\n    'home.addToCart': 'เพิ่มในตะกร้า',\n    'home.blockedNumbers': 'เลขอั้น',\n    'home.blockedWarning': 'เลขนี้ถูกอั้น ไม่สามารถแทงได้',\n    'home.payoutRate': 'อัตราจ่าย',\n    'home.potentialWin': 'เงินที่จะได้รับ',\n    'results.title': 'ผลหวยทุกประเภท',\n    'results.latest': 'ผลล่าสุด',\n    'results.viewExternal': 'ดูผลหวย',\n    'results.liveApi': 'ข้อมูลสด',\n    'results.externalLink': 'ลิงก์ภายนอก',\n    'affiliate.title': 'ระบบแนะนำเพื่อน',\n    'affiliate.yourCode': 'รหัสแนะนำของคุณ',\n    'affiliate.copyLink': 'คัดลอกลิงก์',\n    'affiliate.copied': 'คัดลอกแล้ว!',\n    'affiliate.totalReferrals': 'เพื่อนที่สมัคร',\n    'affiliate.totalEarnings': 'รายได้รวม',\n    'affiliate.pendingEarnings': 'รอรับเงิน',\n    'affiliate.commission': 'คอมมิชชั่น 20%',\n    'affiliate.withdraw': 'ถอนเงิน',\n    'affiliate.history': 'ประวัติรายได้',\n    'profile.title': 'โปรไฟล์',\n    'profile.balance': 'ยอดเงินคงเหลือ',\n    'profile.deposit': 'ฝากเงิน',\n    'profile.withdraw': 'ถอนเงิน',\n    'profile.history': 'ประวัติการแทง',\n    'profile.transactions': 'ประวัติการเงิน',\n    'profile.settings': 'ตั้งค่า',\n    'profile.numberVault': 'คลังเก็บเลข',\n    'cart.title': 'ตะกร้าแทงหวย',\n    'cart.empty': 'ตะกร้าว่าง',\n    'cart.total': 'ยอดรวม',\n    'cart.checkout': 'ยืนยันการแทง',\n    'cart.clear': 'ล้างตะกร้า',\n    'cart.remove': 'ลบ',\n    'payment.title': 'ชำระเงิน',\n    'payment.bankTransfer': 'โอนเงินผ่านธนาคาร',\n    'payment.promptPay': 'พร้อมเพย์',\n    'payment.scanQr': 'สแกน QR Code',\n    'payment.uploadSlip': 'อัพโหลดสลิป',\n    'payment.reference': 'หมายเลขอ้างอิง',\n    'payment.confirm': 'ยืนยันการชำระเงิน',\n    'admin.title': 'จัดการระบบ',\n    'admin.blockedNumbers': 'จัดการเลขอั้น',\n    'admin.addBlocked': 'เพิ่มเลขอั้น',\n    'admin.removeBlocked': 'ลบเลขอั้น',\n    'admin.payoutRates': 'ตั้งค่าอัตราจ่าย',\n    'admin.login': 'เข้าสู่ระบบ Admin',\n    'status.pending': 'รอยืนยัน',\n    'status.confirmed': 'ยืนยันแล้ว',\n    'status.won': 'ถูกรางวัล',\n    'status.lost': 'ไม่ถูก',\n    'status.approved': 'อนุมัติ',\n    'status.rejected': 'ไม่อนุมัติ',\n    'common.baht': 'บาท',\n    'common.save': 'บันทึก',\n    'common.cancel': 'ยกเลิก',\n    'common.confirm': 'ยืนยัน',\n    'common.delete': 'ลบ',\n    'common.edit': 'แก้ไข',\n    'common.search': 'ค้นหา',\n    'common.filter': 'กรอง',\n    'common.loading': 'กำลังโหลด...',\n    'common.noData': 'ไม่มีข้อมูล',\n    'common.error': 'เกิดข้อผิดพลาด',\n    'common.success': 'สำเร็จ',\n  },\n  en: {\n    'app.name': 'QNQ Lottery',\n    'app.tagline': 'Complete Online Lottery System',\n    'nav.home': 'Home',\n    'nav.results': 'Results',\n    'nav.affiliate': 'Affiliate',\n    'nav.profile': 'Profile',\n    'nav.admin': 'Admin',\n    'nav.cart': 'Cart',\n    'nav.login': 'Login',\n    'nav.register': 'Register',\n    'nav.logout': 'Logout',\n    'home.selectLottery': 'Select Lottery Type',\n    'home.selectBetType': 'Select Bet Type',\n    'home.enterNumber': 'Enter Number',\n    'home.enterAmount': 'Amount',\n    'home.addToCart': 'Add to Cart',\n    'home.blockedNumbers': 'Blocked Numbers',\n    'home.blockedWarning': 'This number is blocked',\n    'home.payoutRate': 'Payout Rate',\n    'home.potentialWin': 'Potential Win',\n    'results.title': 'All Lottery Results',\n    'results.latest': 'Latest Results',\n    'results.viewExternal': 'View Results',\n    'results.liveApi': 'Live Data',\n    'results.externalLink': 'External Link',\n    'affiliate.title': 'Affiliate Program',\n    'affiliate.yourCode': 'Your Referral Code',\n    'affiliate.copyLink': 'Copy Link',\n    'affiliate.copied': 'Copied!',\n    'affiliate.totalReferrals': 'Total Referrals',\n    'affiliate.totalEarnings': 'Total Earnings',\n    'affiliate.pendingEarnings': 'Pending Earnings',\n    'affiliate.commission': '20% Commission',\n    'affiliate.withdraw': 'Withdraw',\n    'affiliate.history': 'Earnings History',\n    'profile.title': 'Profile',\n    'profile.balance': 'Balance',\n    'profile.deposit': 'Deposit',\n    'profile.withdraw': 'Withdraw',\n    'profile.history': 'Bet History',\n    'profile.transactions': 'Transactions',\n    'profile.settings': 'Settings',\n    'profile.numberVault': 'Number Vault',\n    'cart.title': 'Betting Cart',\n    'cart.empty': 'Cart is empty',\n    'cart.total': 'Total',\n    'cart.checkout': 'Checkout',\n    'cart.clear': 'Clear Cart',\n    'cart.remove': 'Remove',\n    'payment.title': 'Payment',\n    'payment.bankTransfer': 'Bank Transfer',\n    'payment.promptPay': 'PromptPay',\n    'payment.scanQr': 'Scan QR Code',\n    'payment.uploadSlip': 'Upload Slip',\n    'payment.reference': 'Reference Number',\n    'payment.confirm': 'Confirm Payment',\n    'admin.title': 'Admin Panel',\n    'admin.blockedNumbers': 'Blocked Numbers',\n    'admin.addBlocked': 'Add Blocked Number',\n    'admin.removeBlocked': 'Remove',\n    'admin.payoutRates': 'Payout Rates',\n    'admin.login': 'Admin Login',\n    'status.pending': 'Pending',\n    'status.confirmed': 'Confirmed',\n    'status.won': 'Won',\n    'status.lost': 'Lost',\n    'status.approved': 'Approved',\n    'status.rejected': 'Rejected',\n    'common.baht': 'THB',\n    'common.save': 'Save',\n    'common.cancel': 'Cancel',\n    'common.confirm': 'Confirm',\n    'common.delete': 'Delete',\n    'common.edit': 'Edit',\n    'common.search': 'Search',\n    'common.filter': 'Filter',\n    'common.loading': 'Loading...',\n    'common.noData': 'No data',\n    'common.error': 'Error',\n    'common.success': 'Success',\n  }\n};\n\nexport const useI18n = create<I18nState>()(\n  persist(\n    (set, get) => ({\n      language: 'th',\n      setLanguage: (lang) => set({ language: lang }),\n      t: (key) => {\n        const { language } = get();\n        return translations[language][key] || key;\n      }\n    }),\n    {\n      name: 'qnq-language'\n    }\n  )\n);\n","path":null,"size_bytes":8141,"size_tokens":null},"client/src/pages/Wallet.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { useI18n } from \"@/lib/i18n\";\nimport { useUser } from \"@/lib/store\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { QRCodeSVG } from \"qrcode.react\";\nimport {\n  Wallet,\n  ArrowDownRight,\n  ArrowUpRight,\n  Copy,\n  Check,\n  Building2,\n  QrCode,\n  CreditCard,\n  Upload,\n  Loader2\n} from \"lucide-react\";\nimport type { User } from \"@shared/schema\";\n\nconst bankAccount = {\n  bankName: \"กสิกรไทย\",\n  accountNumber: \"123-4-56789-0\",\n  accountName: \"QNQ Lottery Co., Ltd.\",\n  promptPayId: \"0123456789\"\n};\n\nexport default function WalletPage() {\n  const { language, t } = useI18n();\n  const { user, isAuthenticated } = useUser();\n  const { toast } = useToast();\n\n  const [depositAmount, setDepositAmount] = useState(\"\");\n  const [withdrawAmount, setWithdrawAmount] = useState(\"\");\n  const [withdrawAccount, setWithdrawAccount] = useState(\"\");\n  const [slipFile, setSlipFile] = useState<File | null>(null);\n  const [copied, setCopied] = useState<string | null>(null);\n\n  const quickAmounts = [100, 300, 500, 1000, 3000, 5000];\n\n  const { data: userData, isLoading } = useQuery<User>({\n    queryKey: [`/api/users/${user?.id}`],\n    enabled: isAuthenticated && !!user?.id,\n  });\n\n  const depositMutation = useMutation({\n    mutationFn: async (data: { amount: number }) => {\n      const res = await apiRequest(\"POST\", \"/api/transactions\", {\n        userId: user?.id,\n        type: \"deposit\",\n        amount: data.amount,\n        slipUrl: slipFile?.name || null\n      });\n      return res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [`/api/users/${user?.id}`] });\n      queryClient.invalidateQueries({ queryKey: [`/api/transactions/${user?.id}`] });\n      setDepositAmount(\"\");\n      setSlipFile(null);\n      toast({\n        title: language === \"th\" ? \"ส่งคำขอฝากเงินแล้ว\" : \"Deposit request submitted\",\n        description: language === \"th\" ? \"กรุณารอการตรวจสอบ 5-10 นาที\" : \"Please wait 5-10 minutes for verification\"\n      });\n    },\n    onError: () => {\n      toast({\n        title: language === \"th\" ? \"เกิดข้อผิดพลาด\" : \"Error occurred\",\n        variant: \"destructive\"\n      });\n    }\n  });\n\n  const withdrawMutation = useMutation({\n    mutationFn: async (data: { amount: number; account: string }) => {\n      const res = await apiRequest(\"POST\", \"/api/transactions\", {\n        userId: user?.id,\n        type: \"withdrawal\",\n        amount: -data.amount,\n        slipUrl: null\n      });\n      return res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [`/api/users/${user?.id}`] });\n      queryClient.invalidateQueries({ queryKey: [`/api/transactions/${user?.id}`] });\n      setWithdrawAmount(\"\");\n      setWithdrawAccount(\"\");\n      toast({\n        title: language === \"th\" ? \"ส่งคำขอถอนเงินแล้ว\" : \"Withdrawal request submitted\",\n        description: language === \"th\" ? \"จะโอนเงินภายใน 24 ชั่วโมง\" : \"Money will be transferred within 24 hours\"\n      });\n    },\n    onError: () => {\n      toast({\n        title: language === \"th\" ? \"เกิดข้อผิดพลาด\" : \"Error occurred\",\n        variant: \"destructive\"\n      });\n    }\n  });\n\n  const copyToClipboard = (text: string, key: string) => {\n    navigator.clipboard.writeText(text);\n    setCopied(key);\n    setTimeout(() => setCopied(null), 2000);\n  };\n\n  if (!isAuthenticated) {\n    return (\n      <div className=\"min-h-full flex items-center justify-center p-4\">\n        <Card className=\"w-full max-w-md text-center\">\n          <CardHeader>\n            <div className=\"mx-auto p-4 bg-primary/10 rounded-full w-fit mb-4\">\n              <Wallet className=\"h-8 w-8 text-primary\" />\n            </div>\n            <CardTitle>{language === \"th\" ? \"กระเป๋าเงิน\" : \"Wallet\"}</CardTitle>\n            <CardDescription>\n              {language === \"th\" \n                ? \"เข้าสู่ระบบเพื่อฝาก-ถอนเงิน\" \n                : \"Login to deposit or withdraw\"}\n            </CardDescription>\n          </CardHeader>\n          <CardContent>\n            <Button className=\"w-full\" asChild>\n              <a href=\"/login\">{t(\"nav.login\")}</a>\n            </Button>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  const balance = userData?.balance || user?.balance || 0;\n\n  const handleDeposit = () => {\n    if (!depositAmount || !slipFile) {\n      toast({\n        title: language === \"th\" ? \"กรุณากรอกข้อมูลให้ครบ\" : \"Please fill all fields\",\n        variant: \"destructive\"\n      });\n      return;\n    }\n\n    depositMutation.mutate({ amount: parseInt(depositAmount) });\n  };\n\n  const handleWithdraw = () => {\n    if (!withdrawAmount || !withdrawAccount) {\n      toast({\n        title: language === \"th\" ? \"กรุณากรอกข้อมูลให้ครบ\" : \"Please fill all fields\",\n        variant: \"destructive\"\n      });\n      return;\n    }\n\n    const amount = parseInt(withdrawAmount);\n    if (amount > balance) {\n      toast({\n        title: language === \"th\" ? \"ยอดเงินไม่เพียงพอ\" : \"Insufficient balance\",\n        variant: \"destructive\"\n      });\n      return;\n    }\n\n    withdrawMutation.mutate({ amount, account: withdrawAccount });\n  };\n\n  const promptPayQrData = `00020101021129370016A000000677010111011300${bankAccount.promptPayId}5802TH53037646304`;\n\n  return (\n    <div className=\"min-h-full\">\n      <div className=\"bg-gradient-to-br from-primary/10 via-background to-primary/5 p-4 md:p-6 border-b border-border\">\n        <div className=\"flex items-center justify-between gap-4\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"p-3 bg-primary/10 rounded-xl\">\n              <Wallet className=\"h-6 w-6 text-primary\" />\n            </div>\n            <div>\n              <h1 className=\"text-xl md:text-2xl font-bold\">\n                {language === \"th\" ? \"กระเป๋าเงิน\" : \"Wallet\"}\n              </h1>\n              <p className=\"text-sm text-muted-foreground\">\n                {language === \"th\" ? \"ฝาก-ถอนเงิน\" : \"Deposit & Withdraw\"}\n              </p>\n            </div>\n          </div>\n          <div className=\"text-right\">\n            <p className=\"text-sm text-muted-foreground\">{t(\"profile.balance\")}</p>\n            {isLoading ? (\n              <Skeleton className=\"h-8 w-24\" />\n            ) : (\n              <p className=\"text-2xl font-bold text-primary\">\n                {balance.toLocaleString()} {t(\"common.baht\")}\n              </p>\n            )}\n          </div>\n        </div>\n      </div>\n\n      <div className=\"p-4 md:p-6\">\n        <Tabs defaultValue=\"deposit\" className=\"space-y-4\">\n          <TabsList className=\"grid w-full grid-cols-2\">\n            <TabsTrigger value=\"deposit\" className=\"gap-2\">\n              <ArrowDownRight className=\"h-4 w-4\" />\n              {t(\"profile.deposit\")}\n            </TabsTrigger>\n            <TabsTrigger value=\"withdraw\" className=\"gap-2\">\n              <ArrowUpRight className=\"h-4 w-4\" />\n              {t(\"profile.withdraw\")}\n            </TabsTrigger>\n          </TabsList>\n\n          <TabsContent value=\"deposit\" className=\"space-y-4\">\n            <div className=\"grid gap-4 md:grid-cols-2\">\n              <Card>\n                <CardHeader className=\"pb-3\">\n                  <CardTitle className=\"text-lg flex items-center gap-2\">\n                    <QrCode className=\"h-5 w-5\" />\n                    {t(\"payment.promptPay\")}\n                  </CardTitle>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <div className=\"flex justify-center p-4 bg-white rounded-lg\">\n                    <QRCodeSVG \n                      value={promptPayQrData}\n                      size={180}\n                      level=\"H\"\n                      includeMargin\n                    />\n                  </div>\n                  <div className=\"text-center\">\n                    <p className=\"text-sm text-muted-foreground\">\n                      {t(\"payment.scanQr\")}\n                    </p>\n                    <div className=\"flex items-center justify-center gap-2 mt-2\">\n                      <span className=\"font-mono font-bold\">{bankAccount.promptPayId}</span>\n                      <Button\n                        variant=\"ghost\"\n                        size=\"icon\"\n                        className=\"h-6 w-6\"\n                        onClick={() => copyToClipboard(bankAccount.promptPayId, \"promptpay\")}\n                      >\n                        {copied === \"promptpay\" ? (\n                          <Check className=\"h-3 w-3 text-green-500\" />\n                        ) : (\n                          <Copy className=\"h-3 w-3\" />\n                        )}\n                      </Button>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card>\n                <CardHeader className=\"pb-3\">\n                  <CardTitle className=\"text-lg flex items-center gap-2\">\n                    <Building2 className=\"h-5 w-5\" />\n                    {t(\"payment.bankTransfer\")}\n                  </CardTitle>\n                </CardHeader>\n                <CardContent className=\"space-y-3\">\n                  <div className=\"p-3 bg-muted rounded-lg space-y-2\">\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-sm text-muted-foreground\">\n                        {language === \"th\" ? \"ธนาคาร\" : \"Bank\"}\n                      </span>\n                      <span className=\"font-semibold\">{bankAccount.bankName}</span>\n                    </div>\n                    <div className=\"flex justify-between items-center\">\n                      <span className=\"text-sm text-muted-foreground\">\n                        {language === \"th\" ? \"เลขบัญชี\" : \"Account\"}\n                      </span>\n                      <div className=\"flex items-center gap-2\">\n                        <span className=\"font-mono font-bold\">{bankAccount.accountNumber}</span>\n                        <Button\n                          variant=\"ghost\"\n                          size=\"icon\"\n                          className=\"h-6 w-6\"\n                          onClick={() => copyToClipboard(bankAccount.accountNumber.replace(/-/g, \"\"), \"account\")}\n                        >\n                          {copied === \"account\" ? (\n                            <Check className=\"h-3 w-3 text-green-500\" />\n                          ) : (\n                            <Copy className=\"h-3 w-3\" />\n                          )}\n                        </Button>\n                      </div>\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-sm text-muted-foreground\">\n                        {language === \"th\" ? \"ชื่อบัญชี\" : \"Name\"}\n                      </span>\n                      <span className=\"font-semibold text-sm\">{bankAccount.accountName}</span>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            </div>\n\n            <Card>\n              <CardHeader className=\"pb-3\">\n                <CardTitle className=\"text-lg\">\n                  {language === \"th\" ? \"ยืนยันการฝากเงิน\" : \"Confirm Deposit\"}\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <div className=\"space-y-2\">\n                  <Label>{language === \"th\" ? \"จำนวนเงินที่โอน\" : \"Amount Transferred\"}</Label>\n                  <Input\n                    type=\"number\"\n                    value={depositAmount}\n                    onChange={(e) => setDepositAmount(e.target.value)}\n                    placeholder=\"0\"\n                    className=\"text-lg font-bold\"\n                    data-testid=\"input-deposit-amount\"\n                  />\n                  <div className=\"flex flex-wrap gap-2\">\n                    {quickAmounts.map((amt) => (\n                      <Button\n                        key={amt}\n                        variant=\"outline\"\n                        size=\"sm\"\n                        onClick={() => setDepositAmount(amt.toString())}\n                      >\n                        {amt.toLocaleString()}\n                      </Button>\n                    ))}\n                  </div>\n                </div>\n                <div className=\"space-y-2\">\n                  <Label>{t(\"payment.uploadSlip\")}</Label>\n                  <Input\n                    type=\"file\"\n                    accept=\"image/*\"\n                    onChange={(e) => setSlipFile(e.target.files?.[0] || null)}\n                    data-testid=\"input-deposit-slip\"\n                  />\n                  {slipFile && (\n                    <p className=\"text-sm text-green-600 flex items-center gap-1\">\n                      <Check className=\"h-3 w-3\" />\n                      {slipFile.name}\n                    </p>\n                  )}\n                </div>\n                <Button\n                  className=\"w-full\"\n                  onClick={handleDeposit}\n                  disabled={!depositAmount || !slipFile || depositMutation.isPending}\n                  data-testid=\"button-submit-deposit\"\n                >\n                  {depositMutation.isPending ? (\n                    <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                  ) : (\n                    <Upload className=\"h-4 w-4 mr-2\" />\n                  )}\n                  {language === \"th\" ? \"ยืนยันการฝากเงิน\" : \"Submit Deposit\"}\n                </Button>\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          <TabsContent value=\"withdraw\" className=\"space-y-4\">\n            <Card>\n              <CardHeader className=\"pb-3\">\n                <CardTitle className=\"text-lg flex items-center gap-2\">\n                  <CreditCard className=\"h-5 w-5\" />\n                  {language === \"th\" ? \"ถอนเงิน\" : \"Withdraw Money\"}\n                </CardTitle>\n                <CardDescription>\n                  {language === \"th\" \n                    ? `ยอดที่ถอนได้: ${balance.toLocaleString()} บาท`\n                    : `Available: ${balance.toLocaleString()} THB`}\n                </CardDescription>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <div className=\"space-y-2\">\n                  <Label>{language === \"th\" ? \"จำนวนเงินที่ถอน\" : \"Withdrawal Amount\"}</Label>\n                  <Input\n                    type=\"number\"\n                    value={withdrawAmount}\n                    onChange={(e) => setWithdrawAmount(e.target.value)}\n                    placeholder=\"0\"\n                    className=\"text-lg font-bold\"\n                    max={balance}\n                    data-testid=\"input-withdraw-amount\"\n                  />\n                  <div className=\"flex flex-wrap gap-2\">\n                    {quickAmounts.map((amt) => (\n                      <Button\n                        key={amt}\n                        variant=\"outline\"\n                        size=\"sm\"\n                        onClick={() => setWithdrawAmount(Math.min(amt, balance).toString())}\n                        disabled={amt > balance}\n                      >\n                        {amt.toLocaleString()}\n                      </Button>\n                    ))}\n                    <Button\n                      variant=\"secondary\"\n                      size=\"sm\"\n                      onClick={() => setWithdrawAmount(balance.toString())}\n                    >\n                      {language === \"th\" ? \"ถอนทั้งหมด\" : \"Max\"}\n                    </Button>\n                  </div>\n                </div>\n                <div className=\"space-y-2\">\n                  <Label>{language === \"th\" ? \"เลขบัญชีรับเงิน\" : \"Bank Account\"}</Label>\n                  <Input\n                    value={withdrawAccount}\n                    onChange={(e) => setWithdrawAccount(e.target.value)}\n                    placeholder={language === \"th\" ? \"กรอกเลขบัญชี\" : \"Enter account number\"}\n                    className=\"font-mono\"\n                    data-testid=\"input-withdraw-account\"\n                  />\n                </div>\n                <Button\n                  className=\"w-full\"\n                  onClick={handleWithdraw}\n                  disabled={!withdrawAmount || !withdrawAccount || parseInt(withdrawAmount) > balance || withdrawMutation.isPending}\n                  data-testid=\"button-submit-withdraw\"\n                >\n                  {withdrawMutation.isPending ? (\n                    <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                  ) : (\n                    <ArrowUpRight className=\"h-4 w-4 mr-2\" />\n                  )}\n                  {language === \"th\" ? \"ยืนยันการถอน\" : \"Submit Withdrawal\"}\n                </Button>\n              </CardContent>\n            </Card>\n          </TabsContent>\n        </Tabs>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":18073,"size_tokens":null},"client/src/components/ui/badge.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  // Whitespace-nowrap: Badges should never wrap.\n  \"whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\" +\n  \" hover-elevate \" ,\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground shadow-xs\",\n        secondary: \"border-transparent bg-secondary text-secondary-foreground\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground shadow-xs\",\n\n        outline: \" border [border-color:var(--badge-outline)] shadow-xs\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  },\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  );\n}\n\nexport { Badge, badgeVariants }\n","path":null,"size_bytes":1202,"size_tokens":null},"client/src/index.css":{"content":"@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n/* LIGHT MODE */\n:root {\n  --button-outline: rgba(0,0,0, .10);\n  --badge-outline: rgba(0,0,0, .05);\n  --opaque-button-border-intensity: -8;\n  --elevate-1: rgba(0,0,0, .03);\n  --elevate-2: rgba(0,0,0, .08);\n  --background: 220 15% 98%;\n  --foreground: 220 18% 12%;\n  --border: 220 12% 91%;\n  --card: 220 15% 96%;\n  --card-foreground: 220 18% 12%;\n  --card-border: 220 12% 93%;\n  --sidebar: 220 15% 94%;\n  --sidebar-foreground: 220 18% 15%;\n  --sidebar-border: 220 12% 90%;\n  --sidebar-primary: 43 96% 45%;\n  --sidebar-primary-foreground: 43 5% 98%;\n  --sidebar-accent: 220 15% 90%;\n  --sidebar-accent-foreground: 220 18% 20%;\n  --sidebar-ring: 43 96% 45%;\n  --popover: 220 15% 92%;\n  --popover-foreground: 220 18% 15%;\n  --popover-border: 220 12% 88%;\n  --primary: 43 96% 45%;\n  --primary-foreground: 43 5% 98%;\n  --secondary: 220 15% 88%;\n  --secondary-foreground: 220 18% 18%;\n  --muted: 220 12% 90%;\n  --muted-foreground: 220 15% 40%;\n  --accent: 220 12% 92%;\n  --accent-foreground: 220 18% 18%;\n  --destructive: 0 84% 42%;\n  --destructive-foreground: 0 5% 98%;\n  --input: 220 18% 35%;\n  --ring: 43 96% 45%;\n  --chart-1: 220 70% 35%;\n  --chart-2: 43 85% 40%;\n  --chart-3: 280 60% 40%;\n  --chart-4: 160 55% 35%;\n  --chart-5: 20 75% 45%;\n  --font-sans: Inter, system-ui, -apple-system, sans-serif;\n  --font-serif: Georgia, serif;\n  --font-mono: JetBrains Mono, Menlo, monospace;\n  --radius: 0.5rem;\n  --shadow-2xs: 0px 1px 2px 0px hsl(220 18% 12% / 0.05);\n  --shadow-xs: 0px 1px 3px 0px hsl(220 18% 12% / 0.08);\n  --shadow-sm: 0px 1px 2px 0px hsl(220 18% 12% / 0.06), 0px 1px 3px -1px hsl(220 18% 12% / 0.10);\n  --shadow: 0px 1px 3px 0px hsl(220 18% 12% / 0.10), 0px 1px 2px -1px hsl(220 18% 12% / 0.10);\n  --shadow-md: 0px 2px 4px -1px hsl(220 18% 12% / 0.06), 0px 4px 6px -1px hsl(220 18% 12% / 0.10);\n  --shadow-lg: 0px 4px 6px -2px hsl(220 18% 12% / 0.05), 0px 10px 15px -3px hsl(220 18% 12% / 0.10);\n  --shadow-xl: 0px 10px 10px -5px hsl(220 18% 12% / 0.04), 0px 20px 25px -5px hsl(220 18% 12% / 0.10);\n  --shadow-2xl: 0px 25px 50px -12px hsl(220 18% 12% / 0.25);\n  --tracking-normal: 0em;\n  --spacing: 0.25rem;\n\n/* Fallback for older browsers */\n  --sidebar-primary-border: hsl(var(--sidebar-primary));\n  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --sidebar-accent-border: hsl(var(--sidebar-accent));\n  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --primary-border: hsl(var(--primary));\n  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --secondary-border: hsl(var(--secondary));\n  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --muted-border: hsl(var(--muted));\n  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --accent-border: hsl(var(--accent));\n  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --destructive-border: hsl(var(--destructive));\n  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n}\n\n.dark {\n  --button-outline: rgba(255,255,255, .10);\n  --badge-outline: rgba(255,255,255, .05);\n  --opaque-button-border-intensity: 9;\n  --elevate-1: rgba(255,255,255, .04);\n  --elevate-2: rgba(255,255,255, .09);\n  --background: 220 18% 8%;\n  --foreground: 220 8% 95%;\n  --border: 220 12% 18%;\n  --card: 220 18% 10%;\n  --card-foreground: 220 8% 95%;\n  --card-border: 220 12% 12%;\n  --sidebar: 220 18% 12%;\n  --sidebar-foreground: 220 8% 90%;\n  --sidebar-border: 220 12% 15%;\n  --sidebar-primary: 43 96% 50%;\n  --sidebar-primary-foreground: 220 18% 8%;\n  --sidebar-accent: 220 18% 16%;\n  --sidebar-accent-foreground: 220 8% 90%;\n  --sidebar-ring: 43 96% 50%;\n  --popover: 220 18% 14%;\n  --popover-foreground: 220 8% 92%;\n  --popover-border: 220 12% 17%;\n  --primary: 43 96% 50%;\n  --primary-foreground: 220 18% 8%;\n  --secondary: 220 18% 18%;\n  --secondary-foreground: 220 8% 92%;\n  --muted: 220 12% 16%;\n  --muted-foreground: 220 8% 65%;\n  --accent: 220 12% 15%;\n  --accent-foreground: 220 8% 92%;\n  --destructive: 0 84% 48%;\n  --destructive-foreground: 220 8% 98%;\n  --input: 220 8% 75%;\n  --ring: 43 96% 50%;\n  --chart-1: 220 70% 60%;\n  --chart-2: 43 85% 65%;\n  --chart-3: 280 60% 65%;\n  --chart-4: 160 55% 60%;\n  --chart-5: 20 75% 60%;\n  --shadow-2xs: 0px 1px 2px 0px hsl(220 18% 0% / 0.20);\n  --shadow-xs: 0px 1px 3px 0px hsl(220 18% 0% / 0.25);\n  --shadow-sm: 0px 1px 2px 0px hsl(220 18% 0% / 0.20), 0px 1px 3px -1px hsl(220 18% 0% / 0.30);\n  --shadow: 0px 1px 3px 0px hsl(220 18% 0% / 0.30), 0px 1px 2px -1px hsl(220 18% 0% / 0.30);\n  --shadow-md: 0px 2px 4px -1px hsl(220 18% 0% / 0.20), 0px 4px 6px -1px hsl(220 18% 0% / 0.30);\n  --shadow-lg: 0px 4px 6px -2px hsl(220 18% 0% / 0.15), 0px 10px 15px -3px hsl(220 18% 0% / 0.30);\n  --shadow-xl: 0px 10px 10px -5px hsl(220 18% 0% / 0.15), 0px 20px 25px -5px hsl(220 18% 0% / 0.30);\n  --shadow-2xl: 0px 25px 50px -12px hsl(220 18% 0% / 0.40);\n\n/* Fallback for older browsers */\n  --sidebar-primary-border: hsl(var(--sidebar-primary));\n  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --sidebar-accent-border: hsl(var(--sidebar-accent));\n  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --primary-border: hsl(var(--primary));\n  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --secondary-border: hsl(var(--secondary));\n  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --muted-border: hsl(var(--muted));\n  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --accent-border: hsl(var(--accent));\n  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --destructive-border: hsl(var(--destructive));\n  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n}\n\n@layer base {\n  * {\n    @apply border-border;\n  }\n\n  body {\n    @apply font-sans antialiased bg-background text-foreground;\n  }\n}\n\n/**\n * Using the elevate system.\n * Automatic contrast adjustment.\n *\n * <element className=\"hover-elevate\" />\n * <element className=\"active-elevate-2\" />\n *\n * // Using the tailwind utility when a data attribute is \"on\"\n * <element className=\"toggle-elevate data-[state=on]:toggle-elevated\" />\n * // Or manually controlling the toggle state\n * <element className=\"toggle-elevate toggle-elevated\" />\n *\n * Elevation systems have to handle many states.\n * - not-hovered, vs. hovered vs. active  (three mutually exclusive states)\n * - toggled or not\n * - focused or not (this is not handled with these utilities)\n *\n * Even without handling focused or not, this is six possible combinations that\n * need to be distinguished from eachother visually.\n */\n@layer utilities {\n\n  /* Hide ugly search cancel button in Chrome until we can style it properly */\n  input[type=\"search\"]::-webkit-search-cancel-button {\n    @apply hidden;\n  }\n\n  /* Placeholder styling for contentEditable div */\n  [contenteditable][data-placeholder]:empty::before {\n    content: attr(data-placeholder);\n    color: hsl(var(--muted-foreground));\n    pointer-events: none;\n  }\n\n  /* .no-default-hover-elevate/no-default-active-elevate is an escape hatch so consumers of\n   * buttons/badges can remove the automatic brightness adjustment on interactions\n   * and program their own. */\n  .no-default-hover-elevate {}\n\n  .no-default-active-elevate {}\n\n\n  /**\n   * Toggleable backgrounds go behind the content. Hoverable/active goes on top.\n   * This way they can stack/compound. Both will overlap the parent's borders!\n   * So borders will be automatically adjusted both on toggle, and hover/active,\n   * and they will be compounded.\n   */\n  .toggle-elevate::before,\n  .toggle-elevate-2::before {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    /*border-radius: inherit;   match rounded corners */\n    border-radius: inherit;\n    z-index: -1;\n    /* sits behind content but above backdrop */\n  }\n\n  .toggle-elevate.toggle-elevated::before {\n    background-color: var(--elevate-2);\n  }\n\n  /* If there's a 1px border, adjust the inset so that it covers that parent's border */\n  .border.toggle-elevate::before {\n    inset: -1px;\n  }\n\n  /* Does not work on elements with overflow:hidden! */\n  .hover-elevate:not(.no-default-hover-elevate),\n  .active-elevate:not(.no-default-active-elevate),\n  .hover-elevate-2:not(.no-default-hover-elevate),\n  .active-elevate-2:not(.no-default-active-elevate) {\n    position: relative;\n    z-index: 0;\n  }\n\n  .hover-elevate:not(.no-default-hover-elevate)::after,\n  .active-elevate:not(.no-default-active-elevate)::after,\n  .hover-elevate-2:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:not(.no-default-active-elevate)::after {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    /*border-radius: inherit;   match rounded corners */\n    border-radius: inherit;\n    z-index: 999;\n    /* sits in front of content */\n  }\n\n  .hover-elevate:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-1);\n  }\n\n  .hover-elevate-2:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-2);\n  }\n\n  /* If there's a 1px border, adjust the inset so that it covers that parent's border */\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate-2:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate-2:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after {\n    inset: -1px;\n  }\n}\n","path":null,"size_bytes":10801,"size_tokens":null},"client/src/components/ui/button.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\" +\n  \" hover-elevate active-elevate-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"bg-primary text-primary-foreground border border-primary-border\",\n        destructive:\n          \"bg-destructive text-destructive-foreground border border-destructive-border\",\n        outline:\n          // Shows the background color of whatever card / sidebar / accent background it is inside of.\n          // Inherits the current text color.\n          \" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none \",\n        secondary: \"border bg-secondary text-secondary-foreground border border-secondary-border \",\n        // Add a transparent border so that when someone toggles a border on later, it doesn't shift layout/size.\n        ghost: \"border border-transparent\",\n      },\n      // Heights are set as \"min\" heights, because sometimes Ai will place large amount of content\n      // inside buttons. With a min-height they will look appropriate with small amounts of content,\n      // but will expand to fit large amounts of content.\n      size: {\n        default: \"min-h-9 px-4 py-2\",\n        sm: \"min-h-8 rounded-md px-3 text-xs\",\n        lg: \"min-h-10 rounded-md px-8\",\n        icon: \"h-9 w-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  },\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  },\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","path":null,"size_bytes":2359,"size_tokens":null},"client/src/components/ui/card.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n));\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n));\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n));\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardDescription,\n  CardContent,\n}\n","path":null,"size_bytes":1904,"size_tokens":null},"client/src/components/ui/toggle.tsx":{"content":"import * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 gap-2\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-10 px-3 min-w-10\",\n        sm: \"h-9 px-2.5 min-w-9\",\n        lg: \"h-11 px-5 min-w-11\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n","path":null,"size_bytes":1527,"size_tokens":null},"client/src/components/ui/form.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-sm text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-sm font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","path":null,"size_bytes":4120,"size_tokens":null},"client/src/components/ui/popover.tsx":{"content":"import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent }\n","path":null,"size_bytes":1280,"size_tokens":null},"client/src/components/PaymentModal.tsx":{"content":"import {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { useI18n } from \"@/lib/i18n\";\nimport { useUser } from \"@/lib/store\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { QRCodeSVG } from \"qrcode.react\";\nimport { Copy, Building2, QrCode, Upload, Check, Clock, Loader2 } from \"lucide-react\";\nimport { useState } from \"react\";\n\ninterface PaymentModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  amount: number;\n}\n\nconst bankAccount = {\n  bankName: \"กสิกรไทย\",\n  accountNumber: \"123-4-56789-0\",\n  accountName: \"QNQ Lottery Co., Ltd.\",\n  promptPayId: \"0123456789\"\n};\n\nexport function PaymentModal({ isOpen, onClose, amount }: PaymentModalProps) {\n  const { language, t } = useI18n();\n  const { user } = useUser();\n  const { toast } = useToast();\n  const [copied, setCopied] = useState<string | null>(null);\n  const [slipFile, setSlipFile] = useState<File | null>(null);\n\n  const referenceNumber = `QNQ${Date.now().toString(36).toUpperCase()}`;\n\n  const fileToBase64 = (file: File): Promise<string> => {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.readAsDataURL(file);\n      reader.onload = () => resolve(reader.result as string);\n      reader.onerror = error => reject(error);\n    });\n  };\n\n  const submitDepositMutation = useMutation({\n    mutationFn: async () => {\n      const slipBase64 = slipFile ? await fileToBase64(slipFile) : null;\n      \n      const res = await apiRequest(\"POST\", \"/api/transactions\", {\n        userId: user?.id,\n        type: \"deposit\",\n        amount: amount,\n        slipUrl: slipBase64\n      });\n      return res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/transactions'] });\n      queryClient.invalidateQueries({ queryKey: [`/api/users/${user?.id}`] });\n      setSlipFile(null);\n      onClose();\n      toast({\n        title: language === \"th\" ? \"ส่งคำขอฝากเงินแล้ว\" : \"Deposit request submitted\",\n        description: language === \"th\" \n          ? \"กรุณารอ Admin ตรวจสอบและอนุมัติ\" \n          : \"Please wait for admin to verify and approve\"\n      });\n    },\n    onError: (error) => {\n      toast({\n        title: language === \"th\" ? \"เกิดข้อผิดพลาด\" : \"Error occurred\",\n        description: error.message,\n        variant: \"destructive\"\n      });\n    }\n  });\n\n  const copyToClipboard = (text: string, key: string) => {\n    navigator.clipboard.writeText(text);\n    setCopied(key);\n    setTimeout(() => setCopied(null), 2000);\n  };\n\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file) {\n      setSlipFile(file);\n    }\n  };\n\n  const handleSubmit = async () => {\n    if (!slipFile) {\n      toast({\n        title: language === \"th\" ? \"กรุณาอัพโหลดสลิป\" : \"Please upload slip\",\n        variant: \"destructive\"\n      });\n      return;\n    }\n\n    if (!user?.id) {\n      toast({\n        title: language === \"th\" ? \"กรุณาเข้าสู่ระบบ\" : \"Please login\",\n        variant: \"destructive\"\n      });\n      return;\n    }\n\n    submitDepositMutation.mutate();\n  };\n\n  const promptPayQrData = `00020101021129370016A000000677010111011300${bankAccount.promptPayId}5802TH53037646304`;\n\n  return (\n    <Dialog open={isOpen} onOpenChange={onClose}>\n      <DialogContent className=\"sm:max-w-lg\">\n        <DialogHeader>\n          <DialogTitle className=\"flex items-center gap-2\">\n            <Building2 className=\"h-5 w-5\" />\n            {t(\"payment.title\")}\n          </DialogTitle>\n        </DialogHeader>\n\n        <div className=\"space-y-4\">\n          <Card className=\"bg-gradient-to-br from-primary/10 to-primary/5 border-primary/20\">\n            <CardContent className=\"p-4 text-center\">\n              <p className=\"text-sm text-muted-foreground mb-1\">\n                {language === \"th\" ? \"ยอดที่ต้องชำระ\" : \"Amount to Pay\"}\n              </p>\n              <p className=\"text-3xl font-bold text-primary\">\n                {amount.toLocaleString()} {t(\"common.baht\")}\n              </p>\n              <div className=\"flex items-center justify-center gap-2 mt-2 text-xs text-muted-foreground\">\n                <Clock className=\"h-3 w-3\" />\n                {t(\"payment.reference\")}: {referenceNumber}\n              </div>\n            </CardContent>\n          </Card>\n\n          <Tabs defaultValue=\"promptpay\">\n            <TabsList className=\"grid w-full grid-cols-2\">\n              <TabsTrigger value=\"promptpay\" className=\"gap-2\">\n                <QrCode className=\"h-4 w-4\" />\n                {t(\"payment.promptPay\")}\n              </TabsTrigger>\n              <TabsTrigger value=\"bank\" className=\"gap-2\">\n                <Building2 className=\"h-4 w-4\" />\n                {t(\"payment.bankTransfer\")}\n              </TabsTrigger>\n            </TabsList>\n\n            <TabsContent value=\"promptpay\" className=\"space-y-4\">\n              <div className=\"flex justify-center p-4 bg-white rounded-lg\">\n                <QRCodeSVG \n                  value={promptPayQrData}\n                  size={200}\n                  level=\"H\"\n                  includeMargin\n                />\n              </div>\n              <div className=\"text-center\">\n                <p className=\"text-sm text-muted-foreground\">\n                  {t(\"payment.scanQr\")}\n                </p>\n                <div className=\"flex items-center justify-center gap-2 mt-2\">\n                  <span className=\"font-mono font-bold\">{bankAccount.promptPayId}</span>\n                  <Button\n                    variant=\"ghost\"\n                    size=\"icon\"\n                    className=\"h-6 w-6\"\n                    onClick={() => copyToClipboard(bankAccount.promptPayId, \"promptpay\")}\n                  >\n                    {copied === \"promptpay\" ? (\n                      <Check className=\"h-3 w-3 text-green-500\" />\n                    ) : (\n                      <Copy className=\"h-3 w-3\" />\n                    )}\n                  </Button>\n                </div>\n              </div>\n            </TabsContent>\n\n            <TabsContent value=\"bank\" className=\"space-y-3\">\n              <Card>\n                <CardContent className=\"p-4 space-y-3\">\n                  <div className=\"flex justify-between items-center\">\n                    <span className=\"text-sm text-muted-foreground\">\n                      {language === \"th\" ? \"ธนาคาร\" : \"Bank\"}\n                    </span>\n                    <span className=\"font-semibold\">{bankAccount.bankName}</span>\n                  </div>\n                  <div className=\"flex justify-between items-center\">\n                    <span className=\"text-sm text-muted-foreground\">\n                      {language === \"th\" ? \"เลขบัญชี\" : \"Account No.\"}\n                    </span>\n                    <div className=\"flex items-center gap-2\">\n                      <span className=\"font-mono font-bold\">{bankAccount.accountNumber}</span>\n                      <Button\n                        variant=\"ghost\"\n                        size=\"icon\"\n                        className=\"h-6 w-6\"\n                        onClick={() => copyToClipboard(bankAccount.accountNumber.replace(/-/g, \"\"), \"account\")}\n                      >\n                        {copied === \"account\" ? (\n                          <Check className=\"h-3 w-3 text-green-500\" />\n                        ) : (\n                          <Copy className=\"h-3 w-3\" />\n                        )}\n                      </Button>\n                    </div>\n                  </div>\n                  <div className=\"flex justify-between items-center\">\n                    <span className=\"text-sm text-muted-foreground\">\n                      {language === \"th\" ? \"ชื่อบัญชี\" : \"Account Name\"}\n                    </span>\n                    <span className=\"font-semibold\">{bankAccount.accountName}</span>\n                  </div>\n                </CardContent>\n              </Card>\n            </TabsContent>\n          </Tabs>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"slip\">{t(\"payment.uploadSlip\")}</Label>\n            <div className=\"relative\">\n              <Input\n                id=\"slip\"\n                type=\"file\"\n                accept=\"image/*\"\n                onChange={handleFileChange}\n                className=\"cursor-pointer\"\n                data-testid=\"input-upload-slip\"\n              />\n              {slipFile && (\n                <p className=\"text-sm text-green-600 mt-1 flex items-center gap-1\">\n                  <Check className=\"h-3 w-3\" />\n                  {slipFile.name}\n                </p>\n              )}\n            </div>\n          </div>\n\n          <Button\n            onClick={handleSubmit}\n            className=\"w-full\"\n            disabled={!slipFile || submitDepositMutation.isPending}\n            data-testid=\"button-confirm-payment\"\n          >\n            {submitDepositMutation.isPending ? (\n              <>\n                <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                {language === \"th\" ? \"กำลังส่งคำขอ...\" : \"Submitting...\"}\n              </>\n            ) : (\n              <>\n                <Upload className=\"h-4 w-4 mr-2\" />\n                {language === \"th\" ? \"ส่งคำขอฝากเงิน\" : \"Submit Deposit Request\"}\n              </>\n            )}\n          </Button>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","path":null,"size_bytes":10065,"size_tokens":null},"client/src/components/ui/skeleton.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","path":null,"size_bytes":261,"size_tokens":null},"replit.md":{"content":"# QNQ Lottery System\n\n## Overview\n\nQNQ Lottery is a comprehensive online lottery betting platform that supports multiple lottery types including Thai Government lottery, stock-based lotteries (Thai, Nikkei, Dow Jones, FTSE, DAX), international lotteries (Laos, Hanoi, Malaysia, Singapore), and quick-draw games (Yeekee, Keno). The system provides a complete betting workflow with cart management, payment processing, affiliate program, user wallet management, and administrative controls including blocked number management.\n\n## User Preferences\n\nPreferred communication style: Simple, everyday language.\n\n## System Architecture\n\n### Frontend Architecture\n\n**Framework & Build System**\n- React 18 with TypeScript using Vite as the build tool\n- Single Page Application (SPA) with client-side routing via Wouter\n- Component library built on Radix UI primitives with shadcn/ui design system\n- Styling via Tailwind CSS with custom design tokens for theming (light/dark mode support)\n\n**State Management**\n- Zustand for global state management with persistence middleware\n- TanStack Query (React Query) for server state management and caching\n- Separate stores for: cart items, user authentication, admin authentication, blocked numbers, and i18n (internationalization)\n\n**Key Design Decisions**\n- Mobile-first responsive design following design guidelines inspired by premium financial platforms\n- Thai-English bilingual support with persistent language preferences\n- Real-time cart management with local persistence\n- Premium credibility through refined details rather than decoration\n\n### Backend Architecture\n\n**Server Framework**\n- Express.js HTTP server with custom middleware\n- HTTP server wrapped for potential WebSocket upgrades\n- RESTful API design pattern\n\n**Database & ORM**\n- PostgreSQL database (configured for Neon serverless)\n- Drizzle ORM for type-safe database queries\n- Schema-first approach with shared TypeScript types between client and server\n- Database migrations managed via Drizzle Kit\n\n**Key Features**\n- Blocked numbers management by lottery type and bet type\n- Payout rate calculation system with configurable rates\n- Session-based authentication (prepared for express-session integration)\n- Transaction management for deposits, withdrawals, bets, winnings, and affiliate commissions\n\n**API Structure**\n- `/api/blocked-numbers` - CRUD operations for managing blocked lottery numbers\n- User, bet, transaction, and affiliate management endpoints (referenced in client code)\n- Rate limiting and security middleware ready for production\n\n### Data Models\n\n**Core Entities**\n1. **User** - Authentication, balance, referral codes, affiliate earnings\n2. **Bet** - Lottery type, bet type, numbers, amounts, status tracking\n3. **BlockedNumber** - System-wide number restrictions by lottery and bet type\n4. **Transaction** - Financial movements (deposits, withdrawals, winnings, affiliate commissions)\n5. **Affiliate** - Referral tracking between users\n\n**Lottery Types** - 12 supported types with localized names and draw schedules\n**Bet Types** - 9 bet variations with different payout multipliers (3.2x to 4500x)\n\n### Authentication & Authorization\n\n**User Authentication**\n- Client-side mock authentication for development\n- Prepared for server-side session management with connect-pg-simple\n- Separate admin authentication system\n- Protected routes and conditional UI rendering\n\n**Security Considerations**\n- Credential-based API requests\n- CORS configuration prepared\n- Rate limiting infrastructure ready\n- Input validation via Zod schemas\n\n## External Dependencies\n\n### Third-Party Services\n\n**Payment Integration**\n- PromptPay QR code generation for deposits\n- Manual payment verification via slip upload\n- Bank transfer support (KBank configured as example)\n- Prepared for Stripe integration (dependency installed)\n\n**Lottery Results**\n- External API integration planned for live lottery results\n- Mock data structure for 12 lottery types\n- Real-time update capability via polling/WebSocket\n\n### Key NPM Packages\n\n**UI & Styling**\n- `@radix-ui/*` - Headless UI component primitives\n- `tailwindcss` - Utility-first CSS framework\n- `class-variance-authority` - Component variant management\n- `lucide-react` - Icon library\n\n**Data & Forms**\n- `@tanstack/react-query` - Server state management\n- `react-hook-form` - Form handling\n- `@hookform/resolvers` - Form validation\n- `zod` - Schema validation\n\n**Database**\n- `@neondatabase/serverless` - Neon PostgreSQL driver\n- `drizzle-orm` - TypeScript ORM\n- `drizzle-zod` - Schema to Zod converter\n\n**Utilities**\n- `date-fns` - Date manipulation\n- `qrcode.react` - QR code generation\n- `nanoid` - Unique ID generation\n- `zustand` - State management\n\n### Font Dependencies\n- Google Fonts CDN: Inter (primary), Noto Sans Thai (Thai support), Urbanist (accent/logo)\n\n## Recent Changes\n\n### PostgreSQL Database Integration (Nov 29, 2025)\n- Migrated from in-memory storage to PostgreSQL database using Drizzle ORM\n- Updated schema.ts with proper Drizzle table definitions using pgTable\n- Implemented DatabaseStorage class replacing MemStorage for all CRUD operations\n- All routes now properly parse integer IDs for database operations\n- Tables created: users, bets, blocked_numbers, transactions, affiliates\n- User IDs are now integers (serial primary key) instead of strings\n- Added proper foreign key relationships between tables\n- Affiliate system properly tracks referrals and calculates 20% commission on bets\n\n### Password Security Update (Nov 29, 2025)\n- Implemented secure password hashing using Node.js crypto module (scrypt algorithm)\n- New passwords are stored as `salt:hash` format with 32-byte salt and 64-byte key\n- Login verification uses timing-safe comparison to prevent timing attacks\n- Backward compatible: old plaintext passwords still work for existing users\n- New file: server/password.ts with hashPassword() and verifyPassword() functions\n\n### Lottery Results Page Enhancement (Nov 29, 2025)\n- Thai Government lottery: Live API integration from rayriffy.com\n- External links for all 12 lottery types to official/trusted result sources:\n  - Thai Stock: SET.or.th (ตลาดหลักทรัพย์แห่งประเทศไทย)\n  - International stocks: Investing.com\n  - Regional lotteries: Official lottery sites\n\n### Payout Rates Error Handling Enhancement (Nov 29, 2025)\n- Storage layer now throws explicit errors when payout rates are missing instead of silently using defaults\n- Bet creation endpoint catches payout rate errors and returns user-friendly \"System configuration error\" message\n- Admin UI shows blocking error state when payout settings are incomplete or fail to load\n- Displays count of found rates vs expected rates (e.g., \"Found 7/9 rates\") to help diagnose issues\n- Initialization of payout rates occurs at server startup via initializePayoutRates()\n\n### Telegram Notification System (Nov 29, 2025)\n- Real-time notifications via Telegram Bot API for all financial transactions\n- New file: server/telegram.ts with notification functions\n- Environment secrets: TELEGRAM_TOKEN and CHAT_ID stored in Replit Secrets\n- Notification types implemented:\n  1. **Customer Deposit Request** - Sent when user submits deposit request (shows \"📎 มีสลิปแนบ\" or \"⚠️ ไม่มีสลิป\")\n  2. **Customer Withdrawal Request** - Sent when user submits withdrawal request\n  3. **Customer Bet Placement** - Sent when user purchases lottery tickets (includes lottery type, bet type, numbers, amount)\n  4. **Admin Approval** - Sent when admin approves deposit/withdrawal\n  5. **Admin Rejection** - Sent when admin rejects deposit/withdrawal\n- All notifications include: username, user ID, amount, timestamp, transaction type\n- Bet notifications include detailed breakdown of each bet item\n- Admin action notifications include transaction ID for reference\n\n### Smart Checkout Flow (Nov 29, 2025)\n- **Balance-aware checkout**: Users with sufficient balance place bets directly; insufficient balance users see deposit modal\n- **Atomic transaction for bet placement**: \n  - New storage method `createBetsWithBalanceDeduction` uses Drizzle transaction for all-or-nothing operation\n  - Creates all bets, deducts balance, and logs transaction in single atomic operation\n  - If any operation fails, entire transaction rolls back automatically\n- **Server-side validation**: Balance check performed inside transaction to prevent race conditions\n- **Frontend reliability**: Removed manual balance updates; relies on react-query cache invalidation to sync with server\n- **Flow**: Deposit → Admin approval → Balance credited → User shops → Smart checkout based on balance\n\n### Admin Slip Viewing (Nov 29, 2025)\n- Added slip image viewer in Admin page using Dialog component\n- Admins can view payment slips before approving/rejecting deposit requests\n- Shows \"ดูสลิป\" button when slip is available\n\n### Betting Limits System (Nov 29, 2025)\n- Admin-configurable max bet amounts per number with optional lottery type associations\n- Schema: `betLimits` table (id, number, maxAmount, isActive) with `betLimitLotteryTypes` join table (betLimitId, lotteryType)\n- Storage methods: CRUD for bet limits with transaction-safe operations\n- API endpoints: `/api/bet-limits` (GET all, POST create, PUT update, DELETE remove)\n- Admin UI: New \"Limits\" tab with form to add limits (number, lottery types, max amount) and table to manage existing limits\n- Enforcement: Checks limits before bet creation in `/api/bets`, returns descriptive error with max/current/remaining amounts\n- Limits can apply to all lottery types (no associations) or specific selected types\n- Per-draw enforcement: Sums existing bets for same number/lottery/draw date when checking limits\n\n### Bet Type Enable/Disable System (Nov 29, 2025)\n- Admin-configurable global toggle for each bet type (3 ตัวบน, 2 ตัวบน, วิ่งบน, etc.)\n- Schema: `betTypeSettings` table (id, betType, isEnabled, updatedAt)\n- Storage methods: `initializeBetTypeSettings()`, `getBetTypeSettings()`, `updateBetTypeSetting()`, `isBetTypeEnabled()`\n- API endpoints: `GET /api/bet-type-settings`, `PATCH /api/bet-type-settings/:betType`\n- Admin UI: New \"ประเภท\" (Types) tab with toggle switches for each of the 9 bet types\n- Enforcement: Each cart item validated via `isBetTypeEnabled()` before processing in `/api/bets`\n- Validation order: bet type enabled → payout rate → blocked numbers → bet limits\n- All bet types initialized as enabled on server startup\n\n### Thai Lottery Bet Types Update (Dec 1, 2025)\n- Restructured bet types to 9 new types with proper payout rates:\n  1. **TWO_TOP** (2 ตัวบน) - x60 - last 2 digits of first prize\n  2. **TWO_BOTTOM** (2 ตัวล่าง) - x60 - 2-digit bottom prize\n  3. **THREE_TOP** (3 ตัวตรง) - x500 - last 3 digits of first prize\n  4. **THREE_TOD** (3 ตัวโต๊ด) - x90 - any permutation of last 3 digits\n  5. **FOUR_TOP** (4 ตัวบน) - x900 - last 4 digits of first prize\n  6. **FIVE_TOP** (5 ตัวบน) - x2000 - last 5 digits of first prize\n  7. **RUN_TOP** (วิ่งบน) - x3 - single digit in last 3 digits\n  8. **RUN_BOTTOM** (วิ่งล่าง) - x4 - single digit in 2-digit bottom\n  9. **REVERSE** (เลขกลับ) - x94 - both orders of 2-digit bet win\n- Updated checkBetWin function with proper winning logic for all 9 bet types\n- Added support for comma-separated numbers in set bets\n- Added canProcessBet validation to skip bets when result data is incomplete\n- Updated BetTypeSelector UI with categorized bet types (2-digit, 3-digit, 4-5 digit, floating, special)\n- Updated SetCalculator with digit validation for 1-5 digit bet types\n- Removed old bet types: THREE_TOOD, THREE_FRONT, THREE_BOTTOM, THREE_REVERSE","path":null,"size_bytes":11856,"size_tokens":null},"client/src/components/ui/context-menu.tsx":{"content":"import * as React from \"react\"\nimport * as ContextMenuPrimitive from \"@radix-ui/react-context-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ContextMenu = ContextMenuPrimitive.Root\n\nconst ContextMenuTrigger = ContextMenuPrimitive.Trigger\n\nconst ContextMenuGroup = ContextMenuPrimitive.Group\n\nconst ContextMenuPortal = ContextMenuPrimitive.Portal\n\nconst ContextMenuSub = ContextMenuPrimitive.Sub\n\nconst ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup\n\nconst ContextMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <ContextMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </ContextMenuPrimitive.SubTrigger>\n))\nContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName\n\nconst ContextMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName\n\nconst ContextMenuContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Portal>\n    <ContextMenuPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"z-50 max-h-[--radix-context-menu-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </ContextMenuPrimitive.Portal>\n))\nContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName\n\nconst ContextMenuItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName\n\nconst ContextMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <ContextMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.CheckboxItem>\n))\nContextMenuCheckboxItem.displayName =\n  ContextMenuPrimitive.CheckboxItem.displayName\n\nconst ContextMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <ContextMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.RadioItem>\n))\nContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName\n\nconst ContextMenuLabel = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold text-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName\n\nconst ContextMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName\n\nconst ContextMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nContextMenuShortcut.displayName = \"ContextMenuShortcut\"\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n}\n","path":null,"size_bytes":7428,"size_tokens":null},"client/src/components/ui/tooltip.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Content\n    ref={ref}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","path":null,"size_bytes":1209,"size_tokens":null},"server/password.ts":{"content":"import { scrypt, randomBytes, timingSafeEqual } from \"crypto\";\nimport { promisify } from \"util\";\n\nconst scryptAsync = promisify(scrypt);\n\nconst SALT_LENGTH = 32;\nconst KEY_LENGTH = 64;\n\nexport async function hashPassword(password: string): Promise<string> {\n  const salt = randomBytes(SALT_LENGTH).toString(\"hex\");\n  const derivedKey = (await scryptAsync(password, salt, KEY_LENGTH)) as Buffer;\n  return `${salt}:${derivedKey.toString(\"hex\")}`;\n}\n\nexport async function verifyPassword(password: string, storedHash: string): Promise<boolean> {\n  if (!storedHash.includes(\":\")) {\n    return password === storedHash;\n  }\n  \n  const [salt, hashHex] = storedHash.split(\":\");\n  const storedKeyBuffer = Buffer.from(hashHex, \"hex\");\n  const derivedKey = (await scryptAsync(password, salt, KEY_LENGTH)) as Buffer;\n  \n  return timingSafeEqual(storedKeyBuffer, derivedKey);\n}\n","path":null,"size_bytes":865,"size_tokens":null},"client/src/components/NumberInput.tsx":{"content":"import { useState, useRef, useEffect } from \"react\";\nimport { Input } from \"@/components/ui/input\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Alert, AlertDescription } from \"@/components/ui/alert\";\nimport { useI18n } from \"@/lib/i18n\";\nimport { useBlockedNumbers } from \"@/lib/store\";\nimport type { LotteryType, BetType } from \"@shared/schema\";\nimport { AlertTriangle, X, Shuffle } from \"lucide-react\";\n\ninterface NumberInputProps {\n  lotteryType: LotteryType | null;\n  betType: BetType | null;\n  numbers: string[];\n  onNumbersChange: (numbers: string[]) => void;\n}\n\nconst getRequiredDigits = (betType: BetType | null): number => {\n  if (!betType) return 0;\n  if (betType.startsWith(\"THREE_\")) return 3;\n  if (betType.startsWith(\"TWO_\")) return 2;\n  if (betType.startsWith(\"RUN_\")) return 1;\n  return 0;\n};\n\nexport function NumberInput({ lotteryType, betType, numbers, onNumbersChange }: NumberInputProps) {\n  const { language, t } = useI18n();\n  const { isBlocked } = useBlockedNumbers();\n  const [currentInput, setCurrentInput] = useState(\"\");\n  const inputRef = useRef<HTMLInputElement>(null);\n  \n  const requiredDigits = getRequiredDigits(betType);\n  const maxNumbers = betType?.includes(\"REVERSE\") ? 1 : 10;\n\n  const handleInputChange = (value: string) => {\n    const numbersOnly = value.replace(/[^0-9]/g, \"\").slice(0, requiredDigits);\n    setCurrentInput(numbersOnly);\n  };\n\n  const addNumber = () => {\n    if (currentInput.length === requiredDigits && numbers.length < maxNumbers) {\n      if (!numbers.includes(currentInput)) {\n        onNumbersChange([...numbers, currentInput]);\n        setCurrentInput(\"\");\n        inputRef.current?.focus();\n      }\n    }\n  };\n\n  const removeNumber = (index: number) => {\n    onNumbersChange(numbers.filter((_, i) => i !== index));\n  };\n\n  const generateRandom = () => {\n    const random = Math.floor(Math.random() * Math.pow(10, requiredDigits))\n      .toString()\n      .padStart(requiredDigits, \"0\");\n    setCurrentInput(random);\n  };\n\n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    if (e.key === \"Enter\") {\n      e.preventDefault();\n      addNumber();\n    }\n  };\n\n  const blockedWarning = lotteryType && currentInput.length === requiredDigits && \n    isBlocked(lotteryType, currentInput, betType || undefined);\n\n  return (\n    <div className=\"space-y-3\">\n      <div className=\"flex gap-2\">\n        <div className=\"relative flex-1\">\n          <Input\n            ref={inputRef}\n            type=\"text\"\n            inputMode=\"numeric\"\n            pattern=\"[0-9]*\"\n            value={currentInput}\n            onChange={(e) => handleInputChange(e.target.value)}\n            onKeyDown={handleKeyDown}\n            placeholder={`${language === \"th\" ? \"กรอกเลข\" : \"Enter\"} ${requiredDigits} ${language === \"th\" ? \"หลัก\" : \"digits\"}`}\n            className=\"text-center text-2xl font-bold tracking-[0.5em] h-14\"\n            disabled={!betType}\n            data-testid=\"input-lottery-number\"\n          />\n          {requiredDigits > 0 && (\n            <div className=\"absolute right-2 top-1/2 -translate-y-1/2 text-xs text-muted-foreground\">\n              {currentInput.length}/{requiredDigits}\n            </div>\n          )}\n        </div>\n        <Button\n          variant=\"secondary\"\n          size=\"icon\"\n          onClick={generateRandom}\n          disabled={!betType}\n          className=\"h-14 w-14\"\n          data-testid=\"button-random-number\"\n        >\n          <Shuffle className=\"h-5 w-5\" />\n        </Button>\n      </div>\n\n      {blockedWarning && (\n        <Alert variant=\"destructive\">\n          <AlertTriangle className=\"h-4 w-4\" />\n          <AlertDescription>\n            {t(\"home.blockedWarning\")}\n          </AlertDescription>\n        </Alert>\n      )}\n\n      <Button\n        onClick={addNumber}\n        disabled={currentInput.length !== requiredDigits || numbers.length >= maxNumbers || !!blockedWarning}\n        className=\"w-full\"\n        data-testid=\"button-add-number\"\n      >\n        {language === \"th\" ? \"เพิ่มเลข\" : \"Add Number\"}\n      </Button>\n\n      {numbers.length > 0 && (\n        <div className=\"flex flex-wrap gap-2\">\n          {numbers.map((num, index) => {\n            const isBlockedNum = lotteryType && isBlocked(lotteryType, num, betType || undefined);\n            return (\n              <Badge\n                key={index}\n                variant={isBlockedNum ? \"destructive\" : \"secondary\"}\n                className=\"text-lg font-bold tracking-widest px-3 py-1.5 gap-2\"\n                data-testid={`badge-number-${index}`}\n              >\n                {num}\n                <button\n                  onClick={() => removeNumber(index)}\n                  className=\"hover:bg-background/20 rounded-full p-0.5\"\n                  data-testid={`button-remove-number-${index}`}\n                >\n                  <X className=\"h-3 w-3\" />\n                </button>\n              </Badge>\n            );\n          })}\n        </div>\n      )}\n\n      {betType?.includes(\"REVERSE\") && numbers.length === 1 && (\n        <p className=\"text-sm text-muted-foreground\">\n          {language === \"th\" \n            ? \"สามารถใส่ได้ 1 เลขเท่านั้น (ระบบจะสร้างทุกการเรียงสลับให้อัตโนมัติ)\"\n            : \"Only 1 number allowed (system will generate all permutations)\"}\n        </p>\n      )}\n    </div>\n  );\n}\n","path":null,"size_bytes":5506,"size_tokens":null},"client/src/components/ui/label.tsx":{"content":"import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n","path":null,"size_bytes":710,"size_tokens":null},"client/src/components/ui/table.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","path":null,"size_bytes":2765,"size_tokens":null},"client/src/components/ui/textarea.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef<\n  HTMLTextAreaElement,\n  React.ComponentProps<\"textarea\">\n>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  )\n})\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n","path":null,"size_bytes":689,"size_tokens":null},"client/src/components/ui/calendar.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\nimport { DayPicker } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  ...props\n}: CalendarProps) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"p-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n        month: \"space-y-4\",\n        caption: \"flex justify-center pt-1 relative items-center\",\n        caption_label: \"text-sm font-medium\",\n        nav: \"space-x-1 flex items-center\",\n        nav_button: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\n        ),\n        nav_button_previous: \"absolute left-1\",\n        nav_button_next: \"absolute right-1\",\n        table: \"w-full border-collapse space-y-1\",\n        head_row: \"flex\",\n        head_cell:\n          \"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]\",\n        row: \"flex w-full mt-2\",\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\n        day: cn(\n          buttonVariants({ variant: \"ghost\" }),\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\n        ),\n        day_range_end: \"day-range-end\",\n        day_selected:\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n        day_today: \"bg-accent text-accent-foreground\",\n        day_outside:\n          \"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground\",\n        day_disabled: \"text-muted-foreground opacity-50\",\n        day_range_middle:\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\n        day_hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        IconLeft: ({ className, ...props }) => (\n          <ChevronLeft className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n        IconRight: ({ className, ...props }) => (\n          <ChevronRight className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n      }}\n      {...props}\n    />\n  )\n}\nCalendar.displayName = \"Calendar\"\n\nexport { Calendar }\n","path":null,"size_bytes":2695,"size_tokens":null},"client/src/components/ui/alert-dialog.tsx":{"content":"import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n","path":null,"size_bytes":4420,"size_tokens":null},"client/src/components/ui/sheet.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      {children}\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n","path":null,"size_bytes":4281,"size_tokens":null},"client/src/pages/Results.tsx":{"content":"import { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { useI18n } from \"@/lib/i18n\";\nimport { lotteryTypeNames, type LotteryType } from \"@shared/schema\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { \n  Trophy, \n  ExternalLink, \n  Clock, \n  Wifi, \n  RefreshCw,\n  Landmark,\n  TrendingUp,\n  Globe,\n  Zap,\n  ShieldCheck,\n  ArrowUpRight\n} from \"lucide-react\";\nimport { useState } from \"react\";\n\ninterface ResultData {\n  firstPrize?: string;\n  threeTop?: string[];\n  threeBottom?: string[];\n  twoDigit?: string;\n  date: string;\n  isLive: boolean;\n  externalUrl: string;\n}\n\ninterface StockData {\n  name: string;\n  symbol: string;\n  price: number;\n  formattedPrice: string;\n  change: string;\n  changePercent: string;\n  twoDigit: string;\n  threeDigit: string;\n  marketState: string;\n}\n\ninterface HanoiLotteryData {\n  date: string;\n  firstPrize: string;\n  twoDigit: string;\n  threeDigit: string;\n  prizes: {\n    special: string;\n    g1: string[];\n    g2: string[];\n    g3: string[];\n    g4: string[];\n    g5: string[];\n    g6: string[];\n    g7: string[];\n  };\n  isLive: boolean;\n  source: string;\n}\n\ninterface ThaiLottoApiResponse {\n  status: string;\n  response: {\n    date: string;\n    endpoint: string;\n    prizes: Array<{\n      id: string;\n      name: string;\n      reward: string;\n      amount: number;\n      number: string[];\n    }>;\n    runningNumbers: Array<{\n      id: string;\n      name: string;\n      reward: string;\n      number: string[];\n    }>;\n  };\n}\n\nconst externalUrls: Record<LotteryType, string> = {\n  THAI_GOV: \"https://www.glo.or.th/\",\n  THAI_STOCK: \"https://www.set.or.th/th/market/index/set/overview\",\n  STOCK_NIKKEI: \"https://www.investing.com/indices/japan-ni225\",\n  STOCK_DOW: \"https://www.investing.com/indices/us-30\",\n  STOCK_FTSE: \"https://www.investing.com/indices/uk-100\",\n  STOCK_DAX: \"https://www.investing.com/indices/germany-30\",\n  LAO: \"https://www.sanook.com/news/laolotto/\",\n  HANOI: \"https://www.sealotto.com/en/vietnam/hanoi\",\n  MALAYSIA: \"https://www.check4d.org/\",\n  SINGAPORE: \"https://www.singaporepools.com.sg/en/product/Pages/4d_results.aspx\",\n  KENO: \"https://nclottery.com/keno-results\"\n};\n\nconst externalUrlNames: Record<LotteryType, { th: string; en: string }> = {\n  THAI_GOV: { th: \"สำนักงานสลากกินแบ่งรัฐบาล\", en: \"GLO Official\" },\n  THAI_STOCK: { th: \"SET Index\", en: \"SET Index\" },\n  STOCK_NIKKEI: { th: \"Investing.com\", en: \"Investing.com\" },\n  STOCK_DOW: { th: \"Investing.com\", en: \"Investing.com\" },\n  STOCK_FTSE: { th: \"Investing.com\", en: \"Investing.com\" },\n  STOCK_DAX: { th: \"Investing.com\", en: \"Investing.com\" },\n  LAO: { th: \"Sanook หวยลาว\", en: \"Sanook Lao\" },\n  HANOI: { th: \"SEA Lotto\", en: \"SEA Lotto\" },\n  MALAYSIA: { th: \"Check4D\", en: \"Check4D\" },\n  SINGAPORE: { th: \"Singapore Pools\", en: \"Singapore Pools\" },\n  KENO: { th: \"NC Lottery\", en: \"NC Lottery\" }\n};\n\nconst categories = {\n  thai: [\"THAI_GOV\", \"THAI_STOCK\"] as LotteryType[],\n  stock: [\"STOCK_NIKKEI\", \"STOCK_DOW\", \"STOCK_FTSE\", \"STOCK_DAX\"] as LotteryType[],\n  foreign: [\"LAO\", \"HANOI\", \"MALAYSIA\", \"SINGAPORE\"] as LotteryType[],\n  instant: [\"KENO\"] as LotteryType[]\n};\n\nconst categoryIcons = {\n  thai: <Landmark className=\"h-4 w-4\" />,\n  stock: <TrendingUp className=\"h-4 w-4\" />,\n  foreign: <Globe className=\"h-4 w-4\" />,\n  instant: <Zap className=\"h-4 w-4\" />\n};\n\nfunction parseThaiLottoResult(data: ThaiLottoApiResponse): ResultData | null {\n  if (data.status !== \"success\" || !data.response) return null;\n  \n  const { response } = data;\n  const firstPrize = response.prizes.find(p => p.id === \"prizeFirst\")?.number[0];\n  const threeTop = response.prizes.find(p => p.id === \"prizeFirstNear\")?.number || [];\n  const last3f = response.runningNumbers.find(r => r.id === \"runningNumberFrontThree\")?.number || [];\n  const last3b = response.runningNumbers.find(r => r.id === \"runningNumberBackThree\")?.number || [];\n  const last2 = response.runningNumbers.find(r => r.id === \"runningNumberBackTwo\")?.number[0];\n\n  return {\n    firstPrize,\n    threeTop: [...last3f],\n    threeBottom: [...last3b],\n    twoDigit: last2,\n    date: response.date,\n    isLive: true,\n    externalUrl: externalUrls.THAI_GOV\n  };\n}\n\nfunction StockResultCard({ type, stockData, isLoading }: { \n  type: LotteryType; \n  stockData?: StockData | null;\n  isLoading?: boolean;\n}) {\n  const { language } = useI18n();\n  const name = lotteryTypeNames[type][language];\n  const externalUrl = externalUrls[type];\n  const siteName = externalUrlNames[type][language];\n\n  if (isLoading) {\n    return (\n      <Card>\n        <CardHeader className=\"pb-2\">\n          <CardTitle className=\"text-base\">{name}</CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-3\">\n          <Skeleton className=\"h-10 w-32\" />\n          <div className=\"grid grid-cols-2 gap-3\">\n            <Skeleton className=\"h-8 w-full\" />\n            <Skeleton className=\"h-8 w-full\" />\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  const isPositive = stockData && parseFloat(stockData.change) >= 0;\n\n  return (\n    <Card className=\"hover-elevate transition-all\" data-testid={`card-result-${type}`}>\n      <CardHeader className=\"pb-2\">\n        <div className=\"flex items-center justify-between gap-2 flex-wrap\">\n          <CardTitle className=\"text-base\">{name}</CardTitle>\n          {stockData ? (\n            <Badge variant=\"secondary\" className=\"gap-1\">\n              <Wifi className=\"h-3 w-3\" />\n              LIVE\n            </Badge>\n          ) : (\n            <Badge variant=\"outline\" className=\"gap-1\">\n              <ExternalLink className=\"h-3 w-3\" />\n              {language === \"th\" ? \"ลิงก์ภายนอก\" : \"External\"}\n            </Badge>\n          )}\n        </div>\n        {stockData && (\n          <CardDescription className=\"flex items-center gap-2\">\n            <span className=\"text-xs\">{stockData.symbol}</span>\n            <Badge variant={stockData.marketState === \"REGULAR\" ? \"default\" : \"secondary\"} className=\"text-xs px-1.5 py-0\">\n              {stockData.marketState === \"REGULAR\" ? (language === \"th\" ? \"เปิดตลาด\" : \"Open\") : (language === \"th\" ? \"ปิดตลาด\" : \"Closed\")}\n            </Badge>\n          </CardDescription>\n        )}\n      </CardHeader>\n      <CardContent className=\"space-y-3\">\n        {stockData ? (\n          <>\n            <div>\n              <p className=\"text-xs text-muted-foreground mb-1\">\n                {language === \"th\" ? \"ราคาล่าสุด\" : \"Latest Price\"}\n              </p>\n              <div className=\"text-2xl font-bold font-mono tracking-wide text-primary\">\n                {stockData.formattedPrice}\n              </div>\n              <div className={`text-sm font-medium ${isPositive ? \"text-green-500\" : \"text-red-500\"}`}>\n                {isPositive ? \"+\" : \"\"}{stockData.change} ({isPositive ? \"+\" : \"\"}{stockData.changePercent}%)\n              </div>\n            </div>\n\n            <div className=\"grid grid-cols-2 gap-3\">\n              <div>\n                <p className=\"text-xs text-muted-foreground mb-1\">\n                  {language === \"th\" ? \"3 ตัวท้าย\" : \"Last 3 Digits\"}\n                </p>\n                <Badge className=\"font-mono text-lg px-3 bg-primary/10 text-primary border-primary/20\">\n                  {stockData.threeDigit}\n                </Badge>\n              </div>\n\n              <div>\n                <p className=\"text-xs text-muted-foreground mb-1\">\n                  {language === \"th\" ? \"2 ตัวท้าย\" : \"Last 2 Digits\"}\n                </p>\n                <Badge className=\"font-mono text-lg px-3 bg-primary/10 text-primary border-primary/20\">\n                  {stockData.twoDigit}\n                </Badge>\n              </div>\n            </div>\n          </>\n        ) : (\n          <div className=\"text-center py-2 text-muted-foreground\">\n            <p className=\"text-sm mb-3\">\n              {language === \"th\" \n                ? \"ไม่สามารถโหลดข้อมูลหุ้นได้\" \n                : \"Unable to load stock data\"}\n            </p>\n          </div>\n        )}\n\n        <a \n          href={externalUrl} \n          target=\"_blank\" \n          rel=\"noopener noreferrer\"\n          className=\"flex items-center justify-between w-full p-3 rounded-lg bg-gradient-to-r from-emerald-500/10 to-emerald-600/10 border border-emerald-500/30 hover:border-emerald-500/50 transition-all group\"\n          data-testid={`button-external-${type}`}\n        >\n          <div className=\"flex items-center gap-2\">\n            <div className=\"p-1.5 rounded-full bg-emerald-500/20\">\n              <ShieldCheck className=\"h-4 w-4 text-emerald-600 dark:text-emerald-400\" />\n            </div>\n            <div className=\"text-left\">\n              <p className=\"text-xs text-emerald-700 dark:text-emerald-400 font-medium\">\n                {language === \"th\" ? \"เว็บไซต์ทางการ\" : \"Official Source\"}\n              </p>\n              <p className=\"text-sm font-semibold text-foreground\">{siteName}</p>\n            </div>\n          </div>\n          <div className=\"p-2 rounded-full bg-emerald-500/20 group-hover:bg-emerald-500/30 transition-colors\">\n            <ArrowUpRight className=\"h-4 w-4 text-emerald-600 dark:text-emerald-400\" />\n          </div>\n        </a>\n      </CardContent>\n    </Card>\n  );\n}\n\nfunction HanoiResultCard({ hanoiData, isLoading }: { \n  hanoiData?: HanoiLotteryData | null;\n  isLoading?: boolean;\n}) {\n  const { language } = useI18n();\n  const name = lotteryTypeNames.HANOI[language];\n  const externalUrl = externalUrls.HANOI;\n  const siteName = externalUrlNames.HANOI[language];\n\n  if (isLoading) {\n    return (\n      <Card>\n        <CardHeader className=\"pb-2\">\n          <CardTitle className=\"text-base\">{name}</CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-3\">\n          <Skeleton className=\"h-10 w-32\" />\n          <div className=\"grid grid-cols-2 gap-3\">\n            <Skeleton className=\"h-8 w-full\" />\n            <Skeleton className=\"h-8 w-full\" />\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  return (\n    <Card className=\"hover-elevate transition-all\" data-testid=\"card-result-HANOI\">\n      <CardHeader className=\"pb-2\">\n        <div className=\"flex items-center justify-between gap-2 flex-wrap\">\n          <CardTitle className=\"text-base\">{name}</CardTitle>\n          {hanoiData ? (\n            <Badge variant=\"secondary\" className=\"gap-1\">\n              <Wifi className=\"h-3 w-3\" />\n              LIVE\n            </Badge>\n          ) : (\n            <Badge variant=\"outline\" className=\"gap-1\">\n              <ExternalLink className=\"h-3 w-3\" />\n              {language === \"th\" ? \"ลิงก์ภายนอก\" : \"External\"}\n            </Badge>\n          )}\n        </div>\n        {hanoiData && (\n          <CardDescription className=\"flex items-center gap-1\">\n            <Clock className=\"h-3 w-3\" />\n            {hanoiData.date}\n          </CardDescription>\n        )}\n      </CardHeader>\n      <CardContent className=\"space-y-3\">\n        {hanoiData ? (\n          <>\n            <div>\n              <p className=\"text-xs text-muted-foreground mb-1\">\n                {language === \"th\" ? \"รางวัลพิเศษ\" : \"Special Prize\"}\n              </p>\n              <div className=\"text-2xl font-bold font-mono tracking-widest text-primary\">\n                {hanoiData.firstPrize}\n              </div>\n            </div>\n\n            <div className=\"grid grid-cols-2 gap-3\">\n              <div>\n                <p className=\"text-xs text-muted-foreground mb-1\">\n                  {language === \"th\" ? \"3 ตัวท้าย\" : \"Last 3 Digits\"}\n                </p>\n                <Badge className=\"font-mono text-lg px-3 bg-primary/10 text-primary border-primary/20\">\n                  {hanoiData.threeDigit}\n                </Badge>\n              </div>\n\n              <div>\n                <p className=\"text-xs text-muted-foreground mb-1\">\n                  {language === \"th\" ? \"2 ตัวท้าย\" : \"Last 2 Digits\"}\n                </p>\n                <Badge className=\"font-mono text-lg px-3 bg-primary/10 text-primary border-primary/20\">\n                  {hanoiData.twoDigit}\n                </Badge>\n              </div>\n            </div>\n\n            {hanoiData.prizes.g7 && hanoiData.prizes.g7.length > 0 && (\n              <div>\n                <p className=\"text-xs text-muted-foreground mb-1\">\n                  {language === \"th\" ? \"รางวัลเลข 2 ตัว\" : \"2-Digit Prizes\"}\n                </p>\n                <div className=\"flex flex-wrap gap-1\">\n                  {hanoiData.prizes.g7.slice(0, 4).map((num, i) => (\n                    <Badge key={i} variant=\"secondary\" className=\"font-mono text-sm\">\n                      {num}\n                    </Badge>\n                  ))}\n                </div>\n              </div>\n            )}\n          </>\n        ) : (\n          <div className=\"text-center py-4 text-muted-foreground\">\n            <Globe className=\"h-8 w-8 mx-auto mb-2 text-muted-foreground/50\" />\n            <p className=\"text-sm\">\n              {language === \"th\" \n                ? \"กดปุ่มด้านล่างเพื่อดูผลหวยล่าสุด\" \n                : \"Click below to view latest results\"}\n            </p>\n          </div>\n        )}\n\n        <a \n          href={externalUrl} \n          target=\"_blank\" \n          rel=\"noopener noreferrer\"\n          className=\"flex items-center justify-between w-full p-3 rounded-lg bg-gradient-to-r from-emerald-500/10 to-emerald-600/10 border border-emerald-500/30 hover:border-emerald-500/50 transition-all group\"\n          data-testid=\"button-external-HANOI\"\n        >\n          <div className=\"flex items-center gap-2\">\n            <div className=\"p-1.5 rounded-full bg-emerald-500/20\">\n              <ShieldCheck className=\"h-4 w-4 text-emerald-600 dark:text-emerald-400\" />\n            </div>\n            <div className=\"text-left\">\n              <p className=\"text-xs text-emerald-700 dark:text-emerald-400 font-medium\">\n                {language === \"th\" ? \"เว็บไซต์ทางการ\" : \"Official Source\"}\n              </p>\n              <p className=\"text-sm font-semibold text-foreground\">{siteName}</p>\n            </div>\n          </div>\n          <div className=\"p-2 rounded-full bg-emerald-500/20 group-hover:bg-emerald-500/30 transition-colors\">\n            <ArrowUpRight className=\"h-4 w-4 text-emerald-600 dark:text-emerald-400\" />\n          </div>\n        </a>\n      </CardContent>\n    </Card>\n  );\n}\n\nfunction ResultCard({ type, thaiGovResult, isLoading, isError }: { \n  type: LotteryType; \n  thaiGovResult?: ResultData | null;\n  isLoading?: boolean;\n  isError?: boolean;\n}) {\n  const { language } = useI18n();\n  const name = lotteryTypeNames[type][language];\n  const externalUrl = externalUrls[type];\n  const siteName = externalUrlNames[type][language];\n  \n  const result = type === \"THAI_GOV\" && !isError ? thaiGovResult : null;\n\n  if (isLoading && type === \"THAI_GOV\") {\n    return (\n      <Card>\n        <CardHeader className=\"pb-2\">\n          <CardTitle className=\"text-base\">{name}</CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-3\">\n          <Skeleton className=\"h-10 w-32\" />\n          <div className=\"grid grid-cols-2 gap-3\">\n            <Skeleton className=\"h-8 w-full\" />\n            <Skeleton className=\"h-8 w-full\" />\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  return (\n    <Card className=\"hover-elevate transition-all\" data-testid={`card-result-${type}`}>\n      <CardHeader className=\"pb-2\">\n        <div className=\"flex items-center justify-between gap-2 flex-wrap\">\n          <CardTitle className=\"text-base\">{name}</CardTitle>\n          {result ? (\n            <Badge variant=\"secondary\" className=\"gap-1\">\n              <Wifi className=\"h-3 w-3\" />\n              API\n            </Badge>\n          ) : (\n            <Badge variant=\"outline\" className=\"gap-1\">\n              <ExternalLink className=\"h-3 w-3\" />\n              {language === \"th\" ? \"ลิงก์ภายนอก\" : \"External\"}\n            </Badge>\n          )}\n        </div>\n        {result && (\n          <CardDescription className=\"flex items-center gap-1\">\n            <Clock className=\"h-3 w-3\" />\n            {result.date}\n          </CardDescription>\n        )}\n      </CardHeader>\n      <CardContent className=\"space-y-3\">\n        {result ? (\n          <>\n            {result.firstPrize && (\n              <div>\n                <p className=\"text-xs text-muted-foreground mb-1\">\n                  {language === \"th\" ? \"รางวัลที่ 1\" : \"First Prize\"}\n                </p>\n                <div className=\"text-3xl font-bold font-mono tracking-widest text-primary\">\n                  {result.firstPrize}\n                </div>\n              </div>\n            )}\n\n            <div className=\"grid grid-cols-2 gap-3\">\n              {result.threeTop && result.threeTop.length > 0 && (\n                <div>\n                  <p className=\"text-xs text-muted-foreground mb-1\">\n                    {language === \"th\" ? \"3 ตัวหน้า\" : \"Front 3\"}\n                  </p>\n                  <div className=\"flex flex-wrap gap-1\">\n                    {result.threeTop.map((num, i) => (\n                      <Badge key={i} variant=\"secondary\" className=\"font-mono text-sm\">\n                        {num}\n                      </Badge>\n                    ))}\n                  </div>\n                </div>\n              )}\n\n              {result.threeBottom && result.threeBottom.length > 0 && (\n                <div>\n                  <p className=\"text-xs text-muted-foreground mb-1\">\n                    {language === \"th\" ? \"3 ตัวท้าย\" : \"Back 3\"}\n                  </p>\n                  <div className=\"flex flex-wrap gap-1\">\n                    {result.threeBottom.map((num, i) => (\n                      <Badge key={i} variant=\"secondary\" className=\"font-mono text-sm\">\n                        {num}\n                      </Badge>\n                    ))}\n                  </div>\n                </div>\n              )}\n\n              {result.twoDigit && (\n                <div>\n                  <p className=\"text-xs text-muted-foreground mb-1\">\n                    {language === \"th\" ? \"2 ตัวท้าย\" : \"Last 2\"}\n                  </p>\n                  <Badge variant=\"secondary\" className=\"font-mono text-lg px-3\">\n                    {result.twoDigit}\n                  </Badge>\n                </div>\n              )}\n            </div>\n          </>\n        ) : (\n          <div className=\"text-center py-4 text-muted-foreground\">\n            <Globe className=\"h-8 w-8 mx-auto mb-2 text-muted-foreground/50\" />\n            <p className=\"text-sm\">\n              {language === \"th\" \n                ? \"กดปุ่มด้านล่างเพื่อดูผลหวยล่าสุด\" \n                : \"Click below to view latest results\"}\n            </p>\n          </div>\n        )}\n\n        <a \n          href={externalUrl} \n          target=\"_blank\" \n          rel=\"noopener noreferrer\"\n          className=\"flex items-center justify-between w-full p-3 rounded-lg bg-gradient-to-r from-emerald-500/10 to-emerald-600/10 border border-emerald-500/30 hover:border-emerald-500/50 transition-all group\"\n          data-testid={`button-external-${type}`}\n        >\n          <div className=\"flex items-center gap-2\">\n            <div className=\"p-1.5 rounded-full bg-emerald-500/20\">\n              <ShieldCheck className=\"h-4 w-4 text-emerald-600 dark:text-emerald-400\" />\n            </div>\n            <div className=\"text-left\">\n              <p className=\"text-xs text-emerald-700 dark:text-emerald-400 font-medium\">\n                {language === \"th\" ? \"เว็บไซต์ทางการ\" : \"Official Source\"}\n              </p>\n              <p className=\"text-sm font-semibold text-foreground\">{siteName}</p>\n            </div>\n          </div>\n          <div className=\"p-2 rounded-full bg-emerald-500/20 group-hover:bg-emerald-500/30 transition-colors\">\n            <ArrowUpRight className=\"h-4 w-4 text-emerald-600 dark:text-emerald-400\" />\n          </div>\n        </a>\n      </CardContent>\n    </Card>\n  );\n}\n\nexport default function Results() {\n  const { language, t } = useI18n();\n  const [isRefreshing, setIsRefreshing] = useState(false);\n\n  const { data: thaiGovData, isLoading: isLoadingThaiGov, refetch: refetchThaiGov, isError } = useQuery<ThaiLottoApiResponse>({\n    queryKey: [\"thai-lotto-api\"],\n    queryFn: async () => {\n      const latestRes = await fetch(\"https://lotto.api.rayriffy.com/latest\");\n      const latestData = await latestRes.json();\n      \n      if (latestData.status === \"success\" && latestData.response) {\n        if (latestData.response.date && latestData.response.prizes) {\n          return latestData;\n        }\n        if (Array.isArray(latestData.response) && latestData.response.length > 0) {\n          const responseArr = latestData.response;\n          const latestId = responseArr[responseArr.length - 1].id;\n          const resultRes = await fetch(`https://lotto.api.rayriffy.com/lotto/${latestId}`);\n          return resultRes.json();\n        }\n      }\n      throw new Error(\"No lottery data available\");\n    },\n    staleTime: 1000 * 60 * 5,\n    retry: 2\n  });\n\n  const { data: stockData, isLoading: isLoadingStock, refetch: refetchStock } = useQuery<Record<string, StockData>>({\n    queryKey: [\"/api/stock-data\"],\n    staleTime: 1000 * 60 * 2,\n    retry: 2\n  });\n\n  const { data: hanoiData, isLoading: isLoadingHanoi, refetch: refetchHanoi } = useQuery<HanoiLotteryData>({\n    queryKey: [\"/api/hanoi-lottery\"],\n    staleTime: 1000 * 60 * 5,\n    retry: 2\n  });\n\n  const thaiGovResult = thaiGovData ? parseThaiLottoResult(thaiGovData) : null;\n\n  const handleRefresh = async () => {\n    setIsRefreshing(true);\n    await Promise.all([refetchThaiGov(), refetchStock(), refetchHanoi()]);\n    setTimeout(() => setIsRefreshing(false), 500);\n  };\n\n  const isStockType = (type: LotteryType) => \n    [\"STOCK_NIKKEI\", \"STOCK_DOW\", \"STOCK_FTSE\", \"STOCK_DAX\", \"THAI_STOCK\"].includes(type);\n\n  const categoryNames = {\n    thai: language === \"th\" ? \"หวยไทย\" : \"Thai\",\n    stock: language === \"th\" ? \"หวยหุ้น\" : \"Stock\",\n    foreign: language === \"th\" ? \"ต่างประเทศ\" : \"Foreign\",\n    instant: language === \"th\" ? \"หวยด่วน\" : \"Instant\"\n  };\n\n  return (\n    <div className=\"min-h-full\">\n      <div className=\"bg-gradient-to-br from-primary/10 via-background to-primary/5 p-4 md:p-6 border-b border-border\">\n        <div className=\"flex items-center justify-between gap-4 flex-wrap\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"p-3 bg-primary/10 rounded-xl\">\n              <Trophy className=\"h-6 w-6 text-primary\" />\n            </div>\n            <div>\n              <h1 className=\"text-xl md:text-2xl font-bold\">{t(\"results.title\")}</h1>\n              <p className=\"text-sm text-muted-foreground\">{t(\"results.latest\")}</p>\n            </div>\n          </div>\n          <Button \n            variant=\"outline\" \n            size=\"sm\" \n            onClick={handleRefresh}\n            disabled={isRefreshing || isLoadingThaiGov}\n            data-testid=\"button-refresh-results\"\n          >\n            <RefreshCw className={`h-4 w-4 mr-2 ${isRefreshing ? \"animate-spin\" : \"\"}`} />\n            {language === \"th\" ? \"รีเฟรช\" : \"Refresh\"}\n          </Button>\n        </div>\n      </div>\n\n      <div className=\"p-4 md:p-6\">\n        <Card className=\"mb-4 bg-gradient-to-r from-primary/5 to-primary/10 border-primary/20\">\n          <CardContent className=\"p-4\">\n            <div className=\"flex items-start gap-3\">\n              <div className=\"p-2 bg-primary/10 rounded-lg\">\n                <Globe className=\"h-5 w-5 text-primary\" />\n              </div>\n              <div>\n                <h3 className=\"font-semibold mb-1\">\n                  {language === \"th\" ? \"เช็คผลหวยจากเว็บไซต์ทางการ\" : \"Check Results from Official Sites\"}\n                </h3>\n                <p className=\"text-sm text-muted-foreground\">\n                  {language === \"th\" \n                    ? \"กดปุ่ม \\\"เปิด...\\\" ในแต่ละการ์ดเพื่อไปยังเว็บไซต์ทางการสำหรับผลหวยล่าสุด\" \n                    : \"Click \\\"Open...\\\" button on each card to visit official sites for latest results\"}\n                </p>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Tabs defaultValue=\"thai\" className=\"space-y-4\">\n          <TabsList className=\"grid w-full grid-cols-4\">\n            {Object.entries(categoryNames).map(([key, name]) => (\n              <TabsTrigger key={key} value={key} className=\"gap-1\">\n                {categoryIcons[key as keyof typeof categoryIcons]}\n                <span className=\"hidden sm:inline\">{name}</span>\n              </TabsTrigger>\n            ))}\n          </TabsList>\n\n          {Object.entries(categories).map(([key, types]) => (\n            <TabsContent key={key} value={key}>\n              <div className=\"grid gap-4 sm:grid-cols-2 lg:grid-cols-3\">\n                {types.map((type) => (\n                  isStockType(type) ? (\n                    <StockResultCard \n                      key={type} \n                      type={type} \n                      stockData={stockData?.[type] || null}\n                      isLoading={isLoadingStock}\n                    />\n                  ) : type === \"HANOI\" ? (\n                    <HanoiResultCard \n                      key={type}\n                      hanoiData={hanoiData || null}\n                      isLoading={isLoadingHanoi}\n                    />\n                  ) : (\n                    <ResultCard \n                      key={type} \n                      type={type} \n                      thaiGovResult={type === \"THAI_GOV\" ? thaiGovResult : null}\n                      isLoading={type === \"THAI_GOV\" && isLoadingThaiGov}\n                      isError={type === \"THAI_GOV\" && isError}\n                    />\n                  )\n                ))}\n              </div>\n            </TabsContent>\n          ))}\n        </Tabs>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":26879,"size_tokens":null},"client/src/lib/store.ts":{"content":"import { create } from 'zustand';\nimport { persist } from 'zustand/middleware';\nimport type { CartItem, User, BlockedNumber, LotteryType, BetType } from '@shared/schema';\nimport { payoutRates } from '@shared/schema';\n\ninterface CartState {\n  items: CartItem[];\n  addItem: (item: Omit<CartItem, 'id'>) => void;\n  removeItem: (id: string) => void;\n  clearCart: () => void;\n  getTotal: () => number;\n  getTotalPotentialWin: () => number;\n}\n\nexport const useCart = create<CartState>()(\n  persist(\n    (set, get) => ({\n      items: [],\n      addItem: (item) => {\n        const id = `${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n        set((state) => ({\n          items: [...state.items, { ...item, id }]\n        }));\n      },\n      removeItem: (id) => {\n        set((state) => ({\n          items: state.items.filter((item) => item.id !== id)\n        }));\n      },\n      clearCart: () => set({ items: [] }),\n      getTotal: () => {\n        return get().items.reduce((sum, item) => sum + item.amount, 0);\n      },\n      getTotalPotentialWin: () => {\n        return get().items.reduce((sum, item) => {\n          const rate = payoutRates[item.betType];\n          return sum + (item.amount * rate);\n        }, 0);\n      }\n    }),\n    {\n      name: 'qnq-cart'\n    }\n  )\n);\n\ninterface UserState {\n  user: User | null;\n  isAuthenticated: boolean;\n  setUser: (user: User | null) => void;\n  updateBalance: (newBalance: number) => void;\n  logout: () => void;\n}\n\nexport const useUser = create<UserState>()(\n  persist(\n    (set) => ({\n      user: null,\n      isAuthenticated: false,\n      setUser: (user) => set({ user, isAuthenticated: !!user }),\n      updateBalance: (newBalance) => set((state) => ({\n        user: state.user ? { ...state.user, balance: newBalance } : null\n      })),\n      logout: () => set({ user: null, isAuthenticated: false })\n    }),\n    {\n      name: 'qnq-user'\n    }\n  )\n);\n\ninterface AdminState {\n  isAdminAuthenticated: boolean;\n  setAdminAuthenticated: (value: boolean) => void;\n  checkAdminStatus: () => Promise<boolean>;\n  logout: () => Promise<void>;\n}\n\nexport const useAdmin = create<AdminState>()(\n  persist(\n    (set) => ({\n      isAdminAuthenticated: false,\n      setAdminAuthenticated: (value) => set({ isAdminAuthenticated: value }),\n      checkAdminStatus: async () => {\n        try {\n          const res = await fetch('/api/admin/check', { credentials: 'include' });\n          const data = await res.json();\n          set({ isAdminAuthenticated: data.isAdmin === true });\n          return data.isAdmin === true;\n        } catch {\n          set({ isAdminAuthenticated: false });\n          return false;\n        }\n      },\n      logout: async () => {\n        try {\n          await fetch('/api/admin/logout', { method: 'POST', credentials: 'include' });\n        } catch {\n        }\n        set({ isAdminAuthenticated: false });\n      }\n    }),\n    {\n      name: 'qnq-admin'\n    }\n  )\n);\n\ninterface BlockedNumbersState {\n  blockedNumbers: BlockedNumber[];\n  setBlockedNumbers: (numbers: BlockedNumber[]) => void;\n  isBlocked: (lotteryType: LotteryType, number: string, betType?: BetType) => boolean;\n}\n\nexport const useBlockedNumbers = create<BlockedNumbersState>((set, get) => ({\n  blockedNumbers: [],\n  setBlockedNumbers: (numbers) => set({ blockedNumbers: numbers }),\n  isBlocked: (lotteryType, number, betType) => {\n    const { blockedNumbers } = get();\n    return blockedNumbers.some(\n      (bn) =>\n        bn.isActive &&\n        bn.lotteryType === lotteryType &&\n        bn.number === number &&\n        (bn.betType === null || bn.betType === betType)\n    );\n  }\n}));\n","path":null,"size_bytes":3607,"size_tokens":null},"client/src/main.tsx":{"content":"import { createRoot } from \"react-dom/client\";\nimport App from \"./App\";\nimport \"./index.css\";\n\ncreateRoot(document.getElementById(\"root\")!).render(<App />);\n","path":null,"size_bytes":157,"size_tokens":null},"client/src/components/Logo.tsx":{"content":"import { Crown } from \"lucide-react\";\n\ninterface LogoProps {\n  size?: \"sm\" | \"md\" | \"lg\";\n  showText?: boolean;\n}\n\nexport function Logo({ size = \"md\", showText = true }: LogoProps) {\n  const sizeClasses = {\n    sm: \"h-6 w-6\",\n    md: \"h-8 w-8\",\n    lg: \"h-12 w-12\"\n  };\n\n  const textClasses = {\n    sm: \"text-lg\",\n    md: \"text-xl\",\n    lg: \"text-3xl\"\n  };\n\n  return (\n    <div className=\"flex items-center gap-2\">\n      <div className=\"relative\">\n        <div className=\"absolute inset-0 bg-gradient-to-br from-primary via-amber-400 to-primary rounded-lg blur-sm opacity-50\" />\n        <div className=\"relative bg-gradient-to-br from-primary via-amber-400 to-primary p-1.5 rounded-lg\">\n          <Crown className={`${sizeClasses[size]} text-primary-foreground`} />\n        </div>\n      </div>\n      {showText && (\n        <div className=\"flex flex-col\">\n          <span \n            className={`${textClasses[size]} font-extrabold tracking-tight`}\n            style={{ fontFamily: \"'Urbanist', sans-serif\" }}\n          >\n            <span className=\"bg-gradient-to-r from-primary via-amber-400 to-primary bg-clip-text text-transparent\">\n              QNQ\n            </span>\n          </span>\n          <span className=\"text-[10px] text-muted-foreground -mt-1 tracking-widest uppercase\">\n            Lottery\n          </span>\n        </div>\n      )}\n    </div>\n  );\n}\n","path":null,"size_bytes":1369,"size_tokens":null},"client/src/pages/Register.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { Link, useLocation, useSearch } from \"wouter\";\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription, CardFooter } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Logo } from \"@/components/Logo\";\nimport { useI18n } from \"@/lib/i18n\";\nimport { useUser } from \"@/lib/store\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Lock, User, ArrowRight, Gift } from \"lucide-react\";\n\nexport default function Register() {\n  const { language, t } = useI18n();\n  const { setUser } = useUser();\n  const { toast } = useToast();\n  const [, setLocation] = useLocation();\n  const search = useSearch();\n\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\n  const [referralCode, setReferralCode] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n\n  useEffect(() => {\n    const params = new URLSearchParams(search);\n    const ref = params.get(\"ref\");\n    if (ref) {\n      setReferralCode(ref);\n    }\n  }, [search]);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (password !== confirmPassword) {\n      toast({\n        title: language === \"th\" ? \"รหัสผ่านไม่ตรงกัน\" : \"Passwords don't match\",\n        variant: \"destructive\"\n      });\n      return;\n    }\n\n    if (password.length < 6) {\n      toast({\n        title: language === \"th\" ? \"รหัสผ่านต้องมีอย่างน้อย 6 ตัวอักษร\" : \"Password must be at least 6 characters\",\n        variant: \"destructive\"\n      });\n      return;\n    }\n\n    setIsLoading(true);\n    await new Promise((resolve) => setTimeout(resolve, 500));\n\n    setUser({\n      id: Date.now().toString(),\n      username,\n      password: \"\",\n      balance: 0,\n      referralCode: `QNQ${Date.now().toString(36).toUpperCase()}`,\n      referredBy: referralCode || null,\n      affiliateEarnings: 0,\n      createdAt: new Date().toISOString()\n    });\n\n    toast({\n      title: language === \"th\" ? \"สมัครสมาชิกสำเร็จ\" : \"Registration successful\",\n      description: language === \"th\" ? \"ยินดีต้อนรับสู่ QNQ Lottery!\" : \"Welcome to QNQ Lottery!\"\n    });\n\n    setLocation(\"/\");\n    setIsLoading(false);\n  };\n\n  return (\n    <div className=\"min-h-full flex items-center justify-center p-4 bg-gradient-to-br from-background via-background to-primary/5\">\n      <Card className=\"w-full max-w-md\">\n        <CardHeader className=\"text-center space-y-4\">\n          <div className=\"flex justify-center\">\n            <Logo size=\"lg\" />\n          </div>\n          <div>\n            <CardTitle className=\"text-2xl\">{t(\"nav.register\")}</CardTitle>\n            <CardDescription>\n              {language === \"th\" \n                ? \"สร้างบัญชีใหม่เพื่อเริ่มแทงหวย\" \n                : \"Create a new account to start betting\"}\n            </CardDescription>\n          </div>\n        </CardHeader>\n        <CardContent>\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"username\">{language === \"th\" ? \"ชื่อผู้ใช้\" : \"Username\"}</Label>\n              <div className=\"relative\">\n                <User className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n                <Input\n                  id=\"username\"\n                  type=\"text\"\n                  value={username}\n                  onChange={(e) => setUsername(e.target.value)}\n                  placeholder={language === \"th\" ? \"กรอกชื่อผู้ใช้\" : \"Enter username\"}\n                  className=\"pl-10\"\n                  required\n                  minLength={3}\n                  data-testid=\"input-reg-username\"\n                />\n              </div>\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"password\">{language === \"th\" ? \"รหัสผ่าน\" : \"Password\"}</Label>\n              <div className=\"relative\">\n                <Lock className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n                <Input\n                  id=\"password\"\n                  type=\"password\"\n                  value={password}\n                  onChange={(e) => setPassword(e.target.value)}\n                  placeholder=\"••••••••\"\n                  className=\"pl-10\"\n                  required\n                  minLength={6}\n                  data-testid=\"input-reg-password\"\n                />\n              </div>\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"confirmPassword\">\n                {language === \"th\" ? \"ยืนยันรหัสผ่าน\" : \"Confirm Password\"}\n              </Label>\n              <div className=\"relative\">\n                <Lock className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n                <Input\n                  id=\"confirmPassword\"\n                  type=\"password\"\n                  value={confirmPassword}\n                  onChange={(e) => setConfirmPassword(e.target.value)}\n                  placeholder=\"••••••••\"\n                  className=\"pl-10\"\n                  required\n                  data-testid=\"input-reg-confirm-password\"\n                />\n              </div>\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"referral\">\n                {language === \"th\" ? \"รหัสแนะนำ (ถ้ามี)\" : \"Referral Code (optional)\"}\n              </Label>\n              <div className=\"relative\">\n                <Gift className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n                <Input\n                  id=\"referral\"\n                  type=\"text\"\n                  value={referralCode}\n                  onChange={(e) => setReferralCode(e.target.value.toUpperCase())}\n                  placeholder=\"QNQ12345\"\n                  className=\"pl-10 font-mono\"\n                  data-testid=\"input-referral-code\"\n                />\n              </div>\n            </div>\n            <Button\n              type=\"submit\"\n              className=\"w-full gap-2\"\n              disabled={isLoading}\n              data-testid=\"button-register\"\n            >\n              {isLoading ? (language === \"th\" ? \"กำลังสมัคร...\" : \"Registering...\") : t(\"nav.register\")}\n              <ArrowRight className=\"h-4 w-4\" />\n            </Button>\n          </form>\n        </CardContent>\n        <CardFooter className=\"flex-col gap-2 text-center\">\n          <p className=\"text-sm text-muted-foreground\">\n            {language === \"th\" ? \"มีบัญชีอยู่แล้ว?\" : \"Already have an account?\"}\n          </p>\n          <Button variant=\"outline\" className=\"w-full\" asChild>\n            <Link href=\"/login\" data-testid=\"link-login\">\n              {t(\"nav.login\")}\n            </Link>\n          </Button>\n        </CardFooter>\n      </Card>\n    </div>\n  );\n}\n","path":null,"size_bytes":7383,"size_tokens":null},"client/src/components/ui/collapsible.tsx":{"content":"\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n","path":null,"size_bytes":329,"size_tokens":null},"client/src/components/ui/tabs.tsx":{"content":"import * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n","path":null,"size_bytes":1883,"size_tokens":null},"server/db.ts":{"content":"import { Pool, neonConfig } from '@neondatabase/serverless';\nimport { drizzle } from 'drizzle-orm/neon-serverless';\nimport ws from \"ws\";\nimport * as schema from \"@shared/schema\";\n\nneonConfig.webSocketConstructor = ws;\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\n    \"DATABASE_URL must be set. Did you forget to provision a database?\",\n  );\n}\n\nexport const pool = new Pool({ connectionString: process.env.DATABASE_URL });\nexport const db = drizzle({ client: pool, schema });\n","path":null,"size_bytes":483,"size_tokens":null},"client/src/pages/Login.tsx":{"content":"import { useState } from \"react\";\nimport { Link, useLocation } from \"wouter\";\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription, CardFooter } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Logo } from \"@/components/Logo\";\nimport { useI18n } from \"@/lib/i18n\";\nimport { useUser } from \"@/lib/store\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Lock, User, ArrowRight } from \"lucide-react\";\n\nexport default function Login() {\n  const { language, t } = useI18n();\n  const { setUser } = useUser();\n  const { toast } = useToast();\n  const [, setLocation] = useLocation();\n\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setIsLoading(true);\n\n    await new Promise((resolve) => setTimeout(resolve, 500));\n\n    if (username && password.length >= 4) {\n      setUser({\n        id: Date.now().toString(),\n        username,\n        password: \"\",\n        balance: 10000,\n        referralCode: `QNQ${Date.now().toString(36).toUpperCase()}`,\n        referredBy: null,\n        affiliateEarnings: 0,\n        createdAt: new Date().toISOString()\n      });\n      toast({\n        title: language === \"th\" ? \"เข้าสู่ระบบสำเร็จ\" : \"Login successful\"\n      });\n      setLocation(\"/\");\n    } else {\n      toast({\n        title: language === \"th\" ? \"ข้อมูลไม่ถูกต้อง\" : \"Invalid credentials\",\n        variant: \"destructive\"\n      });\n    }\n\n    setIsLoading(false);\n  };\n\n  return (\n    <div className=\"min-h-full flex items-center justify-center p-4 bg-gradient-to-br from-background via-background to-primary/5\">\n      <Card className=\"w-full max-w-md\">\n        <CardHeader className=\"text-center space-y-4\">\n          <div className=\"flex justify-center\">\n            <Logo size=\"lg\" />\n          </div>\n          <div>\n            <CardTitle className=\"text-2xl\">{t(\"nav.login\")}</CardTitle>\n            <CardDescription>\n              {language === \"th\" \n                ? \"เข้าสู่ระบบเพื่อเริ่มแทงหวย\" \n                : \"Login to start betting\"}\n            </CardDescription>\n          </div>\n        </CardHeader>\n        <CardContent>\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"username\">{language === \"th\" ? \"ชื่อผู้ใช้\" : \"Username\"}</Label>\n              <div className=\"relative\">\n                <User className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n                <Input\n                  id=\"username\"\n                  type=\"text\"\n                  value={username}\n                  onChange={(e) => setUsername(e.target.value)}\n                  placeholder={language === \"th\" ? \"กรอกชื่อผู้ใช้\" : \"Enter username\"}\n                  className=\"pl-10\"\n                  required\n                  data-testid=\"input-username\"\n                />\n              </div>\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"password\">{language === \"th\" ? \"รหัสผ่าน\" : \"Password\"}</Label>\n              <div className=\"relative\">\n                <Lock className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n                <Input\n                  id=\"password\"\n                  type=\"password\"\n                  value={password}\n                  onChange={(e) => setPassword(e.target.value)}\n                  placeholder=\"••••••••\"\n                  className=\"pl-10\"\n                  required\n                  data-testid=\"input-password\"\n                />\n              </div>\n            </div>\n            <Button\n              type=\"submit\"\n              className=\"w-full gap-2\"\n              disabled={isLoading}\n              data-testid=\"button-login\"\n            >\n              {isLoading ? (language === \"th\" ? \"กำลังเข้าสู่ระบบ...\" : \"Logging in...\") : t(\"nav.login\")}\n              <ArrowRight className=\"h-4 w-4\" />\n            </Button>\n          </form>\n        </CardContent>\n        <CardFooter className=\"flex-col gap-2 text-center\">\n          <p className=\"text-sm text-muted-foreground\">\n            {language === \"th\" ? \"ยังไม่มีบัญชี?\" : \"Don't have an account?\"}\n          </p>\n          <Button variant=\"outline\" className=\"w-full\" asChild>\n            <Link href=\"/register\" data-testid=\"link-register\">\n              {t(\"nav.register\")}\n            </Link>\n          </Button>\n        </CardFooter>\n      </Card>\n    </div>\n  );\n}\n","path":null,"size_bytes":4956,"size_tokens":null},"client/src/components/ui/avatar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(`\n      after:content-[''] after:block after:absolute after:inset-0 after:rounded-full after:pointer-events-none after:border after:border-black/10 dark:after:border-white/10\n      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n","path":null,"size_bytes":1592,"size_tokens":null},"client/src/components/ui/slider.tsx":{"content":"import * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n","path":null,"size_bytes":1077,"size_tokens":null},"client/src/components/LotteryTypeCard.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { lotteryTypeNames, type LotteryType } from \"@shared/schema\";\nimport { useI18n } from \"@/lib/i18n\";\nimport { \n  Building2, \n  TrendingUp, \n  Globe, \n  Landmark,\n  Dice1\n} from \"lucide-react\";\n\ninterface LotteryTypeCardProps {\n  type: LotteryType;\n  isSelected: boolean;\n  onClick: () => void;\n  drawTime?: string;\n}\n\nconst lotteryIcons: Record<LotteryType, JSX.Element> = {\n  THAI_GOV: <Landmark className=\"h-6 w-6\" />,\n  THAI_STOCK: <TrendingUp className=\"h-6 w-6\" />,\n  STOCK_NIKKEI: <Building2 className=\"h-6 w-6\" />,\n  STOCK_DOW: <TrendingUp className=\"h-6 w-6\" />,\n  STOCK_FTSE: <Globe className=\"h-6 w-6\" />,\n  STOCK_DAX: <Building2 className=\"h-6 w-6\" />,\n  LAO: <Globe className=\"h-6 w-6\" />,\n  HANOI: <Globe className=\"h-6 w-6\" />,\n  MALAYSIA: <Globe className=\"h-6 w-6\" />,\n  SINGAPORE: <Globe className=\"h-6 w-6\" />,\n  KENO: <Dice1 className=\"h-6 w-6\" />\n};\n\nconst lotteryColors: Record<LotteryType, string> = {\n  THAI_GOV: \"from-blue-600 to-blue-800\",\n  THAI_STOCK: \"from-green-600 to-green-800\",\n  STOCK_NIKKEI: \"from-red-600 to-red-800\",\n  STOCK_DOW: \"from-indigo-600 to-indigo-800\",\n  STOCK_FTSE: \"from-purple-600 to-purple-800\",\n  STOCK_DAX: \"from-amber-600 to-amber-800\",\n  LAO: \"from-rose-600 to-rose-800\",\n  HANOI: \"from-teal-600 to-teal-800\",\n  MALAYSIA: \"from-cyan-600 to-cyan-800\",\n  SINGAPORE: \"from-pink-600 to-pink-800\",\n  KENO: \"from-violet-600 to-violet-800\"\n};\n\nexport function LotteryTypeCard({ type, isSelected, onClick, drawTime }: LotteryTypeCardProps) {\n  const { language } = useI18n();\n  const name = lotteryTypeNames[type][language];\n\n  return (\n    <Card \n      className={`cursor-pointer transition-all duration-200 hover-elevate ${\n        isSelected \n          ? \"ring-2 ring-primary border-primary shadow-lg shadow-primary/20\" \n          : \"border-border\"\n      }`}\n      onClick={onClick}\n      data-testid={`card-lottery-${type}`}\n    >\n      <CardContent className=\"p-3\">\n        <div className=\"flex items-center gap-3\">\n          <div className={`p-2 rounded-lg bg-gradient-to-br ${lotteryColors[type]} text-white`}>\n            {lotteryIcons[type]}\n          </div>\n          <div className=\"flex-1 min-w-0\">\n            <p className=\"font-semibold text-sm truncate\">{name}</p>\n            {drawTime && (\n              <p className=\"text-xs text-muted-foreground\">{drawTime}</p>\n            )}\n          </div>\n          {isSelected && (\n            <div className=\"h-3 w-3 rounded-full bg-primary animate-pulse\" />\n          )}\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","path":null,"size_bytes":2596,"size_tokens":null},"client/src/components/ui/chart.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as RechartsPrimitive from \"recharts\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\")\n  }\n\n  return context\n}\n\nconst ChartContainer = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    config: ChartConfig\n    children: React.ComponentProps<\n      typeof RechartsPrimitive.ResponsiveContainer\n    >[\"children\"]\n  }\n>(({ id, className, children, config, ...props }, ref) => {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-chart={chartId}\n        ref={ref}\n        className={cn(\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\n          className\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n})\nChartContainer.displayName = \"Chart\"\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([, config]) => config.theme || config.color\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join(\"\\n\")}\n}\n`\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nconst ChartTooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n    React.ComponentProps<\"div\"> & {\n      hideLabel?: boolean\n      hideIndicator?: boolean\n      indicator?: \"line\" | \"dot\" | \"dashed\"\n      nameKey?: string\n      labelKey?: string\n    }\n>(\n  (\n    {\n      active,\n      payload,\n      className,\n      indicator = \"dot\",\n      hideLabel = false,\n      hideIndicator = false,\n      label,\n      labelFormatter,\n      labelClassName,\n      formatter,\n      color,\n      nameKey,\n      labelKey,\n    },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    const tooltipLabel = React.useMemo(() => {\n      if (hideLabel || !payload?.length) {\n        return null\n      }\n\n      const [item] = payload\n      const key = `${labelKey || item?.dataKey || item?.name || \"value\"}`\n      const itemConfig = getPayloadConfigFromPayload(config, item, key)\n      const value =\n        !labelKey && typeof label === \"string\"\n          ? config[label as keyof typeof config]?.label || label\n          : itemConfig?.label\n\n      if (labelFormatter) {\n        return (\n          <div className={cn(\"font-medium\", labelClassName)}>\n            {labelFormatter(value, payload)}\n          </div>\n        )\n      }\n\n      if (!value) {\n        return null\n      }\n\n      return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>\n    }, [\n      label,\n      labelFormatter,\n      payload,\n      hideLabel,\n      labelClassName,\n      config,\n      labelKey,\n    ])\n\n    if (!active || !payload?.length) {\n      return null\n    }\n\n    const nestLabel = payload.length === 1 && indicator !== \"dot\"\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl\",\n          className\n        )}\n      >\n        {!nestLabel ? tooltipLabel : null}\n        <div className=\"grid gap-1.5\">\n          {payload.map((item, index) => {\n            const key = `${nameKey || item.name || item.dataKey || \"value\"}`\n            const itemConfig = getPayloadConfigFromPayload(config, item, key)\n            const indicatorColor = color || item.payload.fill || item.color\n\n            return (\n              <div\n                key={item.dataKey}\n                className={cn(\n                  \"flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground\",\n                  indicator === \"dot\" && \"items-center\"\n                )}\n              >\n                {formatter && item?.value !== undefined && item.name ? (\n                  formatter(item.value, item.name, item, index, item.payload)\n                ) : (\n                  <>\n                    {itemConfig?.icon ? (\n                      <itemConfig.icon />\n                    ) : (\n                      !hideIndicator && (\n                        <div\n                          className={cn(\n                            \"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]\",\n                            {\n                              \"h-2.5 w-2.5\": indicator === \"dot\",\n                              \"w-1\": indicator === \"line\",\n                              \"w-0 border-[1.5px] border-dashed bg-transparent\":\n                                indicator === \"dashed\",\n                              \"my-0.5\": nestLabel && indicator === \"dashed\",\n                            }\n                          )}\n                          style={\n                            {\n                              \"--color-bg\": indicatorColor,\n                              \"--color-border\": indicatorColor,\n                            } as React.CSSProperties\n                          }\n                        />\n                      )\n                    )}\n                    <div\n                      className={cn(\n                        \"flex flex-1 justify-between leading-none\",\n                        nestLabel ? \"items-end\" : \"items-center\"\n                      )}\n                    >\n                      <div className=\"grid gap-1.5\">\n                        {nestLabel ? tooltipLabel : null}\n                        <span className=\"text-muted-foreground\">\n                          {itemConfig?.label || item.name}\n                        </span>\n                      </div>\n                      {item.value && (\n                        <span className=\"font-mono font-medium tabular-nums text-foreground\">\n                          {item.value.toLocaleString()}\n                        </span>\n                      )}\n                    </div>\n                  </>\n                )}\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    )\n  }\n)\nChartTooltipContent.displayName = \"ChartTooltip\"\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nconst ChartLegendContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> &\n    Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n      hideIcon?: boolean\n      nameKey?: string\n    }\n>(\n  (\n    { className, hideIcon = false, payload, verticalAlign = \"bottom\", nameKey },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    if (!payload?.length) {\n      return null\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex items-center justify-center gap-4\",\n          verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\n          className\n        )}\n      >\n        {payload.map((item) => {\n          const key = `${nameKey || item.dataKey || \"value\"}`\n          const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n          return (\n            <div\n              key={item.value}\n              className={cn(\n                \"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground\"\n              )}\n            >\n              {itemConfig?.icon && !hideIcon ? (\n                <itemConfig.icon />\n              ) : (\n                <div\n                  className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                  style={{\n                    backgroundColor: item.color,\n                  }}\n                />\n              )}\n              {itemConfig?.label}\n            </div>\n          )\n        })}\n      </div>\n    )\n  }\n)\nChartLegendContent.displayName = \"ChartLegend\"\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string\n) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    \"payload\" in payload &&\n    typeof payload.payload === \"object\" &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === \"string\"\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n","path":null,"size_bytes":10481,"size_tokens":null},"client/src/components/ui/progress.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n","path":null,"size_bytes":791,"size_tokens":null},"client/src/components/ui/toast.tsx":{"content":"import * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n","path":null,"size_bytes":4845,"size_tokens":null},"drizzle.config.ts":{"content":"import { defineConfig } from \"drizzle-kit\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL, ensure the database is provisioned\");\n}\n\nexport default defineConfig({\n  out: \"./migrations\",\n  schema: \"./shared/schema.ts\",\n  dialect: \"postgresql\",\n  dbCredentials: {\n    url: process.env.DATABASE_URL,\n  },\n});\n","path":null,"size_bytes":325,"size_tokens":null},"client/src/components/BlockedNumbersDisplay.tsx":{"content":"import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { useI18n } from \"@/lib/i18n\";\nimport { useBlockedNumbers } from \"@/lib/store\";\nimport type { LotteryType } from \"@shared/schema\";\nimport { betTypeNames } from \"@shared/schema\";\nimport { Ban } from \"lucide-react\";\n\ninterface BlockedNumbersDisplayProps {\n  lotteryType: LotteryType | null;\n}\n\nexport function BlockedNumbersDisplay({ lotteryType }: BlockedNumbersDisplayProps) {\n  const { language, t } = useI18n();\n  const { blockedNumbers } = useBlockedNumbers();\n\n  const filteredNumbers = lotteryType\n    ? blockedNumbers.filter((bn) => bn.lotteryType === lotteryType && bn.isActive)\n    : [];\n\n  if (filteredNumbers.length === 0) {\n    return null;\n  }\n\n  return (\n    <Card className=\"border-destructive/20 bg-destructive/5\">\n      <CardHeader className=\"pb-2\">\n        <CardTitle className=\"text-sm flex items-center gap-2 text-destructive\">\n          <Ban className=\"h-4 w-4\" />\n          {t(\"home.blockedNumbers\")}\n        </CardTitle>\n      </CardHeader>\n      <CardContent>\n        <ScrollArea className=\"max-h-24\">\n          <div className=\"flex flex-wrap gap-1.5\">\n            {filteredNumbers.map((bn) => (\n              <Badge\n                key={bn.id}\n                variant=\"destructive\"\n                className=\"text-xs font-mono\"\n              >\n                {bn.number}\n                {bn.betType && (\n                  <span className=\"ml-1 opacity-70\">\n                    ({betTypeNames[bn.betType][language]})\n                  </span>\n                )}\n              </Badge>\n            ))}\n          </div>\n        </ScrollArea>\n      </CardContent>\n    </Card>\n  );\n}\n","path":null,"size_bytes":1797,"size_tokens":null},"client/src/hooks/use-toast.ts":{"content":"import * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n","path":null,"size_bytes":3895,"size_tokens":null},"client/src/components/ui/toggle-group.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\nimport { type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { toggleVariants } from \"@/components/ui/toggle\"\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: \"default\",\n  variant: \"default\",\n})\n\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}\n  >\n    <ToggleGroupContext.Provider value={{ variant, size }}>\n      {children}\n    </ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n))\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\n\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  )\n})\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\n\nexport { ToggleGroup, ToggleGroupItem }\n","path":null,"size_bytes":1753,"size_tokens":null},"server/index.ts":{"content":"import express, { type Request, Response, NextFunction } from \"express\";\nimport session from \"express-session\";\nimport { registerRoutes } from \"./routes\";\nimport { serveStatic } from \"./static\";\nimport { createServer } from \"http\";\n\nconst app = express();\nconst httpServer = createServer(app);\n\ndeclare module \"http\" {\n  interface IncomingMessage {\n    rawBody: unknown;\n  }\n}\n\ndeclare module \"express-session\" {\n  interface SessionData {\n    isAdmin?: boolean;\n  }\n}\n\napp.use(\n  express.json({\n    verify: (req, _res, buf) => {\n      req.rawBody = buf;\n    },\n  }),\n);\n\napp.use(express.urlencoded({ extended: false }));\n\napp.use(\n  session({\n    secret: process.env.SESSION_SECRET || \"qnq-lottery-secret-2024\",\n    resave: false,\n    saveUninitialized: false,\n    cookie: {\n      secure: process.env.NODE_ENV === \"production\",\n      httpOnly: true,\n      maxAge: 24 * 60 * 60 * 1000,\n    },\n  })\n);\n\nexport function log(message: string, source = \"express\") {\n  const formattedTime = new Date().toLocaleTimeString(\"en-US\", {\n    hour: \"numeric\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: true,\n  });\n\n  console.log(`${formattedTime} [${source}] ${message}`);\n}\n\napp.use((req, res, next) => {\n  const start = Date.now();\n  const path = req.path;\n  let capturedJsonResponse: Record<string, any> | undefined = undefined;\n\n  const originalResJson = res.json;\n  res.json = function (bodyJson, ...args) {\n    capturedJsonResponse = bodyJson;\n    return originalResJson.apply(res, [bodyJson, ...args]);\n  };\n\n  res.on(\"finish\", () => {\n    const duration = Date.now() - start;\n    if (path.startsWith(\"/api\")) {\n      let logLine = `${req.method} ${path} ${res.statusCode} in ${duration}ms`;\n      if (capturedJsonResponse) {\n        logLine += ` :: ${JSON.stringify(capturedJsonResponse)}`;\n      }\n\n      log(logLine);\n    }\n  });\n\n  next();\n});\n\n(async () => {\n  await registerRoutes(httpServer, app);\n\n  app.use((err: any, _req: Request, res: Response, _next: NextFunction) => {\n    const status = err.status || err.statusCode || 500;\n    const message = err.message || \"Internal Server Error\";\n\n    res.status(status).json({ message });\n    throw err;\n  });\n\n  // importantly only setup vite in development and after\n  // setting up all the other routes so the catch-all route\n  // doesn't interfere with the other routes\n  if (process.env.NODE_ENV === \"production\") {\n    serveStatic(app);\n  } else {\n    const { setupVite } = await import(\"./vite\");\n    await setupVite(httpServer, app);\n  }\n\n  // ALWAYS serve the app on the port specified in the environment variable PORT\n  // Other ports are firewalled. Default to 5000 if not specified.\n  // this serves both the API and the client.\n  // It is the only port that is not firewalled.\n  const port = parseInt(process.env.PORT || \"5000\", 10);\n  httpServer.listen(\n    {\n      port,\n      host: \"0.0.0.0\",\n      reusePort: true,\n    },\n    () => {\n      log(`serving on port ${port}`);\n    },\n  );\n})();\n","path":null,"size_bytes":2969,"size_tokens":null},"client/src/pages/Admin.tsx":{"content":"import { useState, useMemo, useEffect } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { useLocation } from \"wouter\";\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { useI18n } from \"@/lib/i18n\";\nimport { useAdmin } from \"@/lib/store\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { \n  lotteryTypes, \n  lotteryTypeNames, \n  betTypes, \n  betTypeNames,\n  type LotteryType, \n  type BetType,\n  type BlockedNumber,\n  type User,\n  type Transaction,\n  type Bet,\n  type PayoutSetting,\n  type BetLimitWithLotteryTypes\n} from \"@shared/schema\";\nimport {\n  Settings,\n  Ban,\n  Plus,\n  Trash2,\n  DollarSign,\n  Shield,\n  Users,\n  Loader2,\n  CreditCard,\n  TrendingUp,\n  CheckCircle,\n  XCircle,\n  Clock,\n  BarChart3,\n  UserX,\n  UserCheck,\n  LineChart,\n  PieChart,\n  Trophy,\n  Play,\n  LogOut,\n  ImageIcon\n} from \"lucide-react\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from \"@/components/ui/dialog\";\nimport {\n  ResponsiveContainer,\n  AreaChart,\n  Area,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  PieChart as RechartsPie,\n  Pie,\n  Cell,\n  BarChart,\n  Bar,\n  Legend\n} from \"recharts\";\n\ntype UserWithoutPassword = Omit<User, \"password\">;\n\ninterface AdminStats {\n  users: { total: number; blocked: number; active: number };\n  bets: { total: number; pending: number; won: number; lost: number; totalAmount: number };\n  transactions: { pendingDeposits: number; totalDeposits: number };\n  affiliates: { total: number; totalCommission: number };\n}\n\ninterface LotteryResult {\n  id: number;\n  lotteryType: string;\n  drawDate: string;\n  firstPrize: string | null;\n  threeDigitTop: string | null;\n  threeDigitBottom: string | null;\n  twoDigitTop: string | null;\n  twoDigitBottom: string | null;\n  runTop: string | null;\n  runBottom: string | null;\n  isProcessed: boolean;\n  createdAt: string;\n}\n\nexport default function Admin() {\n  const { language, t } = useI18n();\n  const { isAdminAuthenticated, checkAdminStatus, logout } = useAdmin();\n  const { toast } = useToast();\n  const [, setLocation] = useLocation();\n  const [isCheckingAuth, setIsCheckingAuth] = useState(true);\n\n  useEffect(() => {\n    const verifyAdmin = async () => {\n      setIsCheckingAuth(true);\n      await checkAdminStatus();\n      setIsCheckingAuth(false);\n    };\n    verifyAdmin();\n  }, [checkAdminStatus]);\n\n  const [newLotteryType, setNewLotteryType] = useState<LotteryType | \"\">(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [newBetType, setNewBetType] = useState<BetType | \"all\">(\"all\");\n  const [betFilter, setBetFilter] = useState<\"all\" | \"pending\" | \"won\" | \"lost\">(\"all\");\n\n  const [resultLotteryType, setResultLotteryType] = useState<LotteryType | \"\">(\"\");\n  const [resultDrawDate, setResultDrawDate] = useState(new Date().toISOString().split('T')[0]);\n  const [resultFirstPrize, setResultFirstPrize] = useState(\"\");\n  const [resultThreeTop, setResultThreeTop] = useState(\"\");\n  const [resultThreeBottom, setResultThreeBottom] = useState(\"\");\n  const [resultTwoTop, setResultTwoTop] = useState(\"\");\n  const [resultTwoBottom, setResultTwoBottom] = useState(\"\");\n  const [editingPayoutRate, setEditingPayoutRate] = useState<string | null>(null);\n  const [editedRate, setEditedRate] = useState<string>(\"\");\n\n  const [limitNumber, setLimitNumber] = useState(\"\");\n  const [limitMaxAmount, setLimitMaxAmount] = useState(\"\");\n  const [limitLotteryTypes, setLimitLotteryTypes] = useState<string[]>([]);\n  const [isAllLotteryTypes, setIsAllLotteryTypes] = useState(true);\n\n  const handleLogout = async () => {\n    await logout();\n    toast({\n      title: language === \"th\" ? \"ออกจากระบบแล้ว\" : \"Logged out successfully\"\n    });\n    setLocation(\"/admin/login\");\n  };\n\n  const { data: blockedNumbers = [], isLoading } = useQuery<BlockedNumber[]>({\n    queryKey: [\"/api/blocked-numbers\"],\n    enabled: isAdminAuthenticated,\n  });\n\n  const { data: allUsers = [], isLoading: isLoadingUsers } = useQuery<UserWithoutPassword[]>({\n    queryKey: [\"/api/admin/users\"],\n    enabled: isAdminAuthenticated,\n  });\n\n  const { data: allTransactions = [], isLoading: isLoadingTransactions } = useQuery<Transaction[]>({\n    queryKey: [\"/api/transactions\"],\n    enabled: isAdminAuthenticated,\n  });\n\n  const { data: allBets = [], isLoading: isLoadingBets } = useQuery<Bet[]>({\n    queryKey: [\"/api/bets\"],\n    enabled: isAdminAuthenticated,\n  });\n\n  const { data: stats } = useQuery<AdminStats>({\n    queryKey: [\"/api/admin/stats\"],\n    refetchInterval: 30000,\n    enabled: isAdminAuthenticated,\n  });\n\n  const { data: lotteryResults = [], isLoading: isLoadingResults } = useQuery<LotteryResult[]>({\n    queryKey: [\"/api/lottery-results\"],\n    enabled: isAdminAuthenticated,\n  });\n\n  const { data: payoutSettings = [], isLoading: isLoadingPayoutRates, isError: isPayoutRatesError } = useQuery<PayoutSetting[]>({\n    queryKey: [\"/api/payout-rates\"],\n    enabled: isAdminAuthenticated,\n  });\n\n  const { data: betLimits = [], isLoading: isLoadingBetLimits } = useQuery<BetLimitWithLotteryTypes[]>({\n    queryKey: [\"/api/bet-limits\"],\n    enabled: isAdminAuthenticated,\n  });\n\n  interface BetTypeSetting {\n    id: number;\n    betType: string;\n    isEnabled: boolean;\n    updatedAt: string;\n  }\n\n  const { data: betTypeSettings = [], isLoading: isLoadingBetTypeSettings } = useQuery<BetTypeSetting[]>({\n    queryKey: [\"/api/bet-type-settings\"],\n    enabled: isAdminAuthenticated,\n  });\n\n  const updateBetTypeSettingMutation = useMutation({\n    mutationFn: async ({ betType, isEnabled }: { betType: string; isEnabled: boolean }) => {\n      const res = await apiRequest(\"PATCH\", `/api/bet-type-settings/${betType}`, { isEnabled });\n      return res.json();\n    },\n    onSuccess: (_, variables) => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/bet-type-settings\"] });\n      toast({\n        title: variables.isEnabled\n          ? (language === \"th\" ? \"เปิดรับแทงประเภทนี้แล้ว\" : \"Bet type enabled\")\n          : (language === \"th\" ? \"ปิดรับแทงประเภทนี้แล้ว\" : \"Bet type disabled\")\n      });\n    },\n    onError: () => {\n      toast({\n        title: language === \"th\" ? \"เกิดข้อผิดพลาด\" : \"Error occurred\",\n        variant: \"destructive\"\n      });\n    }\n  });\n\n  const addBlockedMutation = useMutation({\n    mutationFn: async (data: { lotteryType: string; number: string; betType: string | null }) => {\n      const res = await apiRequest(\"POST\", \"/api/blocked-numbers\", data);\n      return res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/blocked-numbers\"] });\n      setNewNumber(\"\");\n      toast({\n        title: language === \"th\" ? \"เพิ่มเลขอั้นสำเร็จ\" : \"Blocked number added\"\n      });\n    },\n    onError: () => {\n      toast({\n        title: language === \"th\" ? \"เกิดข้อผิดพลาด\" : \"Error occurred\",\n        variant: \"destructive\"\n      });\n    }\n  });\n\n  const updateBlockedMutation = useMutation({\n    mutationFn: async ({ id, isActive }: { id: number; isActive: boolean }) => {\n      const res = await apiRequest(\"PATCH\", `/api/blocked-numbers/${id}`, { isActive });\n      return res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/blocked-numbers\"] });\n    }\n  });\n\n  const deleteBlockedMutation = useMutation({\n    mutationFn: async (id: number) => {\n      const res = await apiRequest(\"DELETE\", `/api/blocked-numbers/${id}`);\n      return res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/blocked-numbers\"] });\n      toast({\n        title: language === \"th\" ? \"ลบเลขอั้นแล้ว\" : \"Blocked number removed\"\n      });\n    }\n  });\n\n  const updateUserMutation = useMutation({\n    mutationFn: async ({ id, isBlocked }: { id: number; isBlocked: boolean }) => {\n      const res = await apiRequest(\"PATCH\", `/api/admin/users/${id}`, { isBlocked });\n      return res.json();\n    },\n    onSuccess: (_, variables) => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/users\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/stats\"] });\n      toast({\n        title: variables.isBlocked \n          ? (language === \"th\" ? \"ระงับผู้ใช้แล้ว\" : \"User blocked\")\n          : (language === \"th\" ? \"ปลดระงับผู้ใช้แล้ว\" : \"User unblocked\")\n      });\n    }\n  });\n\n  const updateTransactionMutation = useMutation({\n    mutationFn: async ({ id, status }: { id: number; status: string }) => {\n      const res = await apiRequest(\"PATCH\", `/api/transactions/${id}`, { status });\n      return res.json();\n    },\n    onSuccess: (_, variables) => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/transactions\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/stats\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/users\"] });\n      toast({\n        title: variables.status === \"approved\"\n          ? (language === \"th\" ? \"อนุมัติธุรกรรมแล้ว\" : \"Transaction approved\")\n          : (language === \"th\" ? \"ปฏิเสธธุรกรรมแล้ว\" : \"Transaction rejected\")\n      });\n    }\n  });\n\n  const createResultMutation = useMutation({\n    mutationFn: async (data: {\n      lotteryType: string;\n      drawDate: string;\n      firstPrize?: string;\n      threeDigitTop?: string;\n      threeDigitBottom?: string;\n      twoDigitTop?: string;\n      twoDigitBottom?: string;\n    }) => {\n      const res = await apiRequest(\"POST\", \"/api/lottery-results\", data);\n      return res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/lottery-results\"] });\n      setResultFirstPrize(\"\");\n      setResultThreeTop(\"\");\n      setResultThreeBottom(\"\");\n      setResultTwoTop(\"\");\n      setResultTwoBottom(\"\");\n      toast({\n        title: language === \"th\" ? \"บันทึกผลหวยสำเร็จ\" : \"Lottery result saved\"\n      });\n    },\n    onError: () => {\n      toast({\n        title: language === \"th\" ? \"เกิดข้อผิดพลาด\" : \"Error occurred\",\n        variant: \"destructive\"\n      });\n    }\n  });\n\n  const processResultMutation = useMutation({\n    mutationFn: async (id: number) => {\n      const res = await apiRequest(\"POST\", `/api/lottery-results/${id}/process`);\n      return res.json();\n    },\n    onSuccess: (data) => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/lottery-results\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/bets\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/stats\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/users\"] });\n      toast({\n        title: language === \"th\" \n          ? `ประมวลผลแล้ว: ถูก ${data.won} รายการ, ไม่ถูก ${data.lost} รายการ`\n          : `Processed: ${data.won} won, ${data.lost} lost`\n      });\n    },\n    onError: () => {\n      toast({\n        title: language === \"th\" ? \"เกิดข้อผิดพลาด\" : \"Error occurred\",\n        variant: \"destructive\"\n      });\n    }\n  });\n\n  const updatePayoutRateMutation = useMutation({\n    mutationFn: async ({ betType, rate }: { betType: string; rate: number }) => {\n      const res = await apiRequest(\"PATCH\", `/api/payout-rates/${betType}`, { rate });\n      return res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/payout-rates\"] });\n      setEditingPayoutRate(null);\n      setEditedRate(\"\");\n      toast({\n        title: language === \"th\" ? \"อัปเดตอัตราจ่ายแล้ว\" : \"Payout rate updated\"\n      });\n    },\n    onError: () => {\n      toast({\n        title: language === \"th\" ? \"เกิดข้อผิดพลาด\" : \"Error occurred\",\n        variant: \"destructive\"\n      });\n    }\n  });\n\n  const addBetLimitMutation = useMutation({\n    mutationFn: async (data: { number: string; maxAmount: number; lotteryTypes: string[] }) => {\n      const res = await apiRequest(\"POST\", \"/api/bet-limits\", data);\n      return res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/bet-limits\"] });\n      setLimitNumber(\"\");\n      setLimitMaxAmount(\"\");\n      setLimitLotteryTypes([]);\n      setIsAllLotteryTypes(true);\n      toast({\n        title: language === \"th\" ? \"เพิ่มลิมิตสำเร็จ\" : \"Bet limit added\"\n      });\n    },\n    onError: () => {\n      toast({\n        title: language === \"th\" ? \"เกิดข้อผิดพลาด\" : \"Error occurred\",\n        variant: \"destructive\"\n      });\n    }\n  });\n\n  const updateBetLimitMutation = useMutation({\n    mutationFn: async ({ id, isActive }: { id: number; isActive: boolean }) => {\n      const res = await apiRequest(\"PATCH\", `/api/bet-limits/${id}`, { isActive });\n      return res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/bet-limits\"] });\n    }\n  });\n\n  const deleteBetLimitMutation = useMutation({\n    mutationFn: async (id: number) => {\n      const res = await apiRequest(\"DELETE\", `/api/bet-limits/${id}`);\n      return res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/bet-limits\"] });\n      toast({\n        title: language === \"th\" ? \"ลบลิมิตแล้ว\" : \"Bet limit removed\"\n      });\n    }\n  });\n\n  const chartColors = [\n    \"hsl(var(--primary))\",\n    \"hsl(var(--chart-2))\",\n    \"hsl(var(--chart-3))\",\n    \"hsl(var(--chart-4))\",\n    \"hsl(var(--chart-5))\",\n    \"#10B981\",\n    \"#F59E0B\",\n    \"#EF4444\",\n    \"#8B5CF6\",\n    \"#EC4899\",\n    \"#14B8A6\",\n    \"#F97316\"\n  ];\n\n  const bettingByLotteryData = useMemo(() => {\n    const grouped: Record<string, { amount: number; count: number }> = {};\n    allBets.forEach(bet => {\n      if (!grouped[bet.lotteryType]) {\n        grouped[bet.lotteryType] = { amount: 0, count: 0 };\n      }\n      grouped[bet.lotteryType].amount += bet.amount;\n      grouped[bet.lotteryType].count += 1;\n    });\n    return Object.entries(grouped).map(([type, data]) => ({\n      name: lotteryTypeNames[type as LotteryType]?.[language] || type,\n      value: data.amount,\n      count: data.count\n    }));\n  }, [allBets, language]);\n\n  const betTypeDistribution = useMemo(() => {\n    const grouped: Record<string, number> = {};\n    allBets.forEach(bet => {\n      grouped[bet.betType] = (grouped[bet.betType] || 0) + bet.amount;\n    });\n    return Object.entries(grouped).map(([type, amount]) => ({\n      name: betTypeNames[type as BetType]?.[language] || type,\n      value: amount\n    }));\n  }, [allBets, language]);\n\n  const hotNumbers = useMemo(() => {\n    const numberCounts: Record<string, number> = {};\n    allBets.forEach(bet => {\n      if (!numberCounts[bet.numbers]) {\n        numberCounts[bet.numbers] = 0;\n      }\n      numberCounts[bet.numbers]++;\n    });\n    return Object.entries(numberCounts)\n      .sort((a, b) => b[1] - a[1])\n      .slice(0, 10)\n      .map(([number, count]) => ({\n        number,\n        count\n      }));\n  }, [allBets]);\n\n  const dailyBettingData = useMemo(() => {\n    const dailyData: Record<string, { date: string; amount: number; count: number }> = {};\n    const last7Days = [];\n    for (let i = 6; i >= 0; i--) {\n      const d = new Date();\n      d.setDate(d.getDate() - i);\n      const dateStr = d.toISOString().split('T')[0];\n      last7Days.push(dateStr);\n      dailyData[dateStr] = { date: dateStr, amount: 0, count: 0 };\n    }\n    allBets.forEach(bet => {\n      const betDate = new Date(bet.createdAt).toISOString().split('T')[0];\n      if (dailyData[betDate]) {\n        dailyData[betDate].amount += bet.amount;\n        dailyData[betDate].count += 1;\n      }\n    });\n    return last7Days.map(date => ({\n      ...dailyData[date],\n      displayDate: new Date(date).toLocaleDateString(language === \"th\" ? \"th-TH\" : \"en-US\", { weekday: 'short', day: 'numeric' })\n    }));\n  }, [allBets, language]);\n\n  const affiliatePerformance = useMemo(() => {\n    return allUsers\n      .filter(u => u.affiliateEarnings > 0)\n      .sort((a, b) => b.affiliateEarnings - a.affiliateEarnings)\n      .slice(0, 10)\n      .map(user => ({\n        username: user.username,\n        earnings: user.affiliateEarnings\n      }));\n  }, [allUsers]);\n\n  const pendingDeposits = allTransactions.filter(t => t.type === \"deposit\" && t.status === \"pending\");\n  const filteredBets = betFilter === \"all\" \n    ? allBets \n    : allBets.filter(b => b.status === betFilter);\n\n  const getPayoutRate = (betType: string): number | null => {\n    const setting = payoutSettings.find(s => s.betType === betType);\n    return setting ? setting.rate : null;\n  };\n\n  const handleSavePayoutRate = (betType: string) => {\n    const rate = parseFloat(editedRate);\n    if (isNaN(rate)) {\n      toast({\n        title: language === \"th\" ? \"กรุณากรอกตัวเลขที่ถูกต้อง\" : \"Please enter a valid number\",\n        variant: \"destructive\"\n      });\n      return;\n    }\n    if (rate <= 0) {\n      toast({\n        title: language === \"th\" ? \"อัตราจ่ายต้องมากกว่า 0\" : \"Rate must be greater than 0\",\n        variant: \"destructive\"\n      });\n      return;\n    }\n    if (rate > 10000) {\n      toast({\n        title: language === \"th\" ? \"อัตราจ่ายต้องไม่เกิน 10,000\" : \"Rate must not exceed 10,000\",\n        variant: \"destructive\"\n      });\n      return;\n    }\n    updatePayoutRateMutation.mutate({ betType, rate });\n  };\n\n  const handleStartEditPayoutRate = (betType: string) => {\n    const rate = getPayoutRate(betType);\n    setEditingPayoutRate(betType);\n    setEditedRate(rate !== null ? rate.toString() : \"\");\n  };\n\n  const handleCancelEditPayoutRate = () => {\n    setEditingPayoutRate(null);\n    setEditedRate(\"\");\n  };\n\n  const getUsernameById = (userId: number) => {\n    const user = allUsers.find(u => u.id === userId);\n    return user?.username || `User #${userId}`;\n  };\n\n  if (isCheckingAuth) {\n    return (\n      <div className=\"min-h-full flex items-center justify-center p-4\">\n        <Card className=\"w-full max-w-md text-center\">\n          <CardContent className=\"p-8\">\n            <Loader2 className=\"h-8 w-8 animate-spin mx-auto text-primary\" />\n            <p className=\"mt-4 text-muted-foreground\">\n              {language === \"th\" ? \"กำลังตรวจสอบสิทธิ์...\" : \"Verifying access...\"}\n            </p>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  if (!isAdminAuthenticated) {\n    return (\n      <div className=\"min-h-full flex items-center justify-center p-4\">\n        <Card className=\"w-full max-w-md text-center\">\n          <CardHeader>\n            <div className=\"mx-auto p-4 bg-primary/10 rounded-full w-fit mb-4\">\n              <Shield className=\"h-8 w-8 text-primary\" />\n            </div>\n            <CardTitle>{t(\"admin.title\")}</CardTitle>\n            <CardDescription>\n              {language === \"th\" \n                ? \"เข้าสู่ระบบ Admin เพื่อจัดการระบบ\" \n                : \"Login as Admin to manage the system\"}\n            </CardDescription>\n          </CardHeader>\n          <CardContent>\n            <Button className=\"w-full\" asChild>\n              <a href=\"/admin/login\">{t(\"admin.login\")}</a>\n            </Button>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  const handleAddBlocked = () => {\n    if (!newLotteryType || !newNumber) {\n      toast({\n        title: language === \"th\" ? \"ข้อมูลไม่ครบ\" : \"Missing information\",\n        variant: \"destructive\"\n      });\n      return;\n    }\n\n    addBlockedMutation.mutate({\n      lotteryType: newLotteryType,\n      number: newNumber,\n      betType: newBetType === \"all\" ? null : newBetType\n    });\n  };\n\n  const handleToggleBlocked = (id: number, isActive: boolean) => {\n    updateBlockedMutation.mutate({ id, isActive: !isActive });\n  };\n\n  const handleDeleteBlocked = (id: number) => {\n    deleteBlockedMutation.mutate(id);\n  };\n\n  const handleToggleUserBlock = (userId: number, isBlocked: boolean) => {\n    updateUserMutation.mutate({ id: userId, isBlocked: !isBlocked });\n  };\n\n  const handleApproveTransaction = (tx: Transaction) => {\n    updateTransactionMutation.mutate({ id: tx.id, status: \"approved\" });\n  };\n\n  const handleRejectTransaction = (tx: Transaction) => {\n    updateTransactionMutation.mutate({ id: tx.id, status: \"rejected\" });\n  };\n\n  const handleCreateResult = () => {\n    if (!resultLotteryType || !resultDrawDate || !resultFirstPrize) {\n      toast({\n        title: language === \"th\" ? \"กรุณากรอกข้อมูลให้ครบ\" : \"Please fill in all required fields\",\n        variant: \"destructive\"\n      });\n      return;\n    }\n\n    createResultMutation.mutate({\n      lotteryType: resultLotteryType,\n      drawDate: resultDrawDate,\n      firstPrize: resultFirstPrize,\n      threeDigitTop: resultThreeTop || undefined,\n      threeDigitBottom: resultThreeBottom || undefined,\n      twoDigitTop: resultTwoTop || resultFirstPrize.slice(-2),\n      twoDigitBottom: resultTwoBottom || undefined\n    });\n  };\n\n  const handleProcessResult = (id: number) => {\n    processResultMutation.mutate(id);\n  };\n\n  return (\n    <div className=\"min-h-full\">\n      <div className=\"bg-gradient-to-br from-primary/10 via-background to-primary/5 p-4 md:p-6 border-b border-border\">\n        <div className=\"flex items-center justify-between gap-3\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"p-3 bg-primary/10 rounded-xl\">\n              <Settings className=\"h-6 w-6 text-primary\" />\n            </div>\n            <div>\n              <h1 className=\"text-xl md:text-2xl font-bold\">{t(\"admin.title\")}</h1>\n              <p className=\"text-sm text-muted-foreground\">\n                {language === \"th\" ? \"จัดการระบบ ผู้ใช้ และธุรกรรม\" : \"Manage system, users, and transactions\"}\n              </p>\n            </div>\n          </div>\n          <Button \n            variant=\"outline\" \n            onClick={handleLogout}\n            className=\"gap-2\"\n            data-testid=\"button-admin-logout\"\n          >\n            <LogOut className=\"h-4 w-4\" />\n            {language === \"th\" ? \"ออกจากระบบ\" : \"Logout\"}\n          </Button>\n        </div>\n      </div>\n\n      {stats && (\n        <div className=\"p-4 md:p-6 grid grid-cols-2 md:grid-cols-4 gap-3\">\n          <Card className=\"bg-gradient-to-br from-blue-500/10 to-blue-600/5\">\n            <CardContent className=\"p-4\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <p className=\"text-xs text-muted-foreground\">{language === \"th\" ? \"ผู้ใช้ทั้งหมด\" : \"Total Users\"}</p>\n                  <p className=\"text-2xl font-bold\">{stats.users.total}</p>\n                </div>\n                <Users className=\"h-8 w-8 text-blue-500 opacity-50\" />\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card className=\"bg-gradient-to-br from-green-500/10 to-green-600/5\">\n            <CardContent className=\"p-4\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <p className=\"text-xs text-muted-foreground\">{language === \"th\" ? \"ยอดแทงทั้งหมด\" : \"Total Bets\"}</p>\n                  <p className=\"text-2xl font-bold\">{stats.bets.totalAmount.toLocaleString()}</p>\n                </div>\n                <TrendingUp className=\"h-8 w-8 text-green-500 opacity-50\" />\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card className=\"bg-gradient-to-br from-yellow-500/10 to-yellow-600/5\">\n            <CardContent className=\"p-4\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <p className=\"text-xs text-muted-foreground\">{language === \"th\" ? \"รอดำเนินการ\" : \"Pending\"}</p>\n                  <p className=\"text-2xl font-bold\">{stats.transactions.pendingDeposits}</p>\n                </div>\n                <Clock className=\"h-8 w-8 text-yellow-500 opacity-50\" />\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card className=\"bg-gradient-to-br from-purple-500/10 to-purple-600/5\">\n            <CardContent className=\"p-4\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <p className=\"text-xs text-muted-foreground\">{language === \"th\" ? \"คอมมิชชั่น\" : \"Commission\"}</p>\n                  <p className=\"text-2xl font-bold\">{stats.affiliates.totalCommission.toLocaleString()}</p>\n                </div>\n                <BarChart3 className=\"h-8 w-8 text-purple-500 opacity-50\" />\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n      )}\n\n      <div className=\"p-4 md:p-6 pt-0\">\n        <Tabs defaultValue=\"transactions\" className=\"space-y-4\">\n          <TabsList className=\"grid w-full grid-cols-8\">\n            <TabsTrigger value=\"transactions\" className=\"gap-1 text-xs sm:text-sm\">\n              <CreditCard className=\"h-4 w-4\" />\n              <span className=\"hidden sm:inline\">{language === \"th\" ? \"ธุรกรรม\" : \"Trans\"}</span>\n              {pendingDeposits.length > 0 && (\n                <Badge variant=\"destructive\" className=\"ml-1 h-5 w-5 p-0 flex items-center justify-center text-xs\">\n                  {pendingDeposits.length}\n                </Badge>\n              )}\n            </TabsTrigger>\n            <TabsTrigger value=\"results\" className=\"gap-1 text-xs sm:text-sm\">\n              <Trophy className=\"h-4 w-4\" />\n              <span className=\"hidden sm:inline\">{language === \"th\" ? \"ผลหวย\" : \"Results\"}</span>\n            </TabsTrigger>\n            <TabsTrigger value=\"users\" className=\"gap-1 text-xs sm:text-sm\">\n              <Users className=\"h-4 w-4\" />\n              <span className=\"hidden sm:inline\">{language === \"th\" ? \"ผู้ใช้\" : \"Users\"}</span>\n            </TabsTrigger>\n            <TabsTrigger value=\"analytics\" className=\"gap-1 text-xs sm:text-sm\">\n              <LineChart className=\"h-4 w-4\" />\n              <span className=\"hidden sm:inline\">{language === \"th\" ? \"วิเคราะห์\" : \"Charts\"}</span>\n            </TabsTrigger>\n            <TabsTrigger value=\"bets\" className=\"gap-1 text-xs sm:text-sm\">\n              <BarChart3 className=\"h-4 w-4\" />\n              <span className=\"hidden sm:inline\">{language === \"th\" ? \"รายงาน\" : \"Bets\"}</span>\n            </TabsTrigger>\n            <TabsTrigger value=\"blocked\" className=\"gap-1 text-xs sm:text-sm\">\n              <Ban className=\"h-4 w-4\" />\n              <span className=\"hidden sm:inline\">{language === \"th\" ? \"อั้น\" : \"Block\"}</span>\n            </TabsTrigger>\n            <TabsTrigger value=\"limits\" className=\"gap-1 text-xs sm:text-sm\">\n              <Shield className=\"h-4 w-4\" />\n              <span className=\"hidden sm:inline\">{language === \"th\" ? \"ลิมิต\" : \"Limits\"}</span>\n            </TabsTrigger>\n            <TabsTrigger value=\"bet-types\" className=\"gap-1 text-xs sm:text-sm\">\n              <Play className=\"h-4 w-4\" />\n              <span className=\"hidden sm:inline\">{language === \"th\" ? \"ประเภท\" : \"Types\"}</span>\n            </TabsTrigger>\n          </TabsList>\n\n          <TabsContent value=\"transactions\" className=\"space-y-4\">\n            <Card>\n              <CardHeader className=\"pb-3\">\n                <CardTitle className=\"text-lg flex items-center gap-2\">\n                  <CreditCard className=\"h-5 w-5\" />\n                  {language === \"th\" ? \"รายการฝากรอดำเนินการ\" : \"Pending Deposits\"}\n                  {pendingDeposits.length > 0 && (\n                    <Badge variant=\"destructive\">{pendingDeposits.length}</Badge>\n                  )}\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"p-0\">\n                {isLoadingTransactions ? (\n                  <div className=\"p-4 space-y-3\">\n                    {[1, 2, 3].map((i) => (\n                      <Skeleton key={i} className=\"h-16 w-full\" />\n                    ))}\n                  </div>\n                ) : pendingDeposits.length === 0 ? (\n                  <div className=\"p-8 text-center text-muted-foreground\">\n                    <CheckCircle className=\"h-12 w-12 mx-auto mb-4 opacity-50\" />\n                    <p>{language === \"th\" ? \"ไม่มีรายการรอดำเนินการ\" : \"No pending transactions\"}</p>\n                  </div>\n                ) : (\n                  <Table>\n                    <TableHeader>\n                      <TableRow>\n                        <TableHead>{language === \"th\" ? \"ผู้ใช้\" : \"User\"}</TableHead>\n                        <TableHead>{language === \"th\" ? \"จำนวน\" : \"Amount\"}</TableHead>\n                        <TableHead>{language === \"th\" ? \"สลิป\" : \"Slip\"}</TableHead>\n                        <TableHead>{language === \"th\" ? \"อ้างอิง\" : \"Reference\"}</TableHead>\n                        <TableHead>{language === \"th\" ? \"วันที่\" : \"Date\"}</TableHead>\n                        <TableHead className=\"text-right\">{language === \"th\" ? \"จัดการ\" : \"Actions\"}</TableHead>\n                      </TableRow>\n                    </TableHeader>\n                    <TableBody>\n                      {pendingDeposits.map((tx) => (\n                        <TableRow key={tx.id} data-testid={`row-transaction-${tx.id}`}>\n                          <TableCell className=\"font-medium\">{getUsernameById(tx.userId)}</TableCell>\n                          <TableCell className=\"font-bold text-green-600\">\n                            +{tx.amount.toLocaleString()} ฿\n                          </TableCell>\n                          <TableCell>\n                            {tx.slipUrl ? (\n                              <Dialog>\n                                <DialogTrigger asChild>\n                                  <Button size=\"sm\" variant=\"outline\" data-testid={`button-view-slip-${tx.id}`}>\n                                    <ImageIcon className=\"h-4 w-4 mr-1\" />\n                                    {language === \"th\" ? \"ดูสลิป\" : \"View\"}\n                                  </Button>\n                                </DialogTrigger>\n                                <DialogContent className=\"max-w-lg\">\n                                  <DialogHeader>\n                                    <DialogTitle>\n                                      {language === \"th\" ? \"สลิปการโอนเงิน\" : \"Payment Slip\"}\n                                    </DialogTitle>\n                                  </DialogHeader>\n                                  <div className=\"flex flex-col gap-4\">\n                                    <div className=\"text-sm space-y-1\">\n                                      <p><strong>{language === \"th\" ? \"ผู้ใช้:\" : \"User:\"}</strong> {getUsernameById(tx.userId)}</p>\n                                      <p><strong>{language === \"th\" ? \"จำนวน:\" : \"Amount:\"}</strong> {tx.amount.toLocaleString()} ฿</p>\n                                      <p><strong>{language === \"th\" ? \"อ้างอิง:\" : \"Reference:\"}</strong> {tx.reference}</p>\n                                    </div>\n                                    <img \n                                      src={tx.slipUrl} \n                                      alt=\"Payment slip\" \n                                      className=\"w-full rounded-lg border\"\n                                    />\n                                  </div>\n                                </DialogContent>\n                              </Dialog>\n                            ) : (\n                              <span className=\"text-muted-foreground text-xs\">\n                                {language === \"th\" ? \"ไม่มีสลิป\" : \"No slip\"}\n                              </span>\n                            )}\n                          </TableCell>\n                          <TableCell className=\"font-mono text-xs\">{tx.reference}</TableCell>\n                          <TableCell className=\"text-sm text-muted-foreground\">\n                            {new Date(tx.createdAt).toLocaleDateString(language === \"th\" ? \"th-TH\" : \"en-US\")}\n                          </TableCell>\n                          <TableCell className=\"text-right\">\n                            <div className=\"flex justify-end gap-2\">\n                              <Button\n                                size=\"sm\"\n                                variant=\"default\"\n                                onClick={() => handleApproveTransaction(tx)}\n                                disabled={updateTransactionMutation.isPending}\n                                data-testid={`button-approve-${tx.id}`}\n                              >\n                                <CheckCircle className=\"h-4 w-4 mr-1\" />\n                                {language === \"th\" ? \"อนุมัติ\" : \"Approve\"}\n                              </Button>\n                              <Button\n                                size=\"sm\"\n                                variant=\"destructive\"\n                                onClick={() => handleRejectTransaction(tx)}\n                                disabled={updateTransactionMutation.isPending}\n                                data-testid={`button-reject-${tx.id}`}\n                              >\n                                <XCircle className=\"h-4 w-4 mr-1\" />\n                                {language === \"th\" ? \"ปฏิเสธ\" : \"Reject\"}\n                              </Button>\n                            </div>\n                          </TableCell>\n                        </TableRow>\n                      ))}\n                    </TableBody>\n                  </Table>\n                )}\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          <TabsContent value=\"results\" className=\"space-y-4\">\n            <Card>\n              <CardHeader className=\"pb-3\">\n                <CardTitle className=\"text-lg flex items-center gap-2\">\n                  <Plus className=\"h-5 w-5\" />\n                  {language === \"th\" ? \"บันทึกผลหวย\" : \"Add Lottery Result\"}\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <div className=\"grid gap-4 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-6\">\n                  <div className=\"space-y-2\">\n                    <Label>{language === \"th\" ? \"ประเภทหวย\" : \"Lottery Type\"}</Label>\n                    <Select value={resultLotteryType} onValueChange={(v) => setResultLotteryType(v as LotteryType)}>\n                      <SelectTrigger data-testid=\"select-result-lottery\">\n                        <SelectValue placeholder={language === \"th\" ? \"เลือกหวย\" : \"Select lottery\"} />\n                      </SelectTrigger>\n                      <SelectContent>\n                        {lotteryTypes.map((type) => (\n                          <SelectItem key={type} value={type}>\n                            {lotteryTypeNames[type][language]}\n                          </SelectItem>\n                        ))}\n                      </SelectContent>\n                    </Select>\n                  </div>\n\n                  <div className=\"space-y-2\">\n                    <Label>{language === \"th\" ? \"วันที่ออก\" : \"Draw Date\"}</Label>\n                    <Input\n                      type=\"date\"\n                      value={resultDrawDate}\n                      onChange={(e) => setResultDrawDate(e.target.value)}\n                      data-testid=\"input-result-date\"\n                    />\n                  </div>\n\n                  <div className=\"space-y-2\">\n                    <Label>{language === \"th\" ? \"รางวัลที่ 1 (6 หลัก)\" : \"First Prize (6 digits)\"}</Label>\n                    <Input\n                      value={resultFirstPrize}\n                      onChange={(e) => setResultFirstPrize(e.target.value.replace(/[^0-9]/g, \"\"))}\n                      placeholder=\"123456\"\n                      className=\"font-mono\"\n                      maxLength={6}\n                      data-testid=\"input-first-prize\"\n                    />\n                  </div>\n\n                  <div className=\"space-y-2\">\n                    <Label>{language === \"th\" ? \"3 ตัวหน้า\" : \"3 Digits Front\"}</Label>\n                    <Input\n                      value={resultThreeTop}\n                      onChange={(e) => setResultThreeTop(e.target.value.replace(/[^0-9]/g, \"\"))}\n                      placeholder=\"123\"\n                      className=\"font-mono\"\n                      maxLength={3}\n                      data-testid=\"input-three-front\"\n                    />\n                  </div>\n\n                  <div className=\"space-y-2\">\n                    <Label>{language === \"th\" ? \"3 ตัวล่าง\" : \"3 Digits Bottom\"}</Label>\n                    <Input\n                      value={resultThreeBottom}\n                      onChange={(e) => setResultThreeBottom(e.target.value.replace(/[^0-9]/g, \"\"))}\n                      placeholder=\"456\"\n                      className=\"font-mono\"\n                      maxLength={3}\n                      data-testid=\"input-three-bottom\"\n                    />\n                  </div>\n\n                  <div className=\"space-y-2\">\n                    <Label>{language === \"th\" ? \"2 ตัวล่าง\" : \"2 Digits Bottom\"}</Label>\n                    <Input\n                      value={resultTwoBottom}\n                      onChange={(e) => setResultTwoBottom(e.target.value.replace(/[^0-9]/g, \"\"))}\n                      placeholder=\"00\"\n                      className=\"font-mono\"\n                      maxLength={2}\n                      data-testid=\"input-two-bottom\"\n                    />\n                  </div>\n                </div>\n\n                <Button \n                  onClick={handleCreateResult} \n                  className=\"w-full gap-2\"\n                  disabled={createResultMutation.isPending}\n                  data-testid=\"button-save-result\"\n                >\n                  {createResultMutation.isPending ? (\n                    <Loader2 className=\"h-4 w-4 animate-spin\" />\n                  ) : (\n                    <Plus className=\"h-4 w-4\" />\n                  )}\n                  {language === \"th\" ? \"บันทึกผลหวย\" : \"Save Result\"}\n                </Button>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader className=\"pb-3\">\n                <CardTitle className=\"text-lg flex items-center gap-2\">\n                  <Trophy className=\"h-5 w-5\" />\n                  {language === \"th\" ? \"รายการผลหวย\" : \"Lottery Results\"}\n                  <Badge variant=\"secondary\">{lotteryResults.length}</Badge>\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"p-0\">\n                {isLoadingResults ? (\n                  <div className=\"p-4 space-y-3\">\n                    {[1, 2, 3].map((i) => (\n                      <Skeleton key={i} className=\"h-12 w-full\" />\n                    ))}\n                  </div>\n                ) : lotteryResults.length === 0 ? (\n                  <div className=\"p-8 text-center text-muted-foreground\">\n                    <Trophy className=\"h-12 w-12 mx-auto mb-4 opacity-50\" />\n                    <p>{language === \"th\" ? \"ยังไม่มีผลหวย\" : \"No lottery results yet\"}</p>\n                  </div>\n                ) : (\n                  <Table>\n                    <TableHeader>\n                      <TableRow>\n                        <TableHead>{language === \"th\" ? \"หวย\" : \"Lottery\"}</TableHead>\n                        <TableHead>{language === \"th\" ? \"วันที่\" : \"Date\"}</TableHead>\n                        <TableHead>{language === \"th\" ? \"รางวัลที่ 1\" : \"First Prize\"}</TableHead>\n                        <TableHead>{language === \"th\" ? \"2 ตัวล่าง\" : \"2D Bottom\"}</TableHead>\n                        <TableHead>{language === \"th\" ? \"สถานะ\" : \"Status\"}</TableHead>\n                        <TableHead className=\"text-right\">{language === \"th\" ? \"จัดการ\" : \"Actions\"}</TableHead>\n                      </TableRow>\n                    </TableHeader>\n                    <TableBody>\n                      {lotteryResults.map((result) => (\n                        <TableRow key={result.id} data-testid={`row-result-${result.id}`}>\n                          <TableCell>\n                            <Badge variant=\"secondary\">\n                              {lotteryTypeNames[result.lotteryType as LotteryType]?.[language] || result.lotteryType}\n                            </Badge>\n                          </TableCell>\n                          <TableCell className=\"font-mono\">\n                            {new Date(result.drawDate).toLocaleDateString(language === \"th\" ? \"th-TH\" : \"en-US\")}\n                          </TableCell>\n                          <TableCell className=\"font-mono font-bold text-lg text-primary\">\n                            {result.firstPrize || \"-\"}\n                          </TableCell>\n                          <TableCell className=\"font-mono font-bold\">\n                            {result.twoDigitBottom || \"-\"}\n                          </TableCell>\n                          <TableCell>\n                            {result.isProcessed ? (\n                              <Badge className=\"bg-green-500 gap-1\">\n                                <CheckCircle className=\"h-3 w-3\" />\n                                {language === \"th\" ? \"ประมวลผลแล้ว\" : \"Processed\"}\n                              </Badge>\n                            ) : (\n                              <Badge variant=\"secondary\" className=\"gap-1\">\n                                <Clock className=\"h-3 w-3\" />\n                                {language === \"th\" ? \"รอประมวลผล\" : \"Pending\"}\n                              </Badge>\n                            )}\n                          </TableCell>\n                          <TableCell className=\"text-right\">\n                            {!result.isProcessed && (\n                              <Button\n                                size=\"sm\"\n                                onClick={() => handleProcessResult(result.id)}\n                                disabled={processResultMutation.isPending}\n                                data-testid={`button-process-${result.id}`}\n                              >\n                                <Play className=\"h-4 w-4 mr-1\" />\n                                {language === \"th\" ? \"ประมวลผล\" : \"Process\"}\n                              </Button>\n                            )}\n                          </TableCell>\n                        </TableRow>\n                      ))}\n                    </TableBody>\n                  </Table>\n                )}\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          <TabsContent value=\"users\" className=\"space-y-4\">\n            <Card>\n              <CardHeader className=\"pb-3\">\n                <CardTitle className=\"text-lg flex items-center gap-2\">\n                  <Users className=\"h-5 w-5\" />\n                  {language === \"th\" ? \"รายชื่อผู้ใช้\" : \"User List\"}\n                  <Badge variant=\"secondary\">{allUsers.length}</Badge>\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"p-0\">\n                {isLoadingUsers ? (\n                  <div className=\"p-4 space-y-3\">\n                    {[1, 2, 3].map((i) => (\n                      <Skeleton key={i} className=\"h-12 w-full\" />\n                    ))}\n                  </div>\n                ) : (\n                  <Table>\n                    <TableHeader>\n                      <TableRow>\n                        <TableHead>ID</TableHead>\n                        <TableHead>{language === \"th\" ? \"ชื่อผู้ใช้\" : \"Username\"}</TableHead>\n                        <TableHead>{language === \"th\" ? \"ยอดเงิน\" : \"Balance\"}</TableHead>\n                        <TableHead>{language === \"th\" ? \"รหัสแนะนำ\" : \"Referral\"}</TableHead>\n                        <TableHead>{language === \"th\" ? \"สถานะ\" : \"Status\"}</TableHead>\n                        <TableHead className=\"text-right\">{language === \"th\" ? \"จัดการ\" : \"Actions\"}</TableHead>\n                      </TableRow>\n                    </TableHeader>\n                    <TableBody>\n                      {allUsers.map((user) => (\n                        <TableRow key={user.id} data-testid={`row-user-${user.id}`}>\n                          <TableCell className=\"font-mono text-muted-foreground\">#{user.id}</TableCell>\n                          <TableCell className=\"font-medium\">{user.username}</TableCell>\n                          <TableCell className=\"font-bold\">{user.balance.toLocaleString()} ฿</TableCell>\n                          <TableCell className=\"font-mono text-xs\">{user.referralCode}</TableCell>\n                          <TableCell>\n                            {user.isBlocked ? (\n                              <Badge variant=\"destructive\" className=\"gap-1\">\n                                <UserX className=\"h-3 w-3\" />\n                                {language === \"th\" ? \"ระงับ\" : \"Blocked\"}\n                              </Badge>\n                            ) : (\n                              <Badge variant=\"secondary\" className=\"gap-1\">\n                                <UserCheck className=\"h-3 w-3\" />\n                                {language === \"th\" ? \"ใช้งาน\" : \"Active\"}\n                              </Badge>\n                            )}\n                          </TableCell>\n                          <TableCell className=\"text-right\">\n                            <Button\n                              size=\"sm\"\n                              variant={user.isBlocked ? \"default\" : \"destructive\"}\n                              onClick={() => handleToggleUserBlock(user.id, user.isBlocked)}\n                              disabled={updateUserMutation.isPending}\n                              data-testid={`button-toggle-block-${user.id}`}\n                            >\n                              {user.isBlocked ? (\n                                <>\n                                  <UserCheck className=\"h-4 w-4 mr-1\" />\n                                  {language === \"th\" ? \"ปลดระงับ\" : \"Unblock\"}\n                                </>\n                              ) : (\n                                <>\n                                  <UserX className=\"h-4 w-4 mr-1\" />\n                                  {language === \"th\" ? \"ระงับ\" : \"Block\"}\n                                </>\n                              )}\n                            </Button>\n                          </TableCell>\n                        </TableRow>\n                      ))}\n                    </TableBody>\n                  </Table>\n                )}\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          <TabsContent value=\"analytics\" className=\"space-y-4\">\n            <div className=\"grid gap-4 md:grid-cols-2\">\n              <Card>\n                <CardHeader className=\"pb-3\">\n                  <CardTitle className=\"text-lg flex items-center gap-2\">\n                    <TrendingUp className=\"h-5 w-5\" />\n                    {language === \"th\" ? \"ยอดแทงรายวัน (7 วัน)\" : \"Daily Betting (7 Days)\"}\n                  </CardTitle>\n                </CardHeader>\n                <CardContent>\n                  {dailyBettingData.length > 0 ? (\n                    <ResponsiveContainer width=\"100%\" height={250}>\n                      <AreaChart data={dailyBettingData}>\n                        <defs>\n                          <linearGradient id=\"colorAmount\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                            <stop offset=\"5%\" stopColor=\"hsl(var(--primary))\" stopOpacity={0.8}/>\n                            <stop offset=\"95%\" stopColor=\"hsl(var(--primary))\" stopOpacity={0}/>\n                          </linearGradient>\n                        </defs>\n                        <CartesianGrid strokeDasharray=\"3 3\" className=\"stroke-muted\" />\n                        <XAxis dataKey=\"displayDate\" className=\"text-xs\" tick={{fill: 'hsl(var(--muted-foreground))'}} />\n                        <YAxis className=\"text-xs\" tick={{fill: 'hsl(var(--muted-foreground))'}} tickFormatter={(v) => `${(v/1000).toFixed(0)}k`} />\n                        <Tooltip \n                          contentStyle={{ \n                            backgroundColor: 'hsl(var(--card))', \n                            border: '1px solid hsl(var(--border))',\n                            borderRadius: '8px'\n                          }}\n                          formatter={(value: number) => [`${value.toLocaleString()} ฿`, language === \"th\" ? \"ยอดแทง\" : \"Amount\"]}\n                        />\n                        <Area type=\"monotone\" dataKey=\"amount\" stroke=\"hsl(var(--primary))\" fillOpacity={1} fill=\"url(#colorAmount)\" />\n                      </AreaChart>\n                    </ResponsiveContainer>\n                  ) : (\n                    <div className=\"h-[250px] flex items-center justify-center text-muted-foreground\">\n                      {language === \"th\" ? \"ไม่มีข้อมูล\" : \"No data available\"}\n                    </div>\n                  )}\n                </CardContent>\n              </Card>\n\n              <Card>\n                <CardHeader className=\"pb-3\">\n                  <CardTitle className=\"text-lg flex items-center gap-2\">\n                    <PieChart className=\"h-5 w-5\" />\n                    {language === \"th\" ? \"ยอดแทงตามหวย\" : \"Betting by Lottery\"}\n                  </CardTitle>\n                </CardHeader>\n                <CardContent>\n                  {bettingByLotteryData.length > 0 ? (\n                    <ResponsiveContainer width=\"100%\" height={250}>\n                      <RechartsPie>\n                        <Pie\n                          data={bettingByLotteryData}\n                          cx=\"50%\"\n                          cy=\"50%\"\n                          innerRadius={60}\n                          outerRadius={100}\n                          paddingAngle={2}\n                          dataKey=\"value\"\n                        >\n                          {bettingByLotteryData.map((_, index) => (\n                            <Cell key={`cell-${index}`} fill={chartColors[index % chartColors.length]} />\n                          ))}\n                        </Pie>\n                        <Tooltip \n                          contentStyle={{ \n                            backgroundColor: 'hsl(var(--card))', \n                            border: '1px solid hsl(var(--border))',\n                            borderRadius: '8px'\n                          }}\n                          formatter={(value: number) => [`${value.toLocaleString()} ฿`, language === \"th\" ? \"ยอดแทง\" : \"Amount\"]}\n                        />\n                        <Legend />\n                      </RechartsPie>\n                    </ResponsiveContainer>\n                  ) : (\n                    <div className=\"h-[250px] flex items-center justify-center text-muted-foreground\">\n                      {language === \"th\" ? \"ไม่มีข้อมูล\" : \"No data available\"}\n                    </div>\n                  )}\n                </CardContent>\n              </Card>\n            </div>\n\n            <div className=\"grid gap-4 md:grid-cols-2\">\n              <Card>\n                <CardHeader className=\"pb-3\">\n                  <CardTitle className=\"text-lg flex items-center gap-2\">\n                    <BarChart3 className=\"h-5 w-5\" />\n                    {language === \"th\" ? \"เลขฮอต Top 10\" : \"Hot Numbers Top 10\"}\n                  </CardTitle>\n                  <CardDescription>\n                    {language === \"th\" ? \"เลขที่มีคนแทงมากที่สุด\" : \"Most frequently bet numbers\"}\n                  </CardDescription>\n                </CardHeader>\n                <CardContent>\n                  {hotNumbers.length > 0 ? (\n                    <ResponsiveContainer width=\"100%\" height={250}>\n                      <BarChart data={hotNumbers} layout=\"vertical\">\n                        <CartesianGrid strokeDasharray=\"3 3\" className=\"stroke-muted\" />\n                        <XAxis type=\"number\" tick={{fill: 'hsl(var(--muted-foreground))'}} />\n                        <YAxis \n                          type=\"category\" \n                          dataKey=\"number\" \n                          tick={{fill: 'hsl(var(--muted-foreground))', fontFamily: 'monospace', fontWeight: 'bold'}} \n                          width={60}\n                        />\n                        <Tooltip \n                          contentStyle={{ \n                            backgroundColor: 'hsl(var(--card))', \n                            border: '1px solid hsl(var(--border))',\n                            borderRadius: '8px'\n                          }}\n                          formatter={(value: number) => [value, language === \"th\" ? \"จำนวนครั้ง\" : \"Count\"]}\n                        />\n                        <Bar dataKey=\"count\" fill=\"hsl(var(--primary))\" radius={[0, 4, 4, 0]} />\n                      </BarChart>\n                    </ResponsiveContainer>\n                  ) : (\n                    <div className=\"h-[250px] flex items-center justify-center text-muted-foreground\">\n                      {language === \"th\" ? \"ไม่มีข้อมูล\" : \"No data available\"}\n                    </div>\n                  )}\n                </CardContent>\n              </Card>\n\n              <Card>\n                <CardHeader className=\"pb-3\">\n                  <CardTitle className=\"text-lg flex items-center gap-2\">\n                    <DollarSign className=\"h-5 w-5\" />\n                    {language === \"th\" ? \"ยอดแทงตามประเภท\" : \"Betting by Type\"}\n                  </CardTitle>\n                </CardHeader>\n                <CardContent>\n                  {betTypeDistribution.length > 0 ? (\n                    <ResponsiveContainer width=\"100%\" height={250}>\n                      <BarChart data={betTypeDistribution}>\n                        <CartesianGrid strokeDasharray=\"3 3\" className=\"stroke-muted\" />\n                        <XAxis \n                          dataKey=\"name\" \n                          tick={{fill: 'hsl(var(--muted-foreground))', fontSize: 10}} \n                          angle={-45}\n                          textAnchor=\"end\"\n                          height={60}\n                        />\n                        <YAxis tick={{fill: 'hsl(var(--muted-foreground))'}} tickFormatter={(v) => `${(v/1000).toFixed(0)}k`} />\n                        <Tooltip \n                          contentStyle={{ \n                            backgroundColor: 'hsl(var(--card))', \n                            border: '1px solid hsl(var(--border))',\n                            borderRadius: '8px'\n                          }}\n                          formatter={(value: number) => [`${value.toLocaleString()} ฿`, language === \"th\" ? \"ยอดแทง\" : \"Amount\"]}\n                        />\n                        <Bar dataKey=\"value\" fill=\"hsl(var(--chart-2))\" radius={[4, 4, 0, 0]} />\n                      </BarChart>\n                    </ResponsiveContainer>\n                  ) : (\n                    <div className=\"h-[250px] flex items-center justify-center text-muted-foreground\">\n                      {language === \"th\" ? \"ไม่มีข้อมูล\" : \"No data available\"}\n                    </div>\n                  )}\n                </CardContent>\n              </Card>\n            </div>\n\n            <Card>\n              <CardHeader className=\"pb-3\">\n                <CardTitle className=\"text-lg flex items-center gap-2\">\n                  <Users className=\"h-5 w-5\" />\n                  {language === \"th\" ? \"Affiliate ยอดสูงสุด\" : \"Top Affiliates\"}\n                </CardTitle>\n                <CardDescription>\n                  {language === \"th\" ? \"รายได้คอมมิชชั่นสูงสุด 10 อันดับ\" : \"Top 10 commission earners\"}\n                </CardDescription>\n              </CardHeader>\n              <CardContent>\n                {affiliatePerformance.length > 0 ? (\n                  <div className=\"space-y-3\">\n                    {affiliatePerformance.map((affiliate, index) => (\n                      <div key={affiliate.username} className=\"flex items-center justify-between p-3 rounded-lg bg-muted/30\">\n                        <div className=\"flex items-center gap-3\">\n                          <div className=\"flex h-8 w-8 items-center justify-center rounded-full bg-primary/10 text-primary font-bold text-sm\">\n                            #{index + 1}\n                          </div>\n                          <span className=\"font-medium\">{affiliate.username}</span>\n                        </div>\n                        <Badge className=\"bg-green-500/10 text-green-600 border-green-500/20\">\n                          +{affiliate.earnings.toLocaleString()} ฿\n                        </Badge>\n                      </div>\n                    ))}\n                  </div>\n                ) : (\n                  <div className=\"py-8 text-center text-muted-foreground\">\n                    <Users className=\"h-12 w-12 mx-auto mb-4 opacity-50\" />\n                    <p>{language === \"th\" ? \"ยังไม่มี Affiliate ที่ได้รับคอมมิชชั่น\" : \"No affiliates with commissions yet\"}</p>\n                  </div>\n                )}\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          <TabsContent value=\"bets\" className=\"space-y-4\">\n            <Card>\n              <CardHeader className=\"pb-3\">\n                <div className=\"flex items-center justify-between flex-wrap gap-3\">\n                  <CardTitle className=\"text-lg flex items-center gap-2\">\n                    <BarChart3 className=\"h-5 w-5\" />\n                    {language === \"th\" ? \"รายงานการแทง\" : \"Betting Reports\"}\n                    <Badge variant=\"secondary\">{filteredBets.length}</Badge>\n                  </CardTitle>\n                  <Select value={betFilter} onValueChange={(v) => setBetFilter(v as typeof betFilter)}>\n                    <SelectTrigger className=\"w-[140px]\" data-testid=\"select-bet-filter\">\n                      <SelectValue />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"all\">{language === \"th\" ? \"ทั้งหมด\" : \"All\"}</SelectItem>\n                      <SelectItem value=\"pending\">{language === \"th\" ? \"รอผล\" : \"Pending\"}</SelectItem>\n                      <SelectItem value=\"won\">{language === \"th\" ? \"ถูกรางวัล\" : \"Won\"}</SelectItem>\n                      <SelectItem value=\"lost\">{language === \"th\" ? \"ไม่ถูก\" : \"Lost\"}</SelectItem>\n                    </SelectContent>\n                  </Select>\n                </div>\n              </CardHeader>\n              <CardContent className=\"p-0\">\n                {isLoadingBets ? (\n                  <div className=\"p-4 space-y-3\">\n                    {[1, 2, 3].map((i) => (\n                      <Skeleton key={i} className=\"h-12 w-full\" />\n                    ))}\n                  </div>\n                ) : filteredBets.length === 0 ? (\n                  <div className=\"p-8 text-center text-muted-foreground\">\n                    <BarChart3 className=\"h-12 w-12 mx-auto mb-4 opacity-50\" />\n                    <p>{language === \"th\" ? \"ไม่มีรายการแทง\" : \"No bets found\"}</p>\n                  </div>\n                ) : (\n                  <Table>\n                    <TableHeader>\n                      <TableRow>\n                        <TableHead>{language === \"th\" ? \"ผู้ใช้\" : \"User\"}</TableHead>\n                        <TableHead>{language === \"th\" ? \"หวย\" : \"Lottery\"}</TableHead>\n                        <TableHead>{language === \"th\" ? \"ประเภท\" : \"Type\"}</TableHead>\n                        <TableHead>{language === \"th\" ? \"เลข\" : \"Number\"}</TableHead>\n                        <TableHead>{language === \"th\" ? \"ยอดแทง\" : \"Amount\"}</TableHead>\n                        <TableHead>{language === \"th\" ? \"สถานะ\" : \"Status\"}</TableHead>\n                      </TableRow>\n                    </TableHeader>\n                    <TableBody>\n                      {filteredBets.slice(0, 50).map((bet) => (\n                        <TableRow key={bet.id} data-testid={`row-bet-${bet.id}`}>\n                          <TableCell className=\"font-medium\">{getUsernameById(bet.userId)}</TableCell>\n                          <TableCell>\n                            <Badge variant=\"secondary\" className=\"text-xs\">\n                              {lotteryTypeNames[bet.lotteryType as LotteryType]?.[language] || bet.lotteryType}\n                            </Badge>\n                          </TableCell>\n                          <TableCell className=\"text-sm\">\n                            {betTypeNames[bet.betType as BetType]?.[language] || bet.betType}\n                          </TableCell>\n                          <TableCell className=\"font-mono font-bold\">{bet.numbers}</TableCell>\n                          <TableCell>{bet.amount.toLocaleString()} ฿</TableCell>\n                          <TableCell>\n                            {bet.status === \"pending\" && (\n                              <Badge variant=\"secondary\" className=\"gap-1\">\n                                <Clock className=\"h-3 w-3\" />\n                                {language === \"th\" ? \"รอผล\" : \"Pending\"}\n                              </Badge>\n                            )}\n                            {bet.status === \"won\" && (\n                              <Badge className=\"bg-green-500 gap-1\">\n                                <CheckCircle className=\"h-3 w-3\" />\n                                {language === \"th\" ? \"ถูกรางวัล\" : \"Won\"}\n                              </Badge>\n                            )}\n                            {bet.status === \"lost\" && (\n                              <Badge variant=\"destructive\" className=\"gap-1\">\n                                <XCircle className=\"h-3 w-3\" />\n                                {language === \"th\" ? \"ไม่ถูก\" : \"Lost\"}\n                              </Badge>\n                            )}\n                          </TableCell>\n                        </TableRow>\n                      ))}\n                    </TableBody>\n                  </Table>\n                )}\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          <TabsContent value=\"blocked\" className=\"space-y-4\">\n            <Card>\n              <CardHeader className=\"pb-3\">\n                <CardTitle className=\"text-lg flex items-center gap-2\">\n                  <Plus className=\"h-5 w-5\" />\n                  {t(\"admin.addBlocked\")}\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <div className=\"grid gap-4 sm:grid-cols-4\">\n                  <div className=\"space-y-2\">\n                    <Label>{language === \"th\" ? \"ประเภทหวย\" : \"Lottery Type\"}</Label>\n                    <Select value={newLotteryType} onValueChange={(v) => setNewLotteryType(v as LotteryType)}>\n                      <SelectTrigger data-testid=\"select-lottery-type\">\n                        <SelectValue placeholder={language === \"th\" ? \"เลือกหวย\" : \"Select lottery\"} />\n                      </SelectTrigger>\n                      <SelectContent>\n                        {lotteryTypes.map((type) => (\n                          <SelectItem key={type} value={type}>\n                            {lotteryTypeNames[type][language]}\n                          </SelectItem>\n                        ))}\n                      </SelectContent>\n                    </Select>\n                  </div>\n\n                  <div className=\"space-y-2\">\n                    <Label>{language === \"th\" ? \"เลขที่อั้น\" : \"Number\"}</Label>\n                    <Input\n                      value={newNumber}\n                      onChange={(e) => setNewNumber(e.target.value.replace(/[^0-9]/g, \"\"))}\n                      placeholder=\"123\"\n                      className=\"font-mono\"\n                      data-testid=\"input-blocked-number\"\n                    />\n                  </div>\n\n                  <div className=\"space-y-2\">\n                    <Label>{language === \"th\" ? \"ประเภทแทง\" : \"Bet Type\"}</Label>\n                    <Select value={newBetType} onValueChange={(v) => setNewBetType(v as BetType | \"all\")}>\n                      <SelectTrigger data-testid=\"select-bet-type\">\n                        <SelectValue />\n                      </SelectTrigger>\n                      <SelectContent>\n                        <SelectItem value=\"all\">{language === \"th\" ? \"ทุกประเภท\" : \"All types\"}</SelectItem>\n                        {betTypes.map((type) => (\n                          <SelectItem key={type} value={type}>\n                            {betTypeNames[type][language]}\n                          </SelectItem>\n                        ))}\n                      </SelectContent>\n                    </Select>\n                  </div>\n\n                  <div className=\"flex items-end\">\n                    <Button \n                      onClick={handleAddBlocked} \n                      className=\"w-full gap-2\" \n                      disabled={addBlockedMutation.isPending}\n                      data-testid=\"button-add-blocked\"\n                    >\n                      {addBlockedMutation.isPending ? (\n                        <Loader2 className=\"h-4 w-4 animate-spin\" />\n                      ) : (\n                        <Plus className=\"h-4 w-4\" />\n                      )}\n                      {language === \"th\" ? \"เพิ่ม\" : \"Add\"}\n                    </Button>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader className=\"pb-3\">\n                <CardTitle className=\"text-lg flex items-center gap-2\">\n                  <Ban className=\"h-5 w-5\" />\n                  {language === \"th\" ? \"รายการเลขอั้น\" : \"Blocked Numbers List\"}\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"p-0\">\n                {isLoading ? (\n                  <div className=\"p-4 space-y-3\">\n                    {[1, 2, 3].map((i) => (\n                      <Skeleton key={i} className=\"h-12 w-full\" />\n                    ))}\n                  </div>\n                ) : (\n                  <Table>\n                    <TableHeader>\n                      <TableRow>\n                        <TableHead>{language === \"th\" ? \"หวย\" : \"Lottery\"}</TableHead>\n                        <TableHead>{language === \"th\" ? \"เลข\" : \"Number\"}</TableHead>\n                        <TableHead>{language === \"th\" ? \"ประเภทแทง\" : \"Bet Type\"}</TableHead>\n                        <TableHead>{language === \"th\" ? \"สถานะ\" : \"Status\"}</TableHead>\n                        <TableHead className=\"text-right\">{language === \"th\" ? \"จัดการ\" : \"Actions\"}</TableHead>\n                      </TableRow>\n                    </TableHeader>\n                    <TableBody>\n                      {blockedNumbers.length === 0 ? (\n                        <TableRow>\n                          <TableCell colSpan={5} className=\"text-center text-muted-foreground py-8\">\n                            {language === \"th\" ? \"ยังไม่มีเลขอั้น\" : \"No blocked numbers yet\"}\n                          </TableCell>\n                        </TableRow>\n                      ) : (\n                        blockedNumbers.map((bn) => (\n                          <TableRow key={bn.id}>\n                            <TableCell>\n                              <Badge variant=\"secondary\">\n                                {lotteryTypeNames[bn.lotteryType as LotteryType][language]}\n                              </Badge>\n                            </TableCell>\n                            <TableCell className=\"font-mono font-bold text-lg\">\n                              {bn.number}\n                            </TableCell>\n                            <TableCell>\n                              {bn.betType \n                                ? betTypeNames[bn.betType as BetType][language]\n                                : (language === \"th\" ? \"ทุกประเภท\" : \"All\")}\n                            </TableCell>\n                            <TableCell>\n                              <div className=\"flex items-center gap-2\">\n                                <Switch\n                                  checked={bn.isActive}\n                                  onCheckedChange={() => handleToggleBlocked(bn.id, bn.isActive)}\n                                  data-testid={`switch-blocked-${bn.id}`}\n                                />\n                                <span className={bn.isActive ? \"text-green-500\" : \"text-muted-foreground\"}>\n                                  {bn.isActive \n                                    ? (language === \"th\" ? \"เปิด\" : \"Active\")\n                                    : (language === \"th\" ? \"ปิด\" : \"Inactive\")}\n                                </span>\n                              </div>\n                            </TableCell>\n                            <TableCell className=\"text-right\">\n                              <Button\n                                variant=\"ghost\"\n                                size=\"icon\"\n                                onClick={() => handleDeleteBlocked(bn.id)}\n                                disabled={deleteBlockedMutation.isPending}\n                                data-testid={`button-delete-blocked-${bn.id}`}\n                              >\n                                <Trash2 className=\"h-4 w-4 text-destructive\" />\n                              </Button>\n                            </TableCell>\n                          </TableRow>\n                        ))\n                      )}\n                    </TableBody>\n                  </Table>\n                )}\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"text-lg flex items-center gap-2\">\n                  <DollarSign className=\"h-5 w-5\" />\n                  {t(\"admin.payoutRates\")}\n                </CardTitle>\n                <CardDescription>\n                  {language === \"th\" \n                    ? \"คลิกที่อัตราจ่ายเพื่อแก้ไข\" \n                    : \"Click on a payout rate to edit\"}\n                </CardDescription>\n              </CardHeader>\n              <CardContent>\n                {isLoadingPayoutRates ? (\n                  <div className=\"grid gap-3 sm:grid-cols-2 lg:grid-cols-3\">\n                    {[1, 2, 3, 4, 5, 6, 7, 8, 9].map((i) => (\n                      <Skeleton key={i} className=\"h-16 w-full\" />\n                    ))}\n                  </div>\n                ) : isPayoutRatesError || payoutSettings.length < betTypes.length ? (\n                  <div className=\"p-8 text-center text-destructive\">\n                    <XCircle className=\"h-12 w-12 mx-auto mb-4 opacity-50\" />\n                    <p className=\"font-medium\">\n                      {language === \"th\" \n                        ? \"อัตราจ่ายไม่ครบถ้วน กรุณาตรวจสอบการตั้งค่าระบบหรือรีสตาร์ทเซิร์ฟเวอร์\" \n                        : \"Payout rates are incomplete. Please check system configuration or restart the server.\"}\n                    </p>\n                    <p className=\"text-sm text-muted-foreground mt-2\">\n                      {language === \"th\" \n                        ? `พบ ${payoutSettings.length}/${betTypes.length} รายการ` \n                        : `Found ${payoutSettings.length}/${betTypes.length} rates`}\n                    </p>\n                  </div>\n                ) : (\n                  <div className=\"grid gap-3 sm:grid-cols-2 lg:grid-cols-3\">\n                    {betTypes.map((type) => (\n                      <Card key={type} className=\"bg-card/50 hover-elevate\">\n                        <CardContent className=\"p-4\">\n                          {editingPayoutRate === type ? (\n                            <div className=\"flex flex-col gap-2\">\n                              <span className=\"font-medium text-sm\">\n                                {betTypeNames[type][language]}\n                              </span>\n                              <div className=\"flex items-center gap-2\">\n                                <span className=\"text-muted-foreground\">x</span>\n                                <Input\n                                  type=\"number\"\n                                  step=\"0.1\"\n                                  min=\"0.1\"\n                                  max=\"10000\"\n                                  value={editedRate}\n                                  onChange={(e) => setEditedRate(e.target.value)}\n                                  className=\"h-8 w-24 font-mono\"\n                                  autoFocus\n                                  disabled={updatePayoutRateMutation.isPending}\n                                  data-testid={`input-payout-rate-${type}`}\n                                />\n                                <Button\n                                  size=\"sm\"\n                                  onClick={() => handleSavePayoutRate(type)}\n                                  disabled={updatePayoutRateMutation.isPending}\n                                  data-testid={`button-save-payout-rate-${type}`}\n                                >\n                                  {updatePayoutRateMutation.isPending ? (\n                                    <Loader2 className=\"h-4 w-4 animate-spin\" />\n                                  ) : (\n                                    <CheckCircle className=\"h-4 w-4\" />\n                                  )}\n                                </Button>\n                                <Button\n                                  size=\"sm\"\n                                  variant=\"ghost\"\n                                  onClick={handleCancelEditPayoutRate}\n                                  disabled={updatePayoutRateMutation.isPending}\n                                  data-testid={`button-cancel-payout-rate-${type}`}\n                                >\n                                  <XCircle className=\"h-4 w-4\" />\n                                </Button>\n                              </div>\n                            </div>\n                          ) : (\n                            <div \n                              className=\"flex items-center justify-between gap-2 cursor-pointer\"\n                              onClick={() => handleStartEditPayoutRate(type)}\n                              data-testid={`payout-rate-row-${type}`}\n                            >\n                              <span className=\"font-medium\">\n                                {betTypeNames[type][language]}\n                              </span>\n                              {getPayoutRate(type) !== null ? (\n                                <Badge variant=\"secondary\" className=\"text-lg font-bold\">\n                                  x{getPayoutRate(type)}\n                                </Badge>\n                              ) : (\n                                <Badge variant=\"destructive\" className=\"text-sm font-medium\">\n                                  {language === \"th\" ? \"ไม่พบอัตรา\" : \"Rate missing\"}\n                                </Badge>\n                              )}\n                            </div>\n                          )}\n                        </CardContent>\n                      </Card>\n                    ))}\n                  </div>\n                )}\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          <TabsContent value=\"limits\" className=\"space-y-4\">\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"text-lg flex items-center gap-2\">\n                  <Plus className=\"h-5 w-5\" />\n                  {language === \"th\" ? \"เพิ่มลิมิตยอดแทง\" : \"Add Betting Limit\"}\n                </CardTitle>\n                <CardDescription>\n                  {language === \"th\" \n                    ? \"กำหนดยอดแทงสูงสุดต่อเลขในแต่ละหวย\" \n                    : \"Set maximum bet amount per number for each lottery\"}\n                </CardDescription>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <div className=\"grid gap-4 sm:grid-cols-2 lg:grid-cols-4\">\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"limit-number\">{language === \"th\" ? \"เลข\" : \"Number\"}</Label>\n                    <Input\n                      id=\"limit-number\"\n                      placeholder={language === \"th\" ? \"เช่น 00, 123\" : \"e.g. 00, 123\"}\n                      value={limitNumber}\n                      onChange={(e) => setLimitNumber(e.target.value)}\n                      data-testid=\"input-limit-number\"\n                    />\n                  </div>\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"limit-max-amount\">{language === \"th\" ? \"ยอดสูงสุด (บาท)\" : \"Max Amount (฿)\"}</Label>\n                    <Input\n                      id=\"limit-max-amount\"\n                      type=\"number\"\n                      placeholder={language === \"th\" ? \"เช่น 1000\" : \"e.g. 1000\"}\n                      value={limitMaxAmount}\n                      onChange={(e) => setLimitMaxAmount(e.target.value)}\n                      data-testid=\"input-limit-max-amount\"\n                    />\n                  </div>\n                  <div className=\"space-y-2\">\n                    <Label>{language === \"th\" ? \"ใช้กับหวย\" : \"Apply to Lottery\"}</Label>\n                    <Select\n                      value={isAllLotteryTypes ? \"all\" : \"specific\"}\n                      onValueChange={(v) => {\n                        setIsAllLotteryTypes(v === \"all\");\n                        if (v === \"all\") setLimitLotteryTypes([]);\n                      }}\n                    >\n                      <SelectTrigger data-testid=\"select-limit-lottery-scope\">\n                        <SelectValue />\n                      </SelectTrigger>\n                      <SelectContent>\n                        <SelectItem value=\"all\">{language === \"th\" ? \"ทุกหวย\" : \"All Lotteries\"}</SelectItem>\n                        <SelectItem value=\"specific\">{language === \"th\" ? \"เลือกหวย\" : \"Specific\"}</SelectItem>\n                      </SelectContent>\n                    </Select>\n                  </div>\n                  <div className=\"flex items-end\">\n                    <Button\n                      onClick={() => {\n                        if (!limitNumber || !limitMaxAmount) return;\n                        addBetLimitMutation.mutate({\n                          number: limitNumber,\n                          maxAmount: parseFloat(limitMaxAmount),\n                          lotteryTypes: isAllLotteryTypes ? [] : limitLotteryTypes\n                        });\n                      }}\n                      disabled={!limitNumber || !limitMaxAmount || addBetLimitMutation.isPending}\n                      className=\"w-full\"\n                      data-testid=\"button-add-limit\"\n                    >\n                      {addBetLimitMutation.isPending ? (\n                        <Loader2 className=\"h-4 w-4 animate-spin mr-2\" />\n                      ) : (\n                        <Plus className=\"h-4 w-4 mr-2\" />\n                      )}\n                      {language === \"th\" ? \"เพิ่มลิมิต\" : \"Add Limit\"}\n                    </Button>\n                  </div>\n                </div>\n\n                {!isAllLotteryTypes && (\n                  <div className=\"space-y-2\">\n                    <Label>{language === \"th\" ? \"เลือกประเภทหวย\" : \"Select Lottery Types\"}</Label>\n                    <div className=\"flex flex-wrap gap-2\">\n                      {lotteryTypes.map((type) => (\n                        <Badge\n                          key={type}\n                          variant={limitLotteryTypes.includes(type) ? \"default\" : \"outline\"}\n                          className=\"cursor-pointer\"\n                          onClick={() => {\n                            if (limitLotteryTypes.includes(type)) {\n                              setLimitLotteryTypes(limitLotteryTypes.filter(t => t !== type));\n                            } else {\n                              setLimitLotteryTypes([...limitLotteryTypes, type]);\n                            }\n                          }}\n                          data-testid={`badge-lottery-type-${type}`}\n                        >\n                          {lotteryTypeNames[type][language]}\n                        </Badge>\n                      ))}\n                    </div>\n                  </div>\n                )}\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"text-lg flex items-center gap-2\">\n                  <Shield className=\"h-5 w-5\" />\n                  {language === \"th\" ? \"รายการลิมิต\" : \"Betting Limits\"}\n                  <Badge variant=\"secondary\">{betLimits.length}</Badge>\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"p-0\">\n                {isLoadingBetLimits ? (\n                  <div className=\"p-4 space-y-3\">\n                    {[1, 2, 3].map((i) => (\n                      <Skeleton key={i} className=\"h-12 w-full\" />\n                    ))}\n                  </div>\n                ) : betLimits.length === 0 ? (\n                  <div className=\"p-8 text-center text-muted-foreground\">\n                    <Shield className=\"h-12 w-12 mx-auto mb-4 opacity-50\" />\n                    <p>{language === \"th\" ? \"ยังไม่มีลิมิตยอดแทง\" : \"No betting limits set\"}</p>\n                  </div>\n                ) : (\n                  <Table>\n                    <TableHeader>\n                      <TableRow>\n                        <TableHead>{language === \"th\" ? \"เลข\" : \"Number\"}</TableHead>\n                        <TableHead>{language === \"th\" ? \"ยอดสูงสุด\" : \"Max Amount\"}</TableHead>\n                        <TableHead>{language === \"th\" ? \"ใช้กับหวย\" : \"Lottery Types\"}</TableHead>\n                        <TableHead>{language === \"th\" ? \"สถานะ\" : \"Status\"}</TableHead>\n                        <TableHead className=\"text-right\">{language === \"th\" ? \"จัดการ\" : \"Actions\"}</TableHead>\n                      </TableRow>\n                    </TableHeader>\n                    <TableBody>\n                      {betLimits.map((limit) => (\n                        <TableRow key={limit.id} data-testid={`row-limit-${limit.id}`}>\n                          <TableCell className=\"font-mono font-bold text-lg\">{limit.number}</TableCell>\n                          <TableCell className=\"font-bold text-amber-600\">\n                            {limit.maxAmount.toLocaleString()} ฿\n                          </TableCell>\n                          <TableCell>\n                            {limit.lotteryTypes.length === 0 ? (\n                              <Badge variant=\"secondary\">\n                                {language === \"th\" ? \"ทุกหวย\" : \"All\"}\n                              </Badge>\n                            ) : (\n                              <div className=\"flex flex-wrap gap-1\">\n                                {limit.lotteryTypes.slice(0, 3).map((type) => (\n                                  <Badge key={type} variant=\"outline\" className=\"text-xs\">\n                                    {lotteryTypeNames[type as LotteryType]?.[language] || type}\n                                  </Badge>\n                                ))}\n                                {limit.lotteryTypes.length > 3 && (\n                                  <Badge variant=\"outline\" className=\"text-xs\">\n                                    +{limit.lotteryTypes.length - 3}\n                                  </Badge>\n                                )}\n                              </div>\n                            )}\n                          </TableCell>\n                          <TableCell>\n                            <Switch\n                              checked={limit.isActive}\n                              onCheckedChange={(checked) => \n                                updateBetLimitMutation.mutate({ id: limit.id, isActive: checked })\n                              }\n                              disabled={updateBetLimitMutation.isPending}\n                              data-testid={`switch-limit-status-${limit.id}`}\n                            />\n                          </TableCell>\n                          <TableCell className=\"text-right\">\n                            <Button\n                              variant=\"ghost\"\n                              size=\"icon\"\n                              onClick={() => deleteBetLimitMutation.mutate(limit.id)}\n                              disabled={deleteBetLimitMutation.isPending}\n                              data-testid={`button-delete-limit-${limit.id}`}\n                            >\n                              <Trash2 className=\"h-4 w-4 text-destructive\" />\n                            </Button>\n                          </TableCell>\n                        </TableRow>\n                      ))}\n                    </TableBody>\n                  </Table>\n                )}\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          <TabsContent value=\"bet-types\" className=\"space-y-4\">\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"text-lg flex items-center gap-2\">\n                  <Play className=\"h-5 w-5\" />\n                  {language === \"th\" ? \"เปิด-ปิด ประเภทการแทง\" : \"Enable/Disable Bet Types\"}\n                </CardTitle>\n                <CardDescription>\n                  {language === \"th\" \n                    ? \"เปิดหรือปิดรับแทงแต่ละประเภททั่วทั้งระบบ ทุกหวย\" \n                    : \"Enable or disable betting for each bet type globally across all lotteries\"}\n                </CardDescription>\n              </CardHeader>\n              <CardContent>\n                {isLoadingBetTypeSettings ? (\n                  <div className=\"space-y-3\">\n                    {[1, 2, 3].map((i) => (\n                      <Skeleton key={i} className=\"h-16 w-full\" />\n                    ))}\n                  </div>\n                ) : (\n                  <div className=\"grid gap-4 sm:grid-cols-2 lg:grid-cols-3\">\n                    {betTypes.map((type) => {\n                      const setting = betTypeSettings.find(s => s.betType === type);\n                      const isEnabled = setting?.isEnabled ?? true;\n                      \n                      return (\n                        <Card \n                          key={type} \n                          className={`transition-all ${isEnabled ? 'border-green-500/30 bg-green-500/5' : 'border-red-500/30 bg-red-500/5 opacity-70'}`}\n                          data-testid={`card-bet-type-${type}`}\n                        >\n                          <CardContent className=\"p-4\">\n                            <div className=\"flex items-center justify-between gap-4\">\n                              <div className=\"flex-1\">\n                                <p className=\"font-medium\">{betTypeNames[type][language]}</p>\n                                <p className=\"text-xs text-muted-foreground mt-1\">\n                                  {isEnabled \n                                    ? (language === \"th\" ? \"กำลังรับแทง\" : \"Accepting bets\")\n                                    : (language === \"th\" ? \"ปิดรับแทง\" : \"Not accepting bets\")\n                                  }\n                                </p>\n                              </div>\n                              <div className=\"flex items-center gap-2\">\n                                <Switch\n                                  checked={isEnabled}\n                                  onCheckedChange={(checked) => \n                                    updateBetTypeSettingMutation.mutate({ betType: type, isEnabled: checked })\n                                  }\n                                  disabled={updateBetTypeSettingMutation.isPending}\n                                  data-testid={`switch-bet-type-${type}`}\n                                />\n                                {isEnabled ? (\n                                  <CheckCircle className=\"h-5 w-5 text-green-500\" />\n                                ) : (\n                                  <XCircle className=\"h-5 w-5 text-red-500\" />\n                                )}\n                              </div>\n                            </div>\n                          </CardContent>\n                        </Card>\n                      );\n                    })}\n                  </div>\n                )}\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"text-lg flex items-center gap-2\">\n                  <Settings className=\"h-5 w-5\" />\n                  {language === \"th\" ? \"สถานะปัจจุบัน\" : \"Current Status\"}\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"flex flex-wrap gap-2\">\n                  {betTypes.map((type) => {\n                    const setting = betTypeSettings.find(s => s.betType === type);\n                    const isEnabled = setting?.isEnabled ?? true;\n                    \n                    return (\n                      <Badge \n                        key={type}\n                        variant={isEnabled ? \"default\" : \"destructive\"}\n                        className=\"text-sm\"\n                      >\n                        {betTypeNames[type][language]}: {isEnabled ? (language === \"th\" ? \"เปิด\" : \"ON\") : (language === \"th\" ? \"ปิด\" : \"OFF\")}\n                      </Badge>\n                    );\n                  })}\n                </div>\n              </CardContent>\n            </Card>\n          </TabsContent>\n        </Tabs>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":93339,"size_tokens":null},"client/src/components/ui/dropdown-menu.tsx":{"content":"import * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n","path":null,"size_bytes":7609,"size_tokens":null},"client/src/components/ui/radio-group.tsx":{"content":"import * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n","path":null,"size_bytes":1467,"size_tokens":null},"client/src/components/ui/navigation-menu.tsx":{"content":"import * as React from \"react\"\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\nimport { cva } from \"class-variance-authority\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n))\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=open]:text-accent-foreground data-[state=open]:bg-accent/50 data-[state=open]:hover:bg-accent data-[state=open]:focus:bg-accent\"\n)\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n))\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n))\nNavigationMenuViewport.displayName =\n  NavigationMenuPrimitive.Viewport.displayName\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n))\nNavigationMenuIndicator.displayName =\n  NavigationMenuPrimitive.Indicator.displayName\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n}\n","path":null,"size_bytes":5128,"size_tokens":null},"client/src/components/ui/alert.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n","path":null,"size_bytes":1584,"size_tokens":null},"server/telegram.ts":{"content":"import axios from 'axios';\n\nconst TELEGRAM_TOKEN = process.env.TELEGRAM_TOKEN;\nconst CHAT_ID = process.env.CHAT_ID;\n\nconst lotteryTypeNames: Record<string, string> = {\n  THAI_GOV: \"หวยรัฐบาลไทย\",\n  THAI_STOCK: \"หุ้นไทย\",\n  NIKKEI: \"หุ้นนิเคอิ\",\n  DOW_JONES: \"หุ้นดาวโจนส์\",\n  FTSE: \"หุ้น FTSE\",\n  DAX: \"หุ้น DAX\",\n  LAOS: \"หวยลาว\",\n  HANOI: \"หวยฮานอย\",\n  MALAYSIA: \"หวยมาเลเซีย\",\n  SINGAPORE: \"หวยสิงคโปร์\",\n  YEEKEE: \"หวยยี่กี\",\n  KENO: \"หวยคีโน\"\n};\n\nconst betTypeNames: Record<string, string> = {\n  TWO_TOP: \"2 ตัวบน\",\n  TWO_BOTTOM: \"2 ตัวล่าง\",\n  THREE_TOP: \"3 ตัวตรง\",\n  THREE_TOD: \"3 ตัวโต๊ด\",\n  FOUR_TOP: \"4 ตัวบน\",\n  FIVE_TOP: \"5 ตัวบน\",\n  RUN_TOP: \"วิ่งบน\",\n  RUN_BOTTOM: \"วิ่งล่าง\",\n  REVERSE: \"เลขกลับ\"\n};\n\nexport async function sendTelegramMessage(message: string): Promise<boolean> {\n  if (!TELEGRAM_TOKEN || !CHAT_ID) {\n    console.log('Telegram credentials not configured');\n    return false;\n  }\n  \n  const url = `https://api.telegram.org/bot${TELEGRAM_TOKEN}/sendMessage`;\n  try {\n    const response = await axios.post(url, {\n      chat_id: CHAT_ID,\n      text: message,\n      parse_mode: 'HTML'\n    });\n    if (response.status === 200) {\n      console.log('Telegram notification sent successfully');\n      return true;\n    } else {\n      console.log('Telegram error:', response.status);\n      return false;\n    }\n  } catch (error: any) {\n    console.log('Telegram error:', error.message);\n    return false;\n  }\n}\n\nexport interface DepositNotificationData {\n  username: string;\n  userId: number;\n  amount: number;\n  hasSlip?: boolean;\n  ip?: string;\n}\n\nexport async function sendPaymentNotification(data: DepositNotificationData): Promise<boolean> {\n  const timestamp = new Date().toLocaleString('th-TH', { timeZone: 'Asia/Bangkok' });\n  const slipStatus = data.hasSlip ? '📎 แนบสลิปแล้ว' : '⚠️ ยังไม่ได้แนบสลิป';\n  const message = `🚨 <b>คำขอฝากเงินใหม่!</b>\n👤 ผู้ใช้: ${data.username}\n🆔 ID: ${data.userId}\n💰 จำนวน: ${data.amount.toLocaleString()} บาท\n${slipStatus}\n⏰ เวลา: ${timestamp}${data.ip ? `\\n📍 IP: ${data.ip}` : ''}\n\n📲 กรุณาตรวจสอบในหน้า Admin`;\n  \n  return sendTelegramMessage(message);\n}\n\nexport interface WithdrawalNotificationData {\n  username: string;\n  userId: number;\n  amount: number;\n  ip?: string;\n}\n\nexport async function sendWithdrawalNotification(data: WithdrawalNotificationData): Promise<boolean> {\n  const timestamp = new Date().toLocaleString('th-TH', { timeZone: 'Asia/Bangkok' });\n  const message = `💸 <b>คำขอถอนเงินใหม่!</b>\n👤 ผู้ใช้: ${data.username}\n🆔 ID: ${data.userId}\n💰 จำนวน: ${data.amount.toLocaleString()} บาท\n⏰ เวลา: ${timestamp}${data.ip ? `\\n📍 IP: ${data.ip}` : ''}`;\n  \n  return sendTelegramMessage(message);\n}\n\nexport interface BetItem {\n  lotteryType: string;\n  betType: string;\n  numbers: string;\n  amount: number;\n  isSet?: boolean;\n  setIndex?: number;\n}\n\nexport interface BetNotificationData {\n  username: string;\n  userId: number;\n  items: BetItem[];\n  totalAmount: number;\n  ip?: string;\n}\n\nexport async function sendBetNotification(data: BetNotificationData): Promise<boolean> {\n  const timestamp = new Date().toLocaleString('th-TH', { timeZone: 'Asia/Bangkok' });\n  \n  const setItems = data.items.filter(item => item.isSet);\n  const regularItems = data.items.filter(item => !item.isSet);\n  \n  let betDetails = '';\n  \n  if (setItems.length > 0) {\n    const lotteryName = lotteryTypeNames[setItems[0].lotteryType] || setItems[0].lotteryType;\n    const betTypeName = betTypeNames[setItems[0].betType] || setItems[0].betType;\n    const setTotalAmount = setItems.reduce((sum, item) => sum + item.amount, 0);\n    \n    betDetails += `\\n📦 <b>หวยชุด</b>`;\n    betDetails += `\\n🎰 ${lotteryName} | ${betTypeName}`;\n    setItems.forEach((item) => {\n      betDetails += `\\n   ชุดที่ ${item.setIndex}: ${item.numbers} (${item.amount.toLocaleString()} บาท)`;\n    });\n    betDetails += `\\n   💵 รวมหวยชุด: ${setTotalAmount.toLocaleString()} บาท`;\n  }\n  \n  if (regularItems.length > 0) {\n    if (setItems.length > 0) {\n      betDetails += '\\n';\n    }\n    regularItems.forEach((item, index) => {\n      const lotteryName = lotteryTypeNames[item.lotteryType] || item.lotteryType;\n      const betTypeName = betTypeNames[item.betType] || item.betType;\n      betDetails += `\\n${index + 1}. 🎰 ${lotteryName}`;\n      betDetails += `\\n   📋 ประเภท: ${betTypeName}`;\n      betDetails += `\\n   🔢 เลข: ${item.numbers}`;\n      betDetails += `\\n   💵 เดิมพัน: ${item.amount.toLocaleString()} บาท`;\n    });\n  }\n  \n  const title = setItems.length > 0 && regularItems.length === 0 \n    ? '📦 <b>ซื้อหวยชุดใหม่!</b>' \n    : '🎯 <b>ซื้อหวยใหม่!</b>';\n  \n  const message = `${title}\n👤 ผู้ใช้: ${data.username}\n🆔 ID: ${data.userId}\n${betDetails}\n━━━━━━━━━━━━━━━\n💰 <b>รวมทั้งหมด: ${data.totalAmount.toLocaleString()} บาท</b>\n⏰ เวลา: ${timestamp}${data.ip ? `\\n📍 IP: ${data.ip}` : ''}`;\n  \n  return sendTelegramMessage(message);\n}\n\nexport interface AdminActionNotificationData {\n  username: string;\n  userId: number;\n  transactionType: 'deposit' | 'withdrawal';\n  amount: number;\n  action: 'approved' | 'rejected';\n  transactionId: number;\n}\n\nexport async function sendAdminActionNotification(data: AdminActionNotificationData): Promise<boolean> {\n  const timestamp = new Date().toLocaleString('th-TH', { timeZone: 'Asia/Bangkok' });\n  \n  const actionEmoji = data.action === 'approved' ? '✅' : '❌';\n  const actionText = data.action === 'approved' ? 'อนุมัติแล้ว' : 'ปฏิเสธแล้ว';\n  const typeText = data.transactionType === 'deposit' ? 'ฝากเงิน' : 'ถอนเงิน';\n  \n  const message = `${actionEmoji} <b>Admin ${actionText}!</b>\n📋 ประเภท: ${typeText}\n👤 ผู้ใช้: ${data.username}\n🆔 ID: ${data.userId}\n💰 จำนวน: ${data.amount.toLocaleString()} บาท\n🔖 รหัสธุรกรรม: #${data.transactionId}\n⏰ เวลา: ${timestamp}`;\n  \n  return sendTelegramMessage(message);\n}\n","path":null,"size_bytes":6762,"size_tokens":null},"client/src/pages/SetCalculator.tsx":{"content":"import { useState, useMemo, useEffect } from \"react\";\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { useI18n } from \"@/lib/i18n\";\nimport { useCart, useUser } from \"@/lib/store\";\nimport { useLocation } from \"wouter\";\nimport { \n  Calculator, \n  Hash, \n  DollarSign, \n  Layers, \n  Plus, \n  Trash2, \n  ShoppingCart,\n  CheckCircle,\n  X,\n  AlertCircle\n} from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { \n  lotteryTypes, \n  betTypes, \n  lotteryTypeNames, \n  betTypeNames,\n  type LotteryType,\n  type BetType \n} from \"@shared/schema\";\n\ninterface NumberSet {\n  id: string;\n  numbers: string[];\n}\n\nfunction getRequiredDigits(betType: BetType): number {\n  switch (betType) {\n    case \"RUN_TOP\":\n    case \"RUN_BOTTOM\":\n      return 1;\n    case \"TWO_TOP\":\n    case \"TWO_BOTTOM\":\n    case \"REVERSE\":\n      return 2;\n    case \"THREE_TOP\":\n    case \"THREE_TOD\":\n      return 3;\n    case \"FOUR_TOP\":\n      return 4;\n    case \"FIVE_TOP\":\n      return 5;\n    default:\n      return 2;\n  }\n}\n\nfunction getDigitLabel(betType: BetType, language: string): string {\n  const digits = getRequiredDigits(betType);\n  if (language === \"th\") {\n    switch (digits) {\n      case 1: return \"1 ตัว\";\n      case 2: return \"2 ตัว\";\n      case 3: return \"3 ตัว\";\n      case 4: return \"4 ตัว\";\n      case 5: return \"5 ตัว\";\n      default: return `${digits} ตัว`;\n    }\n  }\n  return `${digits} digit${digits > 1 ? \"s\" : \"\"}`;\n}\n\nexport default function SetCalculator() {\n  const { language } = useI18n();\n  const { toast } = useToast();\n  const { addItem } = useCart();\n  const { isAuthenticated } = useUser();\n  const [, setLocation] = useLocation();\n  \n  const [sets, setSets] = useState<NumberSet[]>([]);\n  const [currentInput, setCurrentInput] = useState(\"\");\n  const [pricePerSet, setPricePerSet] = useState(\"1\");\n  const [lotteryType, setLotteryType] = useState<LotteryType>(\"THAI_GOV\");\n  const [betType, setBetType] = useState<BetType>(\"TWO_TOP\");\n\n  const requiredDigits = getRequiredDigits(betType);\n\n  const parseAndValidate = (input: string) => {\n    const tokens = input\n      .split(/[,\\s\\n]+/)\n      .map(n => n.trim())\n      .filter(n => /^\\d+$/.test(n));\n    \n    const validNumbers: string[] = [];\n    const invalidNumbers: string[] = [];\n    \n    tokens.forEach(token => {\n      const paddedToken = token.padStart(requiredDigits, '0');\n      if (paddedToken.length === requiredDigits) {\n        validNumbers.push(paddedToken);\n      } else {\n        invalidNumbers.push(token);\n      }\n    });\n    \n    return { validNumbers, invalidNumbers };\n  };\n\n  const { validNumbers: currentValidNumbers, invalidNumbers: currentInvalidNumbers } = \n    useMemo(() => parseAndValidate(currentInput), [currentInput, requiredDigits]);\n\n  useEffect(() => {\n    if (sets.length > 0) {\n      const hasInvalidSets = sets.some(set => \n        set.numbers.some(n => n.length !== requiredDigits)\n      );\n      if (hasInvalidSets) {\n        toast({\n          title: language === \"th\" ? \"ประเภทแทงเปลี่ยน\" : \"Bet type changed\",\n          description: language === \"th\" \n            ? `กรุณาล้างชุดเก่าเพื่อเพิ่มเลข ${getDigitLabel(betType, language)} ใหม่`\n            : `Please clear old sets to add new ${getDigitLabel(betType, language)} numbers`,\n          variant: \"destructive\"\n        });\n        setSets([]);\n      }\n    }\n  }, [betType]);\n\n  const handleAddSet = () => {\n    if (currentValidNumbers.length === 0) {\n      toast({\n        title: language === \"th\" ? \"กรุณาใส่เลข\" : \"Please enter numbers\",\n        description: language === \"th\" \n          ? `ต้องเป็นเลข ${getDigitLabel(betType, language)} เท่านั้น`\n          : `Must be ${getDigitLabel(betType, language)} only`,\n        variant: \"destructive\"\n      });\n      return;\n    }\n\n    const newSet: NumberSet = {\n      id: `${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,\n      numbers: currentValidNumbers\n    };\n\n    setSets(prev => [...prev, newSet]);\n    setCurrentInput(\"\");\n    \n    toast({\n      title: language === \"th\" ? `เพิ่มชุดที่ ${sets.length + 1} แล้ว` : `Added Set ${sets.length + 1}`,\n      description: language === \"th\" \n        ? `${currentValidNumbers.length} เลข: ${currentValidNumbers.join(\", \")}`\n        : `${currentValidNumbers.length} numbers: ${currentValidNumbers.join(\", \")}`\n    });\n  };\n\n  const handleRemoveSet = (id: string) => {\n    setSets(prev => prev.filter(s => s.id !== id));\n  };\n\n  const handleClearAll = () => {\n    setSets([]);\n    setCurrentInput(\"\");\n  };\n\n  const result = useMemo(() => {\n    const allNumbers: string[] = [];\n    sets.forEach(set => {\n      allNumbers.push(...set.numbers);\n    });\n\n    const uniqueNumbers = Array.from(new Set(allNumbers)).sort((a, b) => {\n      if (a.length !== b.length) return a.length - b.length;\n      return a.localeCompare(b);\n    });\n\n    const price = parseFloat(pricePerSet) || 0;\n    const totalNumbers = allNumbers.length;\n    const totalAmount = sets.length * price;\n\n    return {\n      totalSets: sets.length,\n      totalNumbers,\n      uniqueCount: uniqueNumbers.length,\n      uniqueNumbers,\n      totalAmount\n    };\n  }, [sets, pricePerSet]);\n\n  const handleAddToCart = () => {\n    if (!isAuthenticated) {\n      toast({\n        title: language === \"th\" ? \"กรุณาเข้าสู่ระบบ\" : \"Please login\",\n        description: language === \"th\" ? \"คุณต้องเข้าสู่ระบบก่อนซื้อ\" : \"You need to login before purchasing\",\n        variant: \"destructive\"\n      });\n      setLocation(\"/login\");\n      return;\n    }\n\n    if (sets.length === 0) {\n      toast({\n        title: language === \"th\" ? \"ไม่มีเลขในชุด\" : \"No numbers in sets\",\n        variant: \"destructive\"\n      });\n      return;\n    }\n\n    const price = parseFloat(pricePerSet) || 0;\n    if (price <= 0) {\n      toast({\n        title: language === \"th\" ? \"กรุณาใส่ราคาต่อชุด\" : \"Please enter price per set\",\n        variant: \"destructive\"\n      });\n      return;\n    }\n\n    sets.forEach((set, idx) => {\n      addItem({\n        lotteryType,\n        betType,\n        numbers: set.numbers.join(\",\"),\n        amount: price,\n        isSet: true,\n        setIndex: idx + 1\n      });\n    });\n\n    toast({\n      title: language === \"th\" ? \"เพิ่มลงตะกร้าแล้ว\" : \"Added to cart\",\n      description: language === \"th\" \n        ? `เพิ่ม ${sets.length} ชุด รวม ${result.totalAmount.toLocaleString()} บาท`\n        : `Added ${sets.length} sets, total ${result.totalAmount.toLocaleString()} Baht`\n    });\n\n    handleClearAll();\n  };\n\n  return (\n    <div className=\"min-h-screen bg-background p-4 md:p-6\">\n      <div className=\"max-w-4xl mx-auto space-y-6\">\n        <div className=\"text-center mb-8\">\n          <div className=\"inline-flex items-center justify-center w-16 h-16 rounded-full bg-primary/10 mb-4\">\n            <Calculator className=\"h-8 w-8 text-primary\" />\n          </div>\n          <h1 className=\"text-2xl md:text-3xl font-bold\">\n            {language === \"th\" ? \"คำนวณหวยชุด\" : \"Lottery Set Calculator\"}\n          </h1>\n          <p className=\"text-muted-foreground mt-2\">\n            {language === \"th\" \n              ? \"เพิ่มเลขเป็นชุด คำนวณยอด แล้วซื้อได้เลย\" \n              : \"Add numbers in sets, calculate total, and purchase directly\"}\n          </p>\n        </div>\n\n        <div className=\"grid gap-6 md:grid-cols-2\">\n          <div className=\"space-y-4\">\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <Hash className=\"h-5 w-5\" />\n                  {language === \"th\" ? \"เพิ่มชุดใหม่\" : \"Add New Set\"}\n                </CardTitle>\n                <CardDescription>\n                  {language === \"th\" \n                    ? `ชุดที่ ${sets.length + 1} - ใส่เลขคั่นด้วย , หรือ ช่องว่าง` \n                    : `Set ${sets.length + 1} - Separate numbers with comma or space`}\n                </CardDescription>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <div className=\"space-y-2\">\n                  <div className=\"flex items-center justify-between\">\n                    <Label htmlFor=\"numbers\">\n                      {language === \"th\" ? \"ใส่เลข\" : \"Enter Numbers\"}\n                    </Label>\n                    <Badge variant=\"outline\" className=\"text-xs\">\n                      {getDigitLabel(betType, language)}\n                    </Badge>\n                  </div>\n                  <Textarea\n                    id=\"numbers\"\n                    placeholder={language === \"th\" \n                      ? `ตัวอย่าง: ${\n                          requiredDigits === 1 ? \"1, 2, 3, 4\" : \n                          requiredDigits === 2 ? \"12, 34, 56, 78\" : \n                          requiredDigits === 3 ? \"123, 456, 789\" :\n                          requiredDigits === 4 ? \"1234, 5678\" :\n                          \"12345, 67890\"\n                        }` \n                      : `Example: ${\n                          requiredDigits === 1 ? \"1, 2, 3, 4\" : \n                          requiredDigits === 2 ? \"12, 34, 56, 78\" : \n                          requiredDigits === 3 ? \"123, 456, 789\" :\n                          requiredDigits === 4 ? \"1234, 5678\" :\n                          \"12345, 67890\"\n                        }`}\n                    value={currentInput}\n                    onChange={(e) => setCurrentInput(e.target.value)}\n                    className=\"min-h-[100px] font-mono\"\n                    data-testid=\"textarea-numbers\"\n                  />\n                  {currentValidNumbers.length > 0 && (\n                    <p className=\"text-sm text-green-600 dark:text-green-400\">\n                      {language === \"th\" \n                        ? `ถูกต้อง ${currentValidNumbers.length} เลข: ${currentValidNumbers.join(\", \")}`\n                        : `Valid ${currentValidNumbers.length} numbers: ${currentValidNumbers.join(\", \")}`}\n                    </p>\n                  )}\n                  {currentInvalidNumbers.length > 0 && (\n                    <p className=\"text-sm text-destructive flex items-center gap-1\">\n                      <AlertCircle className=\"h-3 w-3\" />\n                      {language === \"th\" \n                        ? `ไม่ถูกต้อง (ต้อง ${getDigitLabel(betType, language)}): ${currentInvalidNumbers.join(\", \")}`\n                        : `Invalid (must be ${getDigitLabel(betType, language)}): ${currentInvalidNumbers.join(\", \")}`}\n                    </p>\n                  )}\n                </div>\n\n                <Button \n                  className=\"w-full\" \n                  onClick={handleAddSet}\n                  disabled={currentValidNumbers.length === 0}\n                  data-testid=\"button-add-set\"\n                >\n                  <Plus className=\"h-4 w-4 mr-2\" />\n                  {language === \"th\" ? `เพิ่มชุดที่ ${sets.length + 1}` : `Add Set ${sets.length + 1}`}\n                </Button>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <Layers className=\"h-5 w-5\" />\n                  {language === \"th\" ? \"ชุดที่เพิ่มแล้ว\" : \"Added Sets\"}\n                  {sets.length > 0 && (\n                    <Badge variant=\"secondary\" className=\"ml-auto\">\n                      {sets.length} {language === \"th\" ? \"ชุด\" : \"sets\"}\n                    </Badge>\n                  )}\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                {sets.length === 0 ? (\n                  <p className=\"text-sm text-muted-foreground text-center py-4\">\n                    {language === \"th\" ? \"ยังไม่มีชุด กรุณาเพิ่มชุดใหม่\" : \"No sets yet. Please add a new set.\"}\n                  </p>\n                ) : (\n                  <div className=\"space-y-2 max-h-[300px] overflow-y-auto\">\n                    {sets.map((set, idx) => (\n                      <div \n                        key={set.id} \n                        className=\"flex items-center gap-2 p-3 bg-muted/30 rounded-lg group\"\n                        data-testid={`row-set-${idx}`}\n                      >\n                        <Badge variant=\"outline\" className=\"shrink-0\">\n                          {language === \"th\" ? `ชุด ${idx + 1}` : `Set ${idx + 1}`}\n                        </Badge>\n                        <span className=\"font-mono text-sm flex-1 truncate\">\n                          {set.numbers.join(\", \")}\n                        </span>\n                        <Badge variant=\"secondary\" className=\"shrink-0\">\n                          {set.numbers.length} {language === \"th\" ? \"เลข\" : \"nos\"}\n                        </Badge>\n                        <Button\n                          variant=\"ghost\"\n                          size=\"icon\"\n                          className=\"h-8 w-8 opacity-0 group-hover:opacity-100 transition-opacity\"\n                          onClick={() => handleRemoveSet(set.id)}\n                          data-testid={`button-remove-set-${idx}`}\n                        >\n                          <X className=\"h-4 w-4\" />\n                        </Button>\n                      </div>\n                    ))}\n                  </div>\n                )}\n\n                {sets.length > 0 && (\n                  <Button \n                    variant=\"outline\" \n                    className=\"w-full mt-4\" \n                    onClick={handleClearAll}\n                    data-testid=\"button-clear-all\"\n                  >\n                    <Trash2 className=\"h-4 w-4 mr-2\" />\n                    {language === \"th\" ? \"ล้างทั้งหมด\" : \"Clear All\"}\n                  </Button>\n                )}\n              </CardContent>\n            </Card>\n          </div>\n\n          <div className=\"space-y-4\">\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <DollarSign className=\"h-5 w-5\" />\n                  {language === \"th\" ? \"ตั้งค่าการซื้อ\" : \"Purchase Settings\"}\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div className=\"space-y-2\">\n                    <Label>{language === \"th\" ? \"ประเภทหวย\" : \"Lottery Type\"}</Label>\n                    <Select value={lotteryType} onValueChange={(v) => setLotteryType(v as LotteryType)}>\n                      <SelectTrigger data-testid=\"select-lottery-type\">\n                        <SelectValue />\n                      </SelectTrigger>\n                      <SelectContent>\n                        {lotteryTypes.map((type) => (\n                          <SelectItem key={type} value={type}>\n                            {lotteryTypeNames[type][language]}\n                          </SelectItem>\n                        ))}\n                      </SelectContent>\n                    </Select>\n                  </div>\n\n                  <div className=\"space-y-2\">\n                    <Label>{language === \"th\" ? \"ประเภทแทง\" : \"Bet Type\"}</Label>\n                    <Select value={betType} onValueChange={(v) => setBetType(v as BetType)}>\n                      <SelectTrigger data-testid=\"select-bet-type\">\n                        <SelectValue />\n                      </SelectTrigger>\n                      <SelectContent>\n                        {betTypes.map((type) => (\n                          <SelectItem key={type} value={type}>\n                            {betTypeNames[type][language]}\n                          </SelectItem>\n                        ))}\n                      </SelectContent>\n                    </Select>\n                  </div>\n                </div>\n\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"price\">\n                    {language === \"th\" ? \"ราคาต่อชุด (บาท)\" : \"Price per Set (Baht)\"}\n                  </Label>\n                  <div className=\"relative\">\n                    <DollarSign className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n                    <Input\n                      id=\"price\"\n                      type=\"number\"\n                      min=\"1\"\n                      placeholder=\"1\"\n                      value={pricePerSet}\n                      onChange={(e) => setPricePerSet(e.target.value)}\n                      className=\"pl-10\"\n                      data-testid=\"input-price\"\n                    />\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle>\n                  {language === \"th\" ? \"สรุปยอด\" : \"Summary\"}\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <Card className=\"bg-primary/5 border-primary/20\">\n                    <CardContent className=\"p-4 text-center\">\n                      <p className=\"text-sm text-muted-foreground mb-1\">\n                        {language === \"th\" ? \"จำนวนชุด\" : \"Total Sets\"}\n                      </p>\n                      <p className=\"text-2xl font-bold text-primary\" data-testid=\"text-total-sets\">\n                        {result.totalSets}\n                      </p>\n                    </CardContent>\n                  </Card>\n\n                  <Card className=\"bg-accent/50 border-accent\">\n                    <CardContent className=\"p-4 text-center\">\n                      <p className=\"text-sm text-muted-foreground mb-1\">\n                        {language === \"th\" ? \"จำนวนเลข\" : \"Total Numbers\"}\n                      </p>\n                      <p className=\"text-2xl font-bold text-accent-foreground\" data-testid=\"text-total-numbers\">\n                        {result.totalNumbers}\n                      </p>\n                    </CardContent>\n                  </Card>\n                </div>\n\n                <Card className=\"bg-green-500/10 border-green-500/30\">\n                  <CardContent className=\"p-4 text-center\">\n                    <p className=\"text-sm text-muted-foreground mb-1\">\n                      {language === \"th\" ? \"ยอดรวมทั้งหมด\" : \"Total Amount\"}\n                    </p>\n                    <p className=\"text-3xl font-bold text-green-600 dark:text-green-400\" data-testid=\"text-total-amount\">\n                      {result.totalAmount.toLocaleString()} ฿\n                    </p>\n                    {result.totalSets > 0 && pricePerSet && (\n                      <p className=\"text-xs text-muted-foreground mt-1\">\n                        {result.totalSets} {language === \"th\" ? \"ชุด\" : \"sets\"} × {parseFloat(pricePerSet).toLocaleString()} ฿\n                      </p>\n                    )}\n                  </CardContent>\n                </Card>\n\n                <Button \n                  className=\"w-full h-12 text-lg\"\n                  onClick={handleAddToCart}\n                  disabled={sets.length === 0 || result.totalAmount <= 0}\n                  data-testid=\"button-add-to-cart\"\n                >\n                  <ShoppingCart className=\"h-5 w-5 mr-2\" />\n                  {language === \"th\" ? \"เพิ่มลงตะกร้า\" : \"Add to Cart\"}\n                </Button>\n              </CardContent>\n            </Card>\n\n            {result.uniqueNumbers.length > 0 && (\n              <Card>\n                <CardHeader className=\"pb-2\">\n                  <CardTitle className=\"text-sm flex items-center justify-between\">\n                    <span>{language === \"th\" ? \"เลขทั้งหมด (ไม่ซ้ำ)\" : \"All Numbers (Unique)\"}</span>\n                    <Badge variant=\"outline\">{result.uniqueCount}</Badge>\n                  </CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"flex flex-wrap gap-1.5 max-h-[150px] overflow-y-auto\">\n                    {result.uniqueNumbers.map((num, idx) => (\n                      <Badge \n                        key={idx} \n                        variant=\"secondary\"\n                        className=\"font-mono text-xs\"\n                        data-testid={`badge-number-${idx}`}\n                      >\n                        {num}\n                      </Badge>\n                    ))}\n                  </div>\n                </CardContent>\n              </Card>\n            )}\n          </div>\n        </div>\n\n        <Card className=\"bg-muted/30\">\n          <CardContent className=\"p-4\">\n            <div className=\"flex items-start gap-2\">\n              <CheckCircle className=\"h-5 w-5 text-green-500 mt-0.5 shrink-0\" />\n              <p className=\"text-sm text-muted-foreground\">\n                {language === \"th\" \n                  ? \"วิธีใช้: พิมพ์เลขชุดแรก กดปุ่ม \\\"เพิ่มชุดที่ 1\\\" → พิมพ์เลขชุดถัดไป กดปุ่ม \\\"เพิ่มชุดที่ 2\\\" → ทำซ้ำจนครบ → ตั้งราคาต่อชุด → กดปุ่ม \\\"เพิ่มลงตะกร้า\\\" เพื่อซื้อ\" \n                  : \"How to use: Enter first set numbers, click \\\"Add Set 1\\\" → Enter next set, click \\\"Add Set 2\\\" → Repeat → Set price per set → Click \\\"Add to Cart\\\" to purchase\"}\n              </p>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":22830,"size_tokens":null}},"version":2}